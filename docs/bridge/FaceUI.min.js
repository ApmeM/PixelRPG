Bridge.assembly("FaceUI",function($asm,globals){"use strict";Bridge.define("FaceUI.Animators.IAnimator",{fields:{Enabled:!1},props:{TargetEntity:null,ShouldRemoveWhenDone:!1,IsDone:!1},ctors:{init:function(){this.Enabled=!0}},methods:{SetTargetEntity:function(entity){if(!this.CheckEntityCompatibility(entity))throw new FaceUI.Exceptions.InvalidValueException.$ctor1("Entity type not compatible with this animator!");if(this.TargetEntity!=null&&entity!=null)throw new FaceUI.Exceptions.InvalidStateException.$ctor1("Cannot attach animator to entity after it was already attached!");entity==null&&this.OnDetach();this.TargetEntity=entity;entity!=null&&this.OnAttached()},OnAttached:function(){},OnDetach:function(){},CheckEntityCompatibility:function(entity){return!0}}});Bridge.define("FaceUI.BuiltinThemes",{$kind:"enum",statics:{fields:{hd:0,lowres:1,editor:2}}});Bridge.define("FaceUI.CursorType",{$kind:"enum",statics:{fields:{Default:0,Pointer:1,IBeam:2}}});Bridge.define("FaceUI.DataTypes._FontStyle",{$kind:"enum",statics:{fields:{Regular:0,Bold:1,Italic:2}}});Bridge.define("FaceUI.DataTypes.CursorTextureData",{fields:{OffsetX:0,OffsetY:0,DrawWidth:0},ctors:{init:function(){this.OffsetX=0;this.OffsetY=0;this.DrawWidth=64}}});Bridge.define("FaceUI.DataTypes.DefaultStyles",{fields:{State:null,Scale:null,FillColor:null,OutlineColor:null,OutlineWidth:null,ForceAlignCenter:null,FontStyle:null,SelectedHighlightColor:null,ShadowColor:null,ShadowOffset:null,Padding:null,SpaceBefore:null,SpaceAfter:null,ShadowScale:null,DefaultSize:null}});Bridge.define("FaceUI.DataTypes.DefaultStylesList",{fields:{Styles:null}});Bridge.define("FaceUI.DataTypes.StyleProperty",{$kind:"struct",statics:{methods:{getDefaultValue:function(){return new FaceUI.DataTypes.StyleProperty}}},fields:{_color:null,_vector:null,_float:null},props:{asColor:{get:function(){return System.Nullable.liftne(Microsoft.Xna.Framework.Color.op_Inequality,System.Nullable.lift1("$clone",this._color),null)?System.Nullable.getValue(this._color):Microsoft.Xna.Framework.Color.White},set:function(value){this._color=value.$clone()}},asVector:{get:function(){return System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",this._vector),null)?System.Nullable.getValue(this._vector):Microsoft.Xna.Framework.Vector2.One},set:function(value){this._vector=value.$clone()}},asFloat:{get:function(){return System.Nullable.getValue(this._float)},set:function(value){this._float=value}},asInt:{get:function(){return Bridge.Int.clip32(System.Nullable.getValue(this._float))},set:function(value){this._float=value}},asBool:{get:function(){return System.Nullable.getValue(this._float)>0},set:function(value){this._float=value?1:0}},_Value:{get:function(){return System.Nullable.liftne(Microsoft.Xna.Framework.Color.op_Inequality,System.Nullable.lift1("$clone",this._color),null)?System.Nullable.getValue(this._color).$clone():System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",this._vector),null)?System.Nullable.getValue(this._vector).$clone():Bridge.box(System.Nullable.getValue(this._float),System.Single,System.Single.format,System.Single.getHashCode)},set:function(value){Bridge.is(value,Microsoft.Xna.Framework.Color)?this._color=System.Nullable.getValue(Bridge.cast(Bridge.unbox(value,Microsoft.Xna.Framework.Color),Microsoft.Xna.Framework.Color)):Bridge.is(value,Microsoft.Xna.Framework.Vector2)?this._vector=System.Nullable.getValue(Bridge.cast(Bridge.unbox(value,Microsoft.Xna.Framework.Vector2),Microsoft.Xna.Framework.Vector2)):this._float=System.Nullable.getValue(Bridge.cast(Bridge.unbox(value,System.Single),System.Single))}}},ctors:{$ctor5:function(value){this.$initialize();this._float=value;this._color=null;this._vector=null},$ctor4:function(value){this.$initialize();this._float=value;this._color=null;this._vector=null},$ctor2:function(value){this.$initialize();this._vector=value.$clone();this._color=null;this._float=null},$ctor1:function(value){this.$initialize();this._color=value.$clone();this._vector=null;this._float=null},$ctor3:function(value){this.$initialize();this._vector=null;this._color=null;this._float=value?1:0},ctor:function(){this.$initialize()}},methods:{getHashCode:function(){return Bridge.addHash([5643315873,this._color,this._vector,this._float])},equals:function(o){return Bridge.is(o,FaceUI.DataTypes.StyleProperty)?Bridge.equals(this._color,o._color)&&Bridge.equals(this._vector,o._vector)&&Bridge.equals(this._float,o._float):!1},$clone:function(to){var s=to||new FaceUI.DataTypes.StyleProperty;return s._color=System.Nullable.lift1("$clone",this._color),s._vector=System.Nullable.lift1("$clone",this._vector),s._float=this._float,s}}});Bridge.define("FaceUI.DataTypes.TextureData",{fields:{FrameWidth:0,FrameHeight:0}});Bridge.define("FaceUI.DataTypes.ThemeSettings",{fields:{ThemeName:null,AuthorName:null,Description:null,Credits:null,Version:null,RepoUrl:null,License:null}});Bridge.define("FaceUI.IKeyboardInput",{$kind:"interface"});Bridge.define("FaceUI.IMouseInput",{$kind:"interface"});Bridge.define("FaceUI.DrawUtils",{fields:{_renderTargets:null,_lastRenderTarget:null},ctors:{init:function(){this._renderTargets=new(System.Collections.Generic.Stack$1(Microsoft.Xna.Framework.Graphics.RenderTarget2D).ctor)}},methods:{PushRenderTarget:function(target){if(!FaceUI.UserInterface.Active.UseRenderTarget)throw new FaceUI.Exceptions.InvalidStateException.$ctor1("UserInterface.Active.UseRenderTarget must be 'true' to use render-target features!");this._renderTargets.Push(target)},PopRenderTarget:function(){this._renderTargets.Pop()},ScaleRect:function(rect,scale){var ret,prevSize,move;return scale===1?rect.$clone():(ret=rect.$clone(),prevSize=ret.Size.$clone(),ret.Width=Bridge.Int.clip32(ret.Width*scale),ret.Height=Bridge.Int.clip32(ret.Height*scale),move=Microsoft.Xna.Framework.Point.op_Subtraction(ret.Size.$clone(),prevSize.$clone()),move.X=Bridge.Int.div(move.X,2)|0,move.Y=Bridge.Int.div(move.Y,2)|0,ret.Location=Microsoft.Xna.Framework.Point.op_Subtraction(ret.Location.$clone(),move.$clone()),ret.$clone())},VectorToRoundPoint:function(vector){return new Microsoft.Xna.Framework.Point.$ctor2(Bridge.Int.clip32(Math.floor(vector.X)),Bridge.Int.clip32(Math.floor(vector.Y)))},FixColorOpacity$1:function(color){var $t;return this.FixColorOpacity(($t=color,$t!=null?$t:Microsoft.Xna.Framework.Color.White))},FixColorOpacity:function(color){return Microsoft.Xna.Framework.Color.op_Multiply(color.$clone(),color.A/255)},DrawImage:function(spriteBatch,texture,destination,color,scale,sourceRect){var $t,src;color===void 0&&(color=null);scale===void 0&&(scale=1);sourceRect===void 0&&(sourceRect=null);color=this.FixColorOpacity$1(System.Nullable.lift1("$clone",color));src=($t=sourceRect,$t!=null?$t:new Microsoft.Xna.Framework.Rectangle.$ctor2(0,0,texture.Width,texture.Height));destination=this.ScaleRect(destination.$clone(),scale);spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destination.$clone(),src.$clone(),System.Nullable.getValue(color))},DrawSurface:function(spriteBatch,texture,destination,textureFrameWidth,scale,color,frameScale){var needTopBottomStrips,currX,toCut,needSideStrips,currY,toCut1,currX1,currY1,toCutX,toCutY;if(scale===void 0&&(scale=1),color===void 0&&(color=null),frameScale===void 0&&(frameScale=1),color=this.FixColorOpacity$1(System.Nullable.lift1("$clone",color)),textureFrameWidth.Y===0){this.DrawSurfaceHorizontal(spriteBatch,texture,destination.$clone(),textureFrameWidth.X,System.Nullable.lift1("$clone",color),frameScale);return}if(textureFrameWidth.X===0){this.DrawSurfaceVertical(spriteBatch,texture,destination.$clone(),textureFrameWidth.Y,System.Nullable.lift1("$clone",color),frameScale);return}destination=this.ScaleRect(destination.$clone(),scale);var srcRect=new Microsoft.Xna.Framework.Rectangle.ctor,destRect=new Microsoft.Xna.Framework.Rectangle.ctor,ScaleFactor=FaceUI.UserInterface.Active.GlobalScale*frameScale,frameSizeSrcVec=Microsoft.Xna.Framework.Vector2.op_Multiply(new Microsoft.Xna.Framework.Vector2.$ctor2(texture.Width,texture.Height),textureFrameWidth.$clone()),frameSizeSrc=this.VectorToRoundPoint(frameSizeSrcVec.$clone()),frameSizeDest=this.VectorToRoundPoint(Microsoft.Xna.Framework.Vector2.op_Multiply$1(frameSizeSrcVec.$clone(),ScaleFactor)),frameCenterSrcVec=Microsoft.Xna.Framework.Vector2.op_Subtraction(new Microsoft.Xna.Framework.Vector2.$ctor2(texture.Width,texture.Height),Microsoft.Xna.Framework.Vector2.op_Multiply$1(frameSizeSrcVec.$clone(),2)),centerSizeSrc=this.VectorToRoundPoint(frameCenterSrcVec.$clone()),centerSizeDest=this.VectorToRoundPoint(Microsoft.Xna.Framework.Vector2.op_Multiply$1(frameCenterSrcVec.$clone(),ScaleFactor));if(srcRect.X=0,srcRect.Y=0,srcRect.Width=frameSizeSrc.X,srcRect.Height=frameSizeSrc.Y,destRect.X=destination.X,destRect.Y=destination.Y,destRect.Width=frameSizeDest.X,destRect.Height=frameSizeDest.Y,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),srcRect.X=texture.Width-frameSizeSrc.X|0,srcRect.Y=0,destRect.X=destination.Right-frameSizeDest.X|0,destRect.Y=destination.Y,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),srcRect.X=0,srcRect.Y=texture.Height-frameSizeSrc.Y|0,destRect.X=destination.X,destRect.Y=destination.Bottom-frameSizeDest.Y|0,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),srcRect.X=texture.Width-frameSizeSrc.X|0,destRect.X=destination.Right-frameSizeDest.X|0,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),needTopBottomStrips=destination.Width>Bridge.Int.mul(frameSizeDest.X,2),needTopBottomStrips){currX=frameSizeDest.X;srcRect.X=frameSizeSrc.X;srcRect.Width=centerSizeSrc.X;srcRect.Height=frameSizeSrc.Y;destRect.Width=centerSizeDest.X;destRect.Height=frameSizeDest.Y;do destRect.X=destination.X+currX|0,toCut=destRect.Right-(destination.Right-frameSizeDest.X|0)|0,toCut>0&&(destRect.Width=destRect.Width-toCut|0,srcRect.Width=srcRect.Width-Bridge.Int.clip32(toCut/ScaleFactor)|0),srcRect.Y=0,destRect.Y=destination.Y,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),srcRect.Y=texture.Height-frameSizeSrc.Y|0,destRect.Y=destination.Bottom-frameSizeDest.Y|0,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),currX=currX+centerSizeDest.X|0;while(currX<(destination.Width-frameSizeDest.X|0))}if(needSideStrips=destination.Height>Bridge.Int.mul(frameSizeDest.Y,2),needSideStrips){currY=frameSizeDest.Y;srcRect.Y=frameSizeSrc.Y;srcRect.Width=frameSizeSrc.X;srcRect.Height=centerSizeSrc.Y;destRect.Width=frameSizeDest.X;destRect.Height=centerSizeDest.Y;do destRect.Y=destination.Y+currY|0,toCut1=destRect.Bottom-(destination.Bottom-frameSizeDest.Y|0)|0,toCut1>0&&(destRect.Height=destRect.Height-toCut1|0,srcRect.Height=srcRect.Height-Bridge.Int.clip32(toCut1/ScaleFactor)|0),srcRect.X=0,destRect.X=destination.X,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),srcRect.X=texture.Width-frameSizeSrc.X|0,destRect.X=destination.Right-frameSizeDest.X|0,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),currY=currY+centerSizeDest.Y|0;while(currY<(destination.Height-frameSizeDest.Y|0))}if(needTopBottomStrips&&needSideStrips){currX1=0;srcRect.X=frameSizeSrc.X;srcRect.Y=frameSizeSrc.Y;srcRect.Width=centerSizeSrc.X;destRect.Width=centerSizeDest.X;do{destRect.X=(destination.X+frameSizeDest.X|0)+currX1|0;currY1=0;srcRect.Height=centerSizeSrc.Y;destRect.Height=centerSizeDest.Y;toCutX=destRect.Right-(destination.Right-frameSizeDest.X|0)|0;toCutX>0&&(destRect.Width=destRect.Width-toCutX|0,srcRect.Width=srcRect.Width-Bridge.Int.clip32(toCutX/ScaleFactor)|0);do destRect.Y=(destination.Y+frameSizeDest.Y|0)+currY1|0,toCutY=destRect.Bottom-(destination.Bottom-frameSizeDest.Y|0)|0,toCutY>0&&(destRect.Height=destRect.Height-toCutY|0,srcRect.Height=srcRect.Height-Bridge.Int.clip32(toCutY/ScaleFactor)|0),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),currY1=currY1+centerSizeDest.Y|0;while(currY1<(destination.Height-Bridge.Int.mul(frameSizeDest.Y,2)|0));currX1=currX1+centerSizeDest.X|0}while(currX1<(destination.Width-Bridge.Int.mul(frameSizeDest.X,2)|0))}},DrawSurfaceHorizontal:function(spriteBatch,texture,destination,frameWidth,color,frameScale){var currX,toCut;color===void 0&&(color=null);frameScale===void 0&&(frameScale=1);color=this.FixColorOpacity$1(System.Nullable.lift1("$clone",color));var ScaleXfac=destination.Height/texture.Height,frameSizeTextureVector=new Microsoft.Xna.Framework.Vector2.$ctor2(texture.Width*frameWidth,texture.Height),frameSizeSrc=this.VectorToRoundPoint(frameSizeTextureVector.$clone()),frameSizeDest=this.VectorToRoundPoint(new Microsoft.Xna.Framework.Vector2.$ctor2(frameSizeTextureVector.X*ScaleXfac*frameScale,destination.Height)),frameCenterSrcVec=new Microsoft.Xna.Framework.Vector2.$ctor2(texture.Width-Bridge.Int.mul(frameSizeSrc.X,2)|0,texture.Height),centerSizeSrc=this.VectorToRoundPoint(frameCenterSrcVec.$clone()),centerSizeDest=this.VectorToRoundPoint(new Microsoft.Xna.Framework.Vector2.$ctor2(destination.Width-Bridge.Int.mul(frameSizeDest.X,2)|0,destination.Height)),srcRect=new Microsoft.Xna.Framework.Rectangle.ctor,destRect=new Microsoft.Xna.Framework.Rectangle.ctor;if(srcRect.X=0,srcRect.Y=0,srcRect.Width=frameSizeSrc.X,srcRect.Height=frameSizeSrc.Y,destRect.X=destination.X,destRect.Y=destination.Y,destRect.Width=frameSizeDest.X,destRect.Height=frameSizeDest.Y,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),srcRect.X=texture.Width-frameSizeSrc.X|0,destRect.X=destination.Right-frameSizeDest.X|0,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),destination.Width>Bridge.Int.mul(frameSizeDest.X,2)){currX=frameSizeDest.X;srcRect.Y=0;srcRect.X=frameSizeSrc.X;srcRect.Width=centerSizeSrc.X;srcRect.Height=centerSizeSrc.Y;destRect.Y=destination.Y;destRect.Width=centerSizeDest.X;destRect.Height=centerSizeDest.Y;do destRect.X=destination.X+currX|0,toCut=destRect.Right-(destination.Right-frameSizeDest.X|0)|0,toCut>0&&(destRect.Width=destRect.Width-toCut|0,srcRect.Width=srcRect.Width-Bridge.Int.clip32(toCut/(srcRect.Width/destRect.Width))|0),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),currX=currX+centerSizeDest.X|0;while(currX<(destination.Width-frameSizeDest.X|0))}},DrawSurfaceVertical:function(spriteBatch,texture,destination,frameWidth,color,frameScale){var currY,toCut;color===void 0&&(color=null);frameScale===void 0&&(frameScale=1);color=this.FixColorOpacity$1(System.Nullable.lift1("$clone",color));var ScaleYfac=destination.Width/texture.Width,frameSizeTextureVector=new Microsoft.Xna.Framework.Vector2.$ctor2(texture.Width,texture.Height*frameWidth),frameSizeSrc=this.VectorToRoundPoint(frameSizeTextureVector.$clone()),frameSizeDest=this.VectorToRoundPoint(new Microsoft.Xna.Framework.Vector2.$ctor2(destination.Width,frameSizeTextureVector.Y*ScaleYfac*frameScale)),frameCenterSrcVec=new Microsoft.Xna.Framework.Vector2.$ctor2(texture.Width,texture.Height-Bridge.Int.mul(frameSizeSrc.Y,2)|0),centerSizeSrc=this.VectorToRoundPoint(frameCenterSrcVec.$clone()),centerSizeDest=this.VectorToRoundPoint(new Microsoft.Xna.Framework.Vector2.$ctor2(destination.Width,destination.Height-Bridge.Int.mul(frameSizeDest.Y,2)|0)),srcRect=new Microsoft.Xna.Framework.Rectangle.ctor,destRect=new Microsoft.Xna.Framework.Rectangle.ctor;if(srcRect.X=0,srcRect.Y=0,srcRect.Width=frameSizeSrc.X,srcRect.Height=frameSizeSrc.Y,destRect.X=destination.X,destRect.Y=destination.Y,destRect.Width=frameSizeDest.X,destRect.Height=frameSizeDest.Y,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),srcRect.Y=texture.Height-frameSizeSrc.Y|0,destRect.Y=destination.Bottom-frameSizeDest.Y|0,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),destination.Height>Bridge.Int.mul(frameSizeDest.Y,2)){currY=frameSizeDest.Y;srcRect.X=0;srcRect.Y=frameSizeSrc.Y;srcRect.Width=centerSizeSrc.X;srcRect.Height=centerSizeSrc.Y;destRect.Y=destination.Y;destRect.Width=centerSizeDest.X;destRect.Height=centerSizeDest.Y;do destRect.Y=destination.Y+currY|0,toCut=destRect.Bottom-(destination.Bottom-frameSizeDest.Y|0)|0,toCut>0&&(destRect.Height=destRect.Height-toCut|0,srcRect.Height=srcRect.Height-Bridge.Int.clip32(toCut/(srcRect.Height/destRect.Height))|0),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,destRect.$clone(),srcRect.$clone(),System.Nullable.getValue(color)),currY=currY+centerSizeDest.Y|0;while(currY<(destination.Height-frameSizeDest.Y|0))}},StartDraw:function(spriteBatch,isDisabled){spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Begin(Microsoft.Xna.Framework.Graphics.SpriteSortMode.Deferred,FaceUI.UserInterface.Active.BlendState,FaceUI.UserInterface.Active.SamplerState,Microsoft.Xna.Framework.Graphics.DepthStencilState.None,Microsoft.Xna.Framework.Graphics.RasterizerState.CullCounterClockwise,isDisabled?FaceUI.Resources.DisabledEffect:null,void 0);this.UpdateRenderTarget(spriteBatch)},StartDrawSilhouette:function(spriteBatch){spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Begin(Microsoft.Xna.Framework.Graphics.SpriteSortMode.Deferred,FaceUI.UserInterface.Active.BlendState,FaceUI.UserInterface.Active.SamplerState,Microsoft.Xna.Framework.Graphics.DepthStencilState.None,Microsoft.Xna.Framework.Graphics.RasterizerState.CullCounterClockwise,FaceUI.Resources.SilhouetteEffect,void 0);this.UpdateRenderTarget(spriteBatch)},UpdateRenderTarget:function(spriteBatch){var newRenderTarget=null;newRenderTarget=this._renderTargets.Count>0?this._renderTargets.Peek():FaceUI.UserInterface.Active.RenderTarget;Bridge.referenceEquals(this._lastRenderTarget,newRenderTarget)||(this._lastRenderTarget=newRenderTarget,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.SetRenderTarget(this._lastRenderTarget))},EndDraw:function(spriteBatch){spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$End()}}});Bridge.define("FaceUI.Entities.Anchor",{$kind:"enum",statics:{fields:{Center:0,TopLeft:1,TopRight:2,TopCenter:3,BottomLeft:4,BottomRight:5,BottomCenter:6,CenterLeft:7,CenterRight:8,Auto:9,AutoInline:10,AutoInlineNoBreak:11,AutoCenter:12}}});Bridge.define("FaceUI.Entities.Entity",{statics:{fields:{_serializableTypes:null,USE_DEFAULT_SIZE:null,DefaultStyle:null},ctors:{init:function(){this.USE_DEFAULT_SIZE=new Microsoft.Xna.Framework.Vector2;this._serializableTypes=new(System.Collections.Generic.List$1(Function).ctor);this.USE_DEFAULT_SIZE=new Microsoft.Xna.Framework.Vector2.$ctor2(-1,-1);this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.Entity)}},methods:{MakeSerializable:function(type){FaceUI.Entities.Entity._serializableTypes.add(type)}}},fields:{_children:null,_sortedChildren:null,_needToSortChildren:!1,_hiddenInternalEntity:!1,_parent:null,_indexInParent:0,_animators:null,PriorityBonus:0,_isInteractable:!1,Identifier:null,_lastScrollVal:null,ClickThrough:!1,PromiscuousClicksMode:!1,DoEventsIfDirectParentIsLocked:!1,InheritParentState:!1,_background:null,_isFirstUpdate:!1,_isDirty:!1,_style:null,_minSize:null,_maxSize:null,_destRectVersion:0,_parentLastDestRectVersion:0,AttachedData:null,UseActualSizeForCollision:!1,_size:null,_offset:null,_anchor:0,OnMouseDown:null,OnRightMouseDown:null,OnMouseReleased:null,WhileMouseDown:null,WhileRightMouseDown:null,WhileMouseHover:null,WhileMouseHoverOrDown:null,OnClick:null,OnRightClick:null,OnValueChange:null,OnMouseEnter:null,OnMouseLeave:null,OnMouseWheelScroll:null,OnStartDrag:null,OnStopDrag:null,WhileDragging:null,BeforeDraw:null,AfterDraw:null,BeforeUpdate:null,AfterUpdate:null,OnVisiblityChange:null,OnFocusChange:null,ToolTipText:null,_isMouseOver:!1,Enabled:!1,Locked:!1,_visible:!1,_isCurrentlyDisabled:!1,_entityState:0,_isFocused:!1,_destRect:null,_destRectInternal:null,_draggable:!1,_needToSetDragOffset:!1,_dragOffset:null,_isBeingDragged:!1,LimitDraggingToParentBoundaries:!1,ExtraMargin:null},props:{Children:{get:function(){return Bridge.as(this._children.AsReadOnly(),System.Collections.Generic.IReadOnlyList$1(FaceUI.Entities.Entity))}},RawStyleSheet:{get:function(){return this._style},set:function(value){this._style=value}},OverflowScrollVal:{get:function(){return Microsoft.Xna.Framework.Point.Zero.$clone()}},MinSize:{get:function(){return System.Nullable.lift1("$clone",this._minSize)},set:function(value){this._minSize=System.Nullable.lift1("$clone",value);this.MarkAsDirty()}},MaxSize:{get:function(){return System.Nullable.lift1("$clone",this._maxSize)},set:function(value){this._maxSize=System.Nullable.lift1("$clone",value);this.MarkAsDirty()}},Offset:{get:function(){return this._offset.$clone()},set:function(value){this.SetOffset(value.$clone())}},Anchor:{get:function(){return this._anchor},set:function(value){this.SetAnchor(value)}},IsFocused:{get:function(){return this._isFocused},set:function(value){this._isFocused!==value&&(this._isFocused=value,this.DoOnFocusChange())}},InternalDestRect:{get:function(){return this._destRectInternal.$clone()}},EntityDefaultSize:{get:function(){var ret=this.GetStyleProperty(FaceUI.Entities.StylePropertyIds.DefaultSize,FaceUI.Entities.EntityState.Default,!0).asVector.$clone();return ret.$clone()}},MouseInput:{get:function(){return FaceUI.UserInterface.Active.MouseInputProvider}},KeyboardInput:{get:function(){return FaceUI.UserInterface.Active.KeyboardInputProvider}},GlobalScale:{get:function(){return FaceUI.UserInterface.Active.GlobalScale}},DebugDraw:{get:function(){return FaceUI.UserInterface.Active.DebugDraw}},_scaledSpaceAfter:{get:function(){return Microsoft.Xna.Framework.Vector2.op_Multiply$1(this.SpaceAfter.$clone(),this.GlobalScale)}},_scaledSpaceBefore:{get:function(){return Microsoft.Xna.Framework.Vector2.op_Multiply$1(this.SpaceBefore.$clone(),this.GlobalScale)}},_scaledSize:{get:function(){return new Microsoft.Xna.Framework.Vector2.$ctor2(this._size.X<1?this._size.X:this._size.X*this.GlobalScale,this._size.Y<1?this._size.Y:this._size.Y*this.GlobalScale)}},_scaledOffset:{get:function(){return Microsoft.Xna.Framework.Vector2.op_Multiply$1(this._offset.$clone(),this.GlobalScale)}},_scaledPadding:{get:function(){return Microsoft.Xna.Framework.Vector2.op_Multiply$1(this.Padding.$clone(),this.GlobalScale)}},Visible:{get:function(){return this._visible},set:function(value){this._visible=value;this.DoOnVisibilityChange()}},Priority:{get:function(){return this._indexInParent+this.PriorityBonus|0}},IsDirty:{get:function(){return this._isDirty}},Draggable:{get:function(){return this._draggable},set:function(value){this._needToSetDragOffset=this._draggable!==value;this._draggable=value;this.MarkAsDirty()}},Background:{get:function(){return this._background},set:function(value){if(value!=null&&value._parent!=null)throw new FaceUI.Exceptions.InvalidStateException.$ctor1("Cannot set background entity that have a parent!");this._background=value}},State:{get:function(){return this._entityState},set:function(value){this._entityState=value}},Size:{get:function(){return this._size.$clone()},set:function(value){Microsoft.Xna.Framework.Vector2.op_Inequality(this._size.$clone(),value.$clone())&&(this._size=value.$clone(),this.MarkAsDirty())}},SpaceAfter:{get:function(){return this.GetActiveStyle(FaceUI.Entities.StylePropertyIds.SpaceAfter).asVector.$clone()},set:function(value){this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.SpaceAfter,new FaceUI.DataTypes.StyleProperty.$ctor2(value.$clone()))}},SpaceBefore:{get:function(){return this.GetActiveStyle(FaceUI.Entities.StylePropertyIds.SpaceBefore).asVector.$clone()},set:function(value){this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.SpaceBefore,new FaceUI.DataTypes.StyleProperty.$ctor2(value.$clone()))}},FillColor:{get:function(){return this.GetActiveStyle(FaceUI.Entities.StylePropertyIds.FillColor).asColor.$clone()},set:function(value){this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.FillColor,new FaceUI.DataTypes.StyleProperty.$ctor1(value.$clone()),0,!1)}},Opacity:{get:function(){return this.FillColor.A},set:function(value){var col=this.FillColor.$clone();col.A=value;this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.FillColor,new FaceUI.DataTypes.StyleProperty.$ctor1(col.$clone()),0,!1);col=this.OutlineColor.$clone();col.A=value;this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.OutlineColor,new FaceUI.DataTypes.StyleProperty.$ctor1(col.$clone()),0,!1)}},OutlineOpacity:{get:function(){return this.OutlineColor.A},set:function(value){var col=this.OutlineColor.$clone();col.A=value;this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.OutlineColor,new FaceUI.DataTypes.StyleProperty.$ctor1(col.$clone()),0,!1)}},Padding:{get:function(){return this.GetActiveStyle(FaceUI.Entities.StylePropertyIds.Padding).asVector.$clone()},set:function(value){this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.Padding,new FaceUI.DataTypes.StyleProperty.$ctor2(value.$clone()))}},ShadowColor:{get:function(){return this.GetActiveStyle(FaceUI.Entities.StylePropertyIds.ShadowColor).asColor.$clone()},set:function(value){this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.ShadowColor,new FaceUI.DataTypes.StyleProperty.$ctor1(value.$clone()),0,!1)}},ShadowScale:{get:function(){return this.GetActiveStyle(FaceUI.Entities.StylePropertyIds.ShadowScale).asFloat},set:function(value){this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.ShadowScale,new FaceUI.DataTypes.StyleProperty.$ctor5(value),0,!1)}},ShadowOffset:{get:function(){return this.GetActiveStyle(FaceUI.Entities.StylePropertyIds.ShadowOffset).asVector.$clone()},set:function(value){this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.ShadowOffset,new FaceUI.DataTypes.StyleProperty.$ctor2(value.$clone()),0,!1)}},Scale:{get:function(){return this.GetActiveStyle(FaceUI.Entities.StylePropertyIds.Scale).asFloat},set:function(value){this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.Scale,new FaceUI.DataTypes.StyleProperty.$ctor5(value))}},OutlineColor:{get:function(){return this.GetActiveStyle(FaceUI.Entities.StylePropertyIds.OutlineColor).asColor.$clone()},set:function(value){this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.OutlineColor,new FaceUI.DataTypes.StyleProperty.$ctor1(value.$clone()),0,!1)}},OutlineWidth:{get:function(){return this.GetActiveStyle(FaceUI.Entities.StylePropertyIds.OutlineWidth).asInt},set:function(value){this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.OutlineWidth,new FaceUI.DataTypes.StyleProperty.$ctor4(value),0,!1)}},Parent:{get:function(){return this._parent}},IsMouseDown:{get:function(){return this._entityState===FaceUI.Entities.EntityState.MouseDown}},IsMouseOver:{get:function(){return this._isMouseOver}}},ctors:{init:function(){this._lastScrollVal=new Microsoft.Xna.Framework.Point;this._size=new Microsoft.Xna.Framework.Vector2;this._offset=new Microsoft.Xna.Framework.Vector2;this._destRect=new Microsoft.Xna.Framework.Rectangle;this._destRectInternal=new Microsoft.Xna.Framework.Rectangle;this._dragOffset=new Microsoft.Xna.Framework.Vector2;this.ExtraMargin=new Microsoft.Xna.Framework.Point;this._children=new(System.Collections.Generic.List$1(FaceUI.Entities.Entity).ctor);this._needToSortChildren=!0;this._hiddenInternalEntity=!1;this._animators=new(System.Collections.Generic.List$1(FaceUI.Animators.IAnimator).ctor);this.PriorityBonus=0;this._isInteractable=!1;this.Identifier="";this._lastScrollVal=Microsoft.Xna.Framework.Point.Zero.$clone();this.ClickThrough=!1;this.PromiscuousClicksMode=!1;this.DoEventsIfDirectParentIsLocked=!1;this.InheritParentState=!1;this._isFirstUpdate=!0;this._isDirty=!0;this._style=new FaceUI.Entities.StyleSheet;this._destRectVersion=0;this._parentLastDestRectVersion=0;this.UseActualSizeForCollision=!0;this._isMouseOver=!1;this.Enabled=!0;this.Locked=!1;this._visible=!0;this._isCurrentlyDisabled=!1;this._entityState=FaceUI.Entities.EntityState.Default;this._isFocused=!1;this._draggable=!1;this._needToSetDragOffset=!1;this._dragOffset=Microsoft.Xna.Framework.Vector2.Zero.$clone();this._isBeingDragged=!1;this.LimitDraggingToParentBoundaries=!0;this.ExtraMargin=Microsoft.Xna.Framework.Point.Zero.$clone()},ctor:function(size,anchor,offset){size===void 0&&(size=null);anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);var $t,$t1;this.$initialize();this.MarkAsDirty();this.UpdateStyle(FaceUI.Entities.Entity.DefaultStyle);this._size=($t=size,$t!=null?$t:FaceUI.Entities.Entity.USE_DEFAULT_SIZE.$clone());this._offset=($t1=offset,$t1!=null?$t1:Microsoft.Xna.Framework.Vector2.Zero);this._anchor=anchor}},methods:{GetMousePos:function(addVector){return addVector===void 0&&(addVector=null),FaceUI.UserInterface.Active.GetTransformedCursorPos(System.Nullable.lift1("$clone",addVector))},DoOnFirstUpdate:function(){Bridge.staticEquals(FaceUI.UserInterface.Active.OnEntitySpawn,null)?null:FaceUI.UserInterface.Active.OnEntitySpawn(this);this._parent!=null&&this._parent.MarkAsDirty()},GetStyleProperty:function(property,state,fallbackToDefault){return state===void 0&&(state=0),fallbackToDefault===void 0&&(fallbackToDefault=!0),this._style.getStyleProperty(property,state,fallbackToDefault)},SetStyleProperty:function(property,value,state,markAsDirty){state===void 0&&(state=0);markAsDirty===void 0&&(markAsDirty=!0);this._style.setStyleProperty(property,value.$clone(),state);markAsDirty&&this.MarkAsDirty()},GetActiveStyle:function(property){return this.GetStyleProperty(property,this._entityState)},UpdateStyle:function(updates){this._style.updateFrom(updates);this.MarkAsDirty()},Find:function(T,identifier,recursive){var $t,anyType,child,ret;recursive===void 0&&(recursive=!1);anyType=Bridge.referenceEquals(T,FaceUI.Entities.Entity);$t=Bridge.getEnumerator(this._children);try{while($t.moveNext())if(child=$t.Current,!child._hiddenInternalEntity){if(Bridge.referenceEquals(child.Identifier,identifier)&&(anyType||Bridge.referenceEquals(Bridge.getType(child),T)))return Bridge.cast(child,T);if(recursive&&(ret=child.Find(T,identifier,recursive),ret!=null))return ret}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return null},Find$1:function(identifier,recursive){return recursive===void 0&&(recursive=!1),this.Find(FaceUI.Entities.Entity,identifier,recursive)},IterateChildren:function(callback){var $t,child;$t=Bridge.getEnumerator(this._children);try{while($t.moveNext())child=$t.Current,callback(child)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}},IsDisabled:function(){for(var parent=this;parent!=null;){if(!parent.Enabled)return!0;parent=parent._parent}return!1},IsDeepChildOf:function(other){for(var parent=this;parent!=null;){if(Bridge.referenceEquals(parent._parent,other))return!0;parent=parent._parent}return!1},IsLocked:function(){for(var parent=this;parent!=null;){if(parent.Locked){if(this.DoEventsIfDirectParentIsLocked&&Bridge.referenceEquals(parent,this._parent)){parent=parent._parent;continue}return!0}parent=parent._parent}return!1},IsVisible:function(){for(var parent=this;parent!=null;){if(!parent.Visible)return!1;parent=parent._parent}return!0},SetAnchorAndOffset:function(anchor,offset){this.SetAnchor(anchor);this.SetOffset(offset.$clone())},SetAnchor:function(anchor){this._anchor=anchor;this.MarkAsDirty()},SetOffset:function(offset){(Microsoft.Xna.Framework.Vector2.op_Inequality(this._offset.$clone(),offset.$clone())||Microsoft.Xna.Framework.Vector2.op_Inequality(this._dragOffset.$clone(),offset.$clone()))&&(this._dragOffset=this._offset=offset.$clone(),this.MarkAsDirty())},GetSortedChildren:function(){return this._needToSortChildren&&(this._sortedChildren=new(System.Collections.Generic.List$1(FaceUI.Entities.Entity).$ctor1)(this._children),this._sortedChildren.Sort$2($asm.$.FaceUI.Entities.Entity.f1),this._needToSortChildren=!1),this._sortedChildren},UpdateDestinationRects:function(){this._destRect=this.CalcDestRect();this._destRectInternal=this.CalcInternalRect();this._isDirty=!1;this._destRectVersion=this._destRectVersion+1>>>0;this._parent!=null&&(this._parentLastDestRectVersion=this._parent._destRectVersion)},UpdateDestinationRectsIfDirty:function(){this._parent!=null&&(this._isDirty||this._parentLastDestRectVersion!==this._parent._destRectVersion)&&this.UpdateDestinationRects()},Draw:function(spriteBatch){this.Visible&&(this._isCurrentlyDisabled=this.IsDisabled(),this.OnBeforeDraw(spriteBatch),this.Background!=null&&(this._background._parent=this,this._background._indexInParent=0,this._background.Draw(spriteBatch),this._background._parent=null),this.UpdateDestinationRectsIfDirty(),this.DrawEntityShadow(spriteBatch),this.DrawEntityOutline(spriteBatch),FaceUI.UserInterface.Active.DrawUtils.StartDraw(spriteBatch,this._isCurrentlyDisabled),this.DrawEntity(spriteBatch,FaceUI.Entities.DrawPhase.Base),FaceUI.UserInterface.Active.DrawUtils.EndDraw(spriteBatch),this.DebugDraw&&this.DrawDebugStuff(spriteBatch),this.DrawChildren(spriteBatch),this.OnAfterDraw(spriteBatch))},DrawDebugStuff:function(spriteBatch){var destRectCol,internalCol,spaceColor;spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Begin(Microsoft.Xna.Framework.Graphics.SpriteSortMode.Immediate,Microsoft.Xna.Framework.Graphics.BlendState.NonPremultiplied,void 0,void 0,void 0,void 0,void 0);destRectCol=new Microsoft.Xna.Framework.Color.$ctor9(0,1,.25,.05);spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(FaceUI.Resources.WhiteTexture,this._destRect.$clone(),destRectCol.$clone());internalCol=new Microsoft.Xna.Framework.Color.$ctor9(1,.5,0,.5);spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(FaceUI.Resources.WhiteTexture,this._destRectInternal.$clone(),internalCol.$clone());spaceColor=new Microsoft.Xna.Framework.Color.$ctor9(0,0,.5,.5);this.SpaceBefore.X>0&&spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(FaceUI.Resources.WhiteTexture,new Microsoft.Xna.Framework.Rectangle.$ctor2(Bridge.Int.clip32(this._destRect.Left-this._scaledSpaceBefore.X),this._destRect.Y,Bridge.Int.clip32(this._scaledSpaceBefore.X),this._destRect.Height),spaceColor.$clone());this.SpaceBefore.Y>0&&spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(FaceUI.Resources.WhiteTexture,new Microsoft.Xna.Framework.Rectangle.$ctor2(this._destRect.X,Bridge.Int.clip32(this._destRect.Top-this._scaledSpaceBefore.Y),this._destRect.Width,Bridge.Int.clip32(this._scaledSpaceBefore.Y)),spaceColor.$clone());spaceColor=new Microsoft.Xna.Framework.Color.$ctor9(.5,0,.5,.5);this.SpaceAfter.X>0&&spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(FaceUI.Resources.WhiteTexture,new Microsoft.Xna.Framework.Rectangle.$ctor2(this._destRect.Right,this._destRect.Y,Bridge.Int.clip32(this._scaledSpaceAfter.X),this._destRect.Height),spaceColor.$clone());this.SpaceAfter.Y>0&&spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(FaceUI.Resources.WhiteTexture,new Microsoft.Xna.Framework.Rectangle.$ctor2(this._destRect.X,this._destRect.Bottom,this._destRect.Width,Bridge.Int.clip32(this._scaledSpaceAfter.Y)),spaceColor.$clone());spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$End()},DrawChildren:function(spriteBatch){var $t,childrenSorted,child;this.BeforeDrawChildren(spriteBatch);childrenSorted=this.GetSortedChildren();$t=Bridge.getEnumerator(childrenSorted);try{while($t.moveNext())child=$t.Current,child.Draw(spriteBatch)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}this.AfterDrawChildren(spriteBatch)},InitAfterDeserialize:function(){var $t,$t1,temp=this._children,child,child1;this._children=new(System.Collections.Generic.List$1(FaceUI.Entities.Entity).ctor);$t=Bridge.getEnumerator(temp);try{while($t.moveNext())child=$t.Current,child._parent=null,this.AddChild(child,child.InheritParentState)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}this.MarkAsDirty();$t1=Bridge.getEnumerator(this._children);try{while($t1.moveNext())child1=$t1.Current,child1.InitAfterDeserialize()}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}},ToEntitiesDictionary:function(){var ret={v:new(System.Collections.Generic.Dictionary$2(System.String,FaceUI.Entities.Entity))};return this.PopulateDict(ret),ret.v},PopulateDict:function(dict){var $t,child;this.Identifier!=null&&this.Identifier.length>0&&dict.v.set(this.Identifier,this);$t=Bridge.getEnumerator(this._children);try{while($t.moveNext())child=$t.Current,child.PopulateDict(dict)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}},BeforeDrawChildren:function(spriteBatch){},AfterDrawChildren:function(spriteBatch){},DrawEntityShadow:function(spriteBatch){var isDirty=this._isDirty,shadowColor=this.ShadowColor.$clone(),shadowScale;if(shadowColor.A!==0){shadowScale=this.ShadowScale;this._destRect.X=this._destRect.X+Bridge.Int.clip32(this.ShadowOffset.X)|0;this._destRect.Y=this._destRect.Y+Bridge.Int.clip32(this.ShadowOffset.Y)|0;var oldFill=this.FillColor.$clone(),oldOutline=this.OutlineColor.$clone(),oldScale=this.Scale,oldOutlineWidth=this.OutlineWidth,oldState=this._entityState;this.FillColor=shadowColor.$clone();this.OutlineColor=Microsoft.Xna.Framework.Color.Transparent.$clone();this.OutlineWidth=0;this.Scale=shadowScale;this._entityState=FaceUI.Entities.EntityState.Default;this._isCurrentlyDisabled&&(this.FillColor=new Microsoft.Xna.Framework.Color.$ctor1(Microsoft.Xna.Framework.Color.op_Multiply(Microsoft.Xna.Framework.Color.White.$clone(),((shadowColor.R+shadowColor.G|0)+shadowColor.B|0)/765),shadowColor.A));FaceUI.UserInterface.Active.DrawUtils.StartDrawSilhouette(spriteBatch);this.DrawEntity(spriteBatch,FaceUI.Entities.DrawPhase.Shadow);FaceUI.UserInterface.Active.DrawUtils.EndDraw(spriteBatch);this._destRect.X=this._destRect.X-Bridge.Int.clip32(this.ShadowOffset.X)|0;this._destRect.Y=this._destRect.Y-Bridge.Int.clip32(this.ShadowOffset.Y)|0;this.FillColor=oldFill.$clone();this.Scale=oldScale;this.OutlineColor=oldOutline.$clone();this.OutlineWidth=oldOutlineWidth;this._entityState=oldState;this._isDirty=isDirty}},DrawEntityOutline:function(spriteBatch){var outlineWidth=this.OutlineWidth,outlineColor;if(this.OutlineWidth!==0){outlineColor=this.OutlineColor.$clone();this._isCurrentlyDisabled&&(outlineColor=new Microsoft.Xna.Framework.Color.$ctor1(Microsoft.Xna.Framework.Color.op_Multiply(Microsoft.Xna.Framework.Color.White.$clone(),((outlineColor.R+outlineColor.G|0)+outlineColor.B|0)/765),outlineColor.A));var oldFill=this.FillColor.$clone(),originalDest=this._destRect.$clone(),originalIntDest=this._destRectInternal.$clone(),oldState=this._entityState;this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.FillColor,new FaceUI.DataTypes.StyleProperty.$ctor1(outlineColor.$clone()),oldState,!1);FaceUI.UserInterface.Active.DrawUtils.StartDrawSilhouette(spriteBatch);this._destRect.Location=Microsoft.Xna.Framework.Point.op_Addition(originalDest.Location.$clone(),new Microsoft.Xna.Framework.Point.$ctor2(-outlineWidth|0,0));this.DrawEntity(spriteBatch,FaceUI.Entities.DrawPhase.Outline);this._destRect.Location=Microsoft.Xna.Framework.Point.op_Addition(originalDest.Location.$clone(),new Microsoft.Xna.Framework.Point.$ctor2(0,-outlineWidth|0));this.DrawEntity(spriteBatch,FaceUI.Entities.DrawPhase.Outline);this._destRect.Location=Microsoft.Xna.Framework.Point.op_Addition(originalDest.Location.$clone(),new Microsoft.Xna.Framework.Point.$ctor2(outlineWidth,0));this.DrawEntity(spriteBatch,FaceUI.Entities.DrawPhase.Outline);this._destRect.Location=Microsoft.Xna.Framework.Point.op_Addition(originalDest.Location.$clone(),new Microsoft.Xna.Framework.Point.$ctor2(0,outlineWidth));this.DrawEntity(spriteBatch,FaceUI.Entities.DrawPhase.Outline);FaceUI.UserInterface.Active.DrawUtils.EndDraw(spriteBatch);this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.FillColor,new FaceUI.DataTypes.StyleProperty.$ctor1(oldFill.$clone()),oldState,!1);this._destRect=originalDest.$clone();this._destRectInternal=originalIntDest.$clone()}},DrawEntity:function(spriteBatch,phase){},OnAfterDraw:function(spriteBatch){Bridge.staticEquals(this.AfterDraw,null)?null:this.AfterDraw(this);Bridge.staticEquals(FaceUI.UserInterface.Active.AfterDraw,null)?null:FaceUI.UserInterface.Active.AfterDraw(this)},OnBeforeDraw:function(spriteBatch){Bridge.staticEquals(this.BeforeDraw,null)?null:this.BeforeDraw(this);Bridge.staticEquals(FaceUI.UserInterface.Active.BeforeDraw,null)?null:FaceUI.UserInterface.Active.BeforeDraw(this)},AddChild:function(child,inheritParentState,index){if(inheritParentState===void 0&&(inheritParentState=!1),index===void 0&&(index=-1),child._parent!=null){if(FaceUI.UserInterface.Active.SilentSoftErrors)return child;throw new FaceUI.Exceptions.InvalidStateException.$ctor1("Child element to add already got a parent!");}this._needToSortChildren=!0;child.InheritParentState=inheritParentState;child._parent=this;(index===-1||index>=this._children.Count)&&(index=this._children.Count);child._indexInParent=index;this._children.insert(index,child);for(var i=index+1|0;i<this._children.Count;i=i+1|0)this._children.getItem(i)._indexInParent=this._children.getItem(i)._indexInParent+1|0;return child._parentLastDestRectVersion=this._destRectVersion-1>>>0,child.MarkAsDirty(),this.MarkAsDirty(),child},BringToFront:function(){var parent=this._parent;parent.RemoveChild(this);parent.AddChild(this,this.InheritParentState)},SendToBack:function(){var parent=this._parent;parent.RemoveChild(this);parent.AddChild(this,this.InheritParentState,0)},RemoveChild:function(child){var $t,index,itrChild;if(!Bridge.referenceEquals(child._parent,this)){if(FaceUI.UserInterface.Active.SilentSoftErrors)return;throw new FaceUI.Exceptions.InvalidStateException.$ctor1("Child element to remove does not belong to this entity!");}this._needToSortChildren=!0;child._parent=null;child._indexInParent=-1;this._children.remove(child);index=0;$t=Bridge.getEnumerator(this._children);try{while($t.moveNext())itrChild=$t.Current,itrChild._indexInParent=Bridge.identity(index,index=index+1|0)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}child.MarkAsDirty();this.MarkAsDirty()},ClearChildren:function(){var $t,child;$t=Bridge.getEnumerator(this._children);try{while($t.moveNext())child=$t.Current,child._parent=null,child._indexInParent=-1,child.MarkAsDirty()}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}this._children.clear();this._needToSortChildren=!0;this.MarkAsDirty()},CalcInternalRect:function(){var padding=this._scaledPadding.$clone();return this._destRectInternal=this.GetActualDestRect(),this._destRectInternal.X=this._destRectInternal.X+Bridge.Int.clip32(padding.X)|0,this._destRectInternal.Y=this._destRectInternal.Y+Bridge.Int.clip32(padding.Y)|0,this._destRectInternal.Width=this._destRectInternal.Width-Bridge.Int.mul(Bridge.Int.clip32(padding.X),2)|0,this._destRectInternal.Height=this._destRectInternal.Height-Bridge.Int.mul(Bridge.Int.clip32(padding.Y),2)|0,this._destRectInternal.$clone()},AttachAnimator:function(animator){return animator.SetTargetEntity(this),this._animators.add(animator),animator},RemoveAnimator:function(animator){this._animators.remove(animator)&&animator.SetTargetEntity(null)},CalcActualSizeInPixels:function(size){if(size.X>1&&size.Y>1)return size.ToPoint();var parentDest=FaceUI.UserInterface.Active.Root._destRect.$clone();return this._parent!=null&&(this._parent.UpdateDestinationRectsIfDirty(),parentDest=this._parent._destRectInternal.$clone()),new Microsoft.Xna.Framework.Point.$ctor2(size.X===0?parentDest.Width:size.X>0&&size.X<1?Bridge.Int.clip32(parentDest.Width*size.X):Bridge.Int.clip32(size.X),size.Y===0?parentDest.Height:size.Y>0&&size.Y<1?Bridge.Int.clip32(parentDest.Height*size.Y):Bridge.Int.clip32(size.Y))},CalcDestRect:function(){var ret=new Microsoft.Xna.Framework.Rectangle.ctor,parent=this._parent,originSize,defaultSize,minInPixels,maxInPixels,prevEntity;parent==null&&(parent=FaceUI.UserInterface.Active.Root);originSize=this._size.$clone();(this._size.X===-1||this._size.Y===-1)&&(defaultSize=this.EntityDefaultSize.$clone(),this._size.X===-1&&(this._size.X=defaultSize.X),this._size.Y===-1&&(this._size.Y=defaultSize.Y));parent.UpdateDestinationRectsIfDirty();var parentDest=parent._destRectInternal.$clone(),size=this._scaledSize.$clone(),sizeInPixels=this.CalcActualSizeInPixels(size.$clone());this._size=originSize.$clone();System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",this.MinSize),null)&&(minInPixels=this.CalcActualSizeInPixels(System.Nullable.getValue(this.MinSize).$clone()),sizeInPixels.X=Math.max(minInPixels.X,sizeInPixels.X),sizeInPixels.Y=Math.max(minInPixels.Y,sizeInPixels.Y));System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",this.MaxSize),null)&&(maxInPixels=this.CalcActualSizeInPixels(System.Nullable.getValue(this.MaxSize).$clone()),sizeInPixels.X=Math.min(maxInPixels.X,sizeInPixels.X),sizeInPixels.Y=Math.min(maxInPixels.Y,sizeInPixels.Y));ret.Width=sizeInPixels.X;ret.Height=sizeInPixels.Y;ret.Width<1&&(ret.Width=1);ret.Height<1&&(ret.Height=1);var parent_left=parentDest.X,parent_top=parentDest.Y,parent_right=parent_left+parentDest.Width|0,parent_bottom=parent_top+parentDest.Height|0,parent_center_x=parent_left+(Bridge.Int.div(parentDest.Width,2)|0)|0,parent_center_y=parent_top+(Bridge.Int.div(parentDest.Height,2)|0)|0,anchor=this._anchor,offset=this._scaledOffset.$clone();this._draggable&&!this._needToSetDragOffset&&(anchor=FaceUI.Entities.Anchor.TopLeft,offset=this._dragOffset.$clone());switch(anchor){case FaceUI.Entities.Anchor.Auto:case FaceUI.Entities.Anchor.AutoInline:case FaceUI.Entities.Anchor.AutoInlineNoBreak:case FaceUI.Entities.Anchor.TopLeft:ret.X=parent_left+Bridge.Int.clip32(offset.X)|0;ret.Y=parent_top+Bridge.Int.clip32(offset.Y)|0;break;case FaceUI.Entities.Anchor.TopRight:ret.X=(parent_right-ret.Width|0)-Bridge.Int.clip32(offset.X)|0;ret.Y=parent_top+Bridge.Int.clip32(offset.Y)|0;break;case FaceUI.Entities.Anchor.TopCenter:case FaceUI.Entities.Anchor.AutoCenter:ret.X=(parent_center_x-(Bridge.Int.div(ret.Width,2)|0)|0)+Bridge.Int.clip32(offset.X)|0;ret.Y=parent_top+Bridge.Int.clip32(offset.Y)|0;break;case FaceUI.Entities.Anchor.BottomLeft:ret.X=parent_left+Bridge.Int.clip32(offset.X)|0;ret.Y=(parent_bottom-ret.Height|0)-Bridge.Int.clip32(offset.Y)|0;break;case FaceUI.Entities.Anchor.BottomRight:ret.X=(parent_right-ret.Width|0)-Bridge.Int.clip32(offset.X)|0;ret.Y=(parent_bottom-ret.Height|0)-Bridge.Int.clip32(offset.Y)|0;break;case FaceUI.Entities.Anchor.BottomCenter:ret.X=(parent_center_x-(Bridge.Int.div(ret.Width,2)|0)|0)+Bridge.Int.clip32(offset.X)|0;ret.Y=(parent_bottom-ret.Height|0)-Bridge.Int.clip32(offset.Y)|0;break;case FaceUI.Entities.Anchor.CenterLeft:ret.X=parent_left+Bridge.Int.clip32(offset.X)|0;ret.Y=(parent_center_y-(Bridge.Int.div(ret.Height,2)|0)|0)+Bridge.Int.clip32(offset.Y)|0;break;case FaceUI.Entities.Anchor.CenterRight:ret.X=(parent_right-ret.Width|0)-Bridge.Int.clip32(offset.X)|0;ret.Y=(parent_center_y-(Bridge.Int.div(ret.Height,2)|0)|0)+Bridge.Int.clip32(offset.Y)|0;break;case FaceUI.Entities.Anchor.Center:ret.X=(parent_center_x-(Bridge.Int.div(ret.Width,2)|0)|0)+Bridge.Int.clip32(offset.X)|0;ret.Y=(parent_center_y-(Bridge.Int.div(ret.Height,2)|0)|0)+Bridge.Int.clip32(offset.Y)|0;break}return(anchor===FaceUI.Entities.Anchor.Auto||anchor===FaceUI.Entities.Anchor.AutoInline||anchor===FaceUI.Entities.Anchor.AutoCenter||anchor===FaceUI.Entities.Anchor.AutoInlineNoBreak)&&(prevEntity=this.GetPreviousEntity(!0),prevEntity!=null?(prevEntity.UpdateDestinationRectsIfDirty(),(anchor===FaceUI.Entities.Anchor.AutoInline||anchor===FaceUI.Entities.Anchor.AutoInlineNoBreak)&&(ret.X=prevEntity._destRect.Right+Bridge.Int.clip32(offset.X+prevEntity._scaledSpaceAfter.X+this._scaledSpaceBefore.X)|0,ret.Y=prevEntity._destRect.Y),(anchor===FaceUI.Entities.Anchor.AutoInline&&ret.Right>parent._destRectInternal.Right||anchor===FaceUI.Entities.Anchor.Auto||anchor===FaceUI.Entities.Anchor.AutoCenter)&&(anchor!==FaceUI.Entities.Anchor.AutoCenter&&(ret.X=parent_left+Bridge.Int.clip32(offset.X)|0),ret.Y=prevEntity.GetDestRectForAutoAnchors().Bottom+Bridge.Int.clip32(offset.Y+prevEntity._scaledSpaceAfter.Y+this._scaledSpaceBefore.Y)|0)):(ret.X=ret.X+Bridge.Int.clip32(this._scaledSpaceBefore.X)|0,ret.Y=ret.Y+Bridge.Int.clip32(this._scaledSpaceBefore.Y)|0)),this._draggable&&(this._needToSetDragOffset&&(this._dragOffset.X=ret.X-parent_left|0,this._dragOffset.Y=ret.Y-parent_top|0,this._needToSetDragOffset=!1),this.LimitDraggingToParentBoundaries&&(ret.X<parent_left&&(ret.X=parent_left,this._dragOffset.X=0),ret.Y<parent_top&&(ret.Y=parent_top,this._dragOffset.Y=0),ret.Right>parent_right&&(this._dragOffset.X-=ret.Right-parent_right|0,ret.X=ret.X-(ret.Right-parent_right|0)|0),ret.Bottom>parent_bottom&&(this._dragOffset.Y-=ret.Bottom-parent_bottom|0,ret.Y=ret.Y-(ret.Bottom-parent_bottom|0)|0))),this._destRect=ret.$clone(),ret.$clone()},GetActualDestRect:function(){return this._destRect.$clone()},GetDestRectForAutoAnchors:function(){return this.GetActualDestRect()},RemoveFromParent:function(){this._parent!=null&&this._parent.RemoveChild(this)},PropagateEventsTo:function(other){this.OnMouseDown=Bridge.fn.combine(this.OnMouseDown,function(entity){Bridge.staticEquals(other.OnMouseDown,null)?null:other.OnMouseDown(other)});this.OnRightMouseDown=Bridge.fn.combine(this.OnRightMouseDown,function(entity){Bridge.staticEquals(other.OnRightMouseDown,null)?null:other.OnRightMouseDown(other)});this.OnMouseReleased=Bridge.fn.combine(this.OnMouseReleased,function(entity){Bridge.staticEquals(other.OnMouseReleased,null)?null:other.OnMouseReleased(other)});this.WhileMouseDown=Bridge.fn.combine(this.WhileMouseDown,function(entity){Bridge.staticEquals(other.WhileMouseDown,null)?null:other.WhileMouseDown(other)});this.WhileRightMouseDown=Bridge.fn.combine(this.WhileRightMouseDown,function(entity){Bridge.staticEquals(other.WhileRightMouseDown,null)?null:other.WhileRightMouseDown(other)});this.WhileMouseHover=Bridge.fn.combine(this.WhileMouseHover,function(entity){Bridge.staticEquals(other.WhileMouseHover,null)?null:other.WhileMouseHover(other)});this.WhileMouseHoverOrDown=Bridge.fn.combine(this.WhileMouseHoverOrDown,function(entity){Bridge.staticEquals(other.WhileMouseHoverOrDown,null)?null:other.WhileMouseHoverOrDown(other)});this.OnRightClick=Bridge.fn.combine(this.OnRightClick,function(entity){Bridge.staticEquals(other.OnRightClick,null)?null:other.OnRightClick(other)});this.OnClick=Bridge.fn.combine(this.OnClick,function(entity){Bridge.staticEquals(other.OnClick,null)?null:other.OnClick(other)});this.OnValueChange=Bridge.fn.combine(this.OnValueChange,function(entity){Bridge.staticEquals(other.OnValueChange,null)?null:other.OnValueChange(other)});this.OnMouseEnter=Bridge.fn.combine(this.OnMouseEnter,function(entity){Bridge.staticEquals(other.OnMouseEnter,null)?null:other.OnMouseEnter(other)});this.OnMouseLeave=Bridge.fn.combine(this.OnMouseLeave,function(entity){Bridge.staticEquals(other.OnMouseLeave,null)?null:other.OnMouseLeave(other)});this.OnMouseWheelScroll=Bridge.fn.combine(this.OnMouseWheelScroll,function(entity){Bridge.staticEquals(other.OnMouseWheelScroll,null)?null:other.OnMouseWheelScroll(other)});this.OnStartDrag=Bridge.fn.combine(this.OnStartDrag,function(entity){Bridge.staticEquals(other.OnStartDrag,null)?null:other.OnStartDrag(other)});this.OnStopDrag=Bridge.fn.combine(this.OnStopDrag,function(entity){Bridge.staticEquals(other.OnStopDrag,null)?null:other.OnStopDrag(other)});this.WhileDragging=Bridge.fn.combine(this.WhileDragging,function(entity){Bridge.staticEquals(other.WhileDragging,null)?null:other.WhileDragging(other)});this.BeforeDraw=Bridge.fn.combine(this.BeforeDraw,function(entity){Bridge.staticEquals(other.BeforeDraw,null)?null:other.BeforeDraw(other)});this.AfterDraw=Bridge.fn.combine(this.AfterDraw,function(entity){Bridge.staticEquals(other.AfterDraw,null)?null:other.AfterDraw(other)});this.BeforeUpdate=Bridge.fn.combine(this.BeforeUpdate,function(entity){Bridge.staticEquals(other.BeforeUpdate,null)?null:other.BeforeUpdate(other)});this.AfterUpdate=Bridge.fn.combine(this.AfterUpdate,function(entity){Bridge.staticEquals(other.AfterUpdate,null)?null:other.AfterUpdate(other)})},GetRelativeOffset:function(){var dest=this.GetActualDestRect(),parentDest=this._parent.GetActualDestRect();return new Microsoft.Xna.Framework.Vector2.$ctor2(dest.X-parentDest.X|0,dest.Y-parentDest.Y|0)},GetPreviousEntity:function(skipInvisibles){var $t,siblings,prev,sibling;if(skipInvisibles===void 0&&(skipInvisibles=!1),this._parent==null)return null;siblings=this._parent._children;prev=null;$t=Bridge.getEnumerator(siblings);try{while($t.moveNext()){if(sibling=$t.Current,Bridge.referenceEquals(sibling,this))break;(!skipInvisibles||sibling.Visible)&&(prev=sibling)}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return prev},DoOnMouseDown:function(){Bridge.staticEquals(this.OnMouseDown,null)?null:this.OnMouseDown(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnMouseDown,null)?null:FaceUI.UserInterface.Active.OnMouseDown(this)},DoOnMouseReleased:function(){Bridge.staticEquals(this.OnMouseReleased,null)?null:this.OnMouseReleased(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnMouseReleased,null)?null:FaceUI.UserInterface.Active.OnMouseReleased(this)},DoOnClick:function(){Bridge.staticEquals(this.OnClick,null)?null:this.OnClick(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnClick,null)?null:FaceUI.UserInterface.Active.OnClick(this)},DoWhileMouseDown:function(){Bridge.staticEquals(this.WhileMouseDown,null)?null:this.WhileMouseDown(this);Bridge.staticEquals(FaceUI.UserInterface.Active.WhileMouseDown,null)?null:FaceUI.UserInterface.Active.WhileMouseDown(this)},DoWhileMouseHover:function(){Bridge.staticEquals(this.WhileMouseHover,null)?null:this.WhileMouseHover(this);Bridge.staticEquals(FaceUI.UserInterface.Active.WhileMouseHover,null)?null:FaceUI.UserInterface.Active.WhileMouseHover(this)},DoWhileMouseHoverOrDown:function(){Bridge.staticEquals(this.WhileMouseHoverOrDown,null)?null:this.WhileMouseHoverOrDown(this);Bridge.staticEquals(FaceUI.UserInterface.Active.WhileMouseHoverOrDown,null)?null:FaceUI.UserInterface.Active.WhileMouseHoverOrDown(this);this.MouseInput.FaceUI$IMouseInput$MouseButtonClick(FaceUI.MouseButton.Right)?(Bridge.staticEquals(this.OnRightClick,null)?null:this.OnRightClick(this),Bridge.staticEquals(FaceUI.UserInterface.Active.OnRightClick,null)?null:FaceUI.UserInterface.Active.OnRightClick(this)):this.MouseInput.FaceUI$IMouseInput$MouseButtonPressed(FaceUI.MouseButton.Right)?(Bridge.staticEquals(this.OnRightMouseDown,null)?null:this.OnRightMouseDown(this),Bridge.staticEquals(FaceUI.UserInterface.Active.OnRightMouseDown,null)?null:FaceUI.UserInterface.Active.OnRightMouseDown(this)):this.MouseInput.FaceUI$IMouseInput$MouseButtonDown(FaceUI.MouseButton.Right)&&(Bridge.staticEquals(this.WhileRightMouseDown,null)?null:this.WhileRightMouseDown(this),Bridge.staticEquals(FaceUI.UserInterface.Active.WhileRightMouseDown,null)?null:FaceUI.UserInterface.Active.WhileRightMouseDown(this))},DoOnValueChange:function(){Bridge.staticEquals(this.OnValueChange,null)?null:this.OnValueChange(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnValueChange,null)?null:FaceUI.UserInterface.Active.OnValueChange(this)},DoOnMouseEnter:function(){Bridge.staticEquals(this.OnMouseEnter,null)?null:this.OnMouseEnter(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnMouseEnter,null)?null:FaceUI.UserInterface.Active.OnMouseEnter(this)},DoOnMouseLeave:function(){Bridge.staticEquals(this.OnMouseLeave,null)?null:this.OnMouseLeave(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnMouseLeave,null)?null:FaceUI.UserInterface.Active.OnMouseLeave(this)},DoOnStartDrag:function(){Bridge.staticEquals(this.OnStartDrag,null)?null:this.OnStartDrag(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnStartDrag,null)?null:FaceUI.UserInterface.Active.OnStartDrag(this)},DoOnStopDrag:function(){Bridge.staticEquals(this.OnStopDrag,null)?null:this.OnStopDrag(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnStopDrag,null)?null:FaceUI.UserInterface.Active.OnStopDrag(this)},DoWhileDragging:function(){Bridge.staticEquals(this.WhileDragging,null)?null:this.WhileDragging(this);Bridge.staticEquals(FaceUI.UserInterface.Active.WhileDragging,null)?null:FaceUI.UserInterface.Active.WhileDragging(this)},DoOnMouseWheelScroll:function(){Bridge.staticEquals(this.OnMouseWheelScroll,null)?null:this.OnMouseWheelScroll(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnMouseWheelScroll,null)?null:FaceUI.UserInterface.Active.OnMouseWheelScroll(this)},DoAfterUpdate:function(){Bridge.staticEquals(this.AfterUpdate,null)?null:this.AfterUpdate(this);Bridge.staticEquals(FaceUI.UserInterface.Active.AfterUpdate,null)?null:FaceUI.UserInterface.Active.AfterUpdate(this)},DoOnVisibilityChange:function(){Bridge.staticEquals(this.OnVisiblityChange,null)?null:this.OnVisiblityChange(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnVisiblityChange,null)?null:FaceUI.UserInterface.Active.OnVisiblityChange(this)},DoBeforeUpdate:function(){Bridge.staticEquals(this.BeforeUpdate,null)?null:this.BeforeUpdate(this);Bridge.staticEquals(FaceUI.UserInterface.Active.BeforeUpdate,null)?null:FaceUI.UserInterface.Active.BeforeUpdate(this)},DoOnFocusChange:function(){Bridge.staticEquals(this.OnFocusChange,null)?null:this.OnFocusChange(this);Bridge.staticEquals(FaceUI.UserInterface.Active.OnFocusChange,null)?null:FaceUI.UserInterface.Active.OnFocusChange(this)},IsTouching:function(point){point=Microsoft.Xna.Framework.Vector2.op_Addition(point.$clone(),this._lastScrollVal.ToVector2());var rect=this.UseActualSizeForCollision?this.GetActualDestRect():this._destRect;return point.X>=(rect.Left-this.ExtraMargin.X|0)&&point.X<=(rect.Right+this.ExtraMargin.X|0)&&point.Y>=(rect.Top-this.ExtraMargin.Y|0)&&point.Y<=(rect.Bottom+this.ExtraMargin.Y|0)},IsNaturallyInteractable:function(){return!1},UpdateAnimators:function(recursive){var $t,$t1,animator,child;$t=Bridge.getEnumerator(this._animators);try{while($t.moveNext())animator=$t.Current,animator.Enabled&&animator.Update()}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}if(this._animators.RemoveAll($asm.$.FaceUI.Entities.Entity.f2),recursive){$t1=Bridge.getEnumerator(this._children);try{while($t1.moveNext())child=$t1.Current,child.UpdateAnimators(!0)}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}}},MarkAsDirty:function(){this._isDirty=!0},ClearDirtyFlag:function(updateChildren){updateChildren===void 0&&(updateChildren=!1);this._isDirty=!1;updateChildren&&(this._destRectVersion=this._destRectVersion+1>>>0)},UpdateChildren:function(targetEntity,dragTargetEntity,wasEventHandled,scrollVal){for(var childrenSorted=this.GetSortedChildren(),i=childrenSorted.Count-1|0;i>=0;i=i-1|0)childrenSorted.getItem(i).Update(targetEntity,dragTargetEntity,wasEventHandled,scrollVal.$clone())},Update:function(targetEntity,dragTargetEntity,wasEventHandled,scrollVal){var mousePos,i,prevState,prevMouseOver,parent;if(this._lastScrollVal=scrollVal.$clone(),this.UpdateAnimators(!1),this._isFirstUpdate&&(this.DoOnFirstUpdate(),this._isFirstUpdate=!1),this.InheritParentState){this._entityState=this._parent._entityState;this._isMouseOver=this._parent._isMouseOver;this.IsFocused=this._parent.IsFocused;this._isCurrentlyDisabled=this._parent._isCurrentlyDisabled;return}if(mousePos=this.GetMousePos(),scrollVal=Microsoft.Xna.Framework.Point.op_Addition(scrollVal.$clone(),this.OverflowScrollVal.$clone()),this._isCurrentlyDisabled=this.IsDisabled(),this._isCurrentlyDisabled||this.IsLocked()||!this.IsVisible()){if(this.Locked)for(i=this._children.Count-1|0;i>=0;i=i-1|0)this._children.getItem(i).DoEventsIfDirectParentIsLocked&&this._children.getItem(i).Update(targetEntity,dragTargetEntity,wasEventHandled,scrollVal.$clone());this._isInteractable&&(this._entityState===FaceUI.Entities.EntityState.MouseHover?this.DoOnMouseLeave():this._entityState===FaceUI.Entities.EntityState.MouseDown&&(this.DoOnMouseReleased(),this.DoOnMouseLeave()));this._isInteractable=!1;this._entityState=FaceUI.Entities.EntityState.Default;return}if(this.ClickThrough){this.UpdateChildren(targetEntity,dragTargetEntity,wasEventHandled,scrollVal.$clone());return}this.UpdateDestinationRectsIfDirty();this._isInteractable=!0;this.DoBeforeUpdate();prevState=this._entityState;prevMouseOver=this._isMouseOver;wasEventHandled.v?this.MouseInput.FaceUI$IMouseInput$MouseButtonClick(0)&&(this.IsFocused=!1):(this.InheritParentState||(this._isMouseOver=!1,this._entityState=FaceUI.Entities.EntityState.Default,this.IsTouching(mousePos.$clone())&&(targetEntity.v!=null&&Bridge.referenceEquals(targetEntity.v._parent,this._parent)||(targetEntity.v=this),this._isMouseOver=!0,this._entityState=(this.IsFocused||this.PromiscuousClicksMode||this.MouseInput.FaceUI$IMouseInput$MouseButtonPressed(0))&&this.MouseInput.FaceUI$IMouseInput$MouseButtonDown(0)?FaceUI.Entities.EntityState.MouseDown:FaceUI.Entities.EntityState.MouseHover)),this.MouseInput.FaceUI$IMouseInput$MouseButtonPressed(0)&&(this.IsFocused=this._isMouseOver));this.UpdateChildren(targetEntity,dragTargetEntity,wasEventHandled,scrollVal.$clone());(this._draggable||this.IsNaturallyInteractable())&&dragTargetEntity.v==null&&this._isMouseOver&&this.MouseInput.FaceUI$IMouseInput$MouseButtonPressed(FaceUI.MouseButton.Left)&&(dragTargetEntity.v=this);Bridge.referenceEquals(targetEntity.v,this)?(wasEventHandled.v=!0,this.DoWhileMouseHoverOrDown(),this._isMouseOver&&!prevMouseOver&&this.DoOnMouseEnter(),prevState!==this._entityState&&(this.MouseInput.FaceUI$IMouseInput$MouseButtonPressed(0)&&this.DoOnMouseDown(),this.MouseInput.FaceUI$IMouseInput$MouseButtonReleased(0)&&this.DoOnMouseReleased(),this.MouseInput.FaceUI$IMouseInput$MouseButtonClick(0)&&this.DoOnClick()),this._entityState===FaceUI.Entities.EntityState.MouseDown?this.DoWhileMouseDown():this.DoWhileMouseHover()):this._entityState=FaceUI.Entities.EntityState.Default;!this._isMouseOver&&prevMouseOver&&this.DoOnMouseLeave();(Bridge.referenceEquals(targetEntity.v,this)||Bridge.referenceEquals(FaceUI.UserInterface.Active.ActiveEntity,this))&&this.MouseInput.FaceUI$IMouseInput$MouseWheelChange!==0&&this.DoOnMouseWheelScroll();this._draggable&&Bridge.referenceEquals(dragTargetEntity.v,this)&&this.IsFocused?(this._isBeingDragged||this.MouseInput.FaceUI$IMouseInput$MousePositionDiff.Length()===0||(parent=this._parent,this.RemoveFromParent(),parent.AddChild(this),this._isBeingDragged=!0,this.DoOnStartDrag()),this._isBeingDragged&&(this._dragOffset=Microsoft.Xna.Framework.Vector2.op_Addition(this._dragOffset.$clone(),this.MouseInput.FaceUI$IMouseInput$MousePositionDiff.$clone()),this.DoWhileDragging())):this._isBeingDragged&&(this._isBeingDragged=!1,this.DoOnStopDrag(),this.MarkAsDirty());this._isBeingDragged&&this.MarkAsDirty();this.DoAfterUpdate()}}});Bridge.ns("FaceUI.Entities.Entity",$asm.$);Bridge.apply($asm.$.FaceUI.Entities.Entity,{f1:function(x,y){return Bridge.compare(x.Priority,y.Priority)},f2:function(x){return x.IsDone&&x.ShouldRemoveWhenDone}});Bridge.define("FaceUI.Entities.ButtonSkin",{$kind:"enum",statics:{fields:{Default:0,Alternative:1,Fancy:2}}});Bridge.define("FaceUI.Entities.DrawPhase",{$kind:"enum",statics:{fields:{Base:0,Outline:1,Shadow:2}}});Bridge.define("FaceUI.Entities.EntityState",{$kind:"enum",statics:{fields:{Default:0,MouseHover:1,MouseDown:2}}});Bridge.define("FaceUI.Entities.FontStyle",{$kind:"enum",statics:{fields:{Regular:0,Bold:1,Italic:2}}});Bridge.define("FaceUI.Entities.IconType",{$kind:"enum",statics:{fields:{Sword:0,Shield:1,Armor:2,Ring:3,RingRuby:4,RingGold:5,RingGoldRuby:6,Heart:7,Apple:8,MagicWand:9,Book:10,Key:11,Scroll:12,Skull:13,Bone:14,RubyPink:15,RubyBlue:16,RubyGreen:17,RubyRed:18,RubyPurple:19,Diamond:20,Helmet:21,Shovel:22,Explanation:23,Sack:24,GoldCoins:25,MagicBook:26,Map:27,Feather:28,ShieldAndSword:29,Cubes:30,FloppyDisk:31,BloodySword:32,Axe:33,PotionRed:34,PotionYellow:35,PotionPurple:36,PotionBlue:37,PotionCyan:38,PotionGreen:39,Pistol:40,SilverShard:41,GoldShard:42,OrbRed:43,OrbBlue:44,OrbGreen:45,ZoomIn:46,ZoomOut:47,None:48}}});Bridge.define("FaceUI.Entities.ImageDrawMode",{$kind:"enum",statics:{fields:{Stretch:0,Panel:1}}});Bridge.define("FaceUI.Entities.PanelOverflowBehavior",{$kind:"enum",statics:{fields:{Overflow:0,Clipped:1,VerticalScroll:2}}});Bridge.define("FaceUI.Entities.PanelSkin",{$kind:"enum",statics:{fields:{None:-1,Default:0,Fancy:1,Simple:2,Golden:3,ListBackground:4}}});Bridge.define("FaceUI.Entities.ParagraphData",{$kind:"struct",statics:{methods:{getDefaultValue:function(){return new FaceUI.Entities.ParagraphData}}},fields:{list:null,relativeIndex:0},ctors:{$ctor1:function(_list,_relativeIndex){this.$initialize();this.list=_list;this.relativeIndex=_relativeIndex},ctor:function(){this.$initialize()}},methods:{getHashCode:function(){return Bridge.addHash([5472852096,this.list,this.relativeIndex])},equals:function(o){return Bridge.is(o,FaceUI.Entities.ParagraphData)?Bridge.equals(this.list,o.list)&&Bridge.equals(this.relativeIndex,o.relativeIndex):!1},$clone:function(to){var s=to||new FaceUI.Entities.ParagraphData;return s.list=this.list,s.relativeIndex=this.relativeIndex,s}}});Bridge.define("FaceUI.Entities.RichParagraphStyleInstruction",{$kind:"struct",statics:{fields:{_instructions:null,_styleInstructionsRegex:null,_styleInstructionsOpening:null,_styleInstructionsClosing:null},ctors:{init:function(){this._instructions=new(System.Collections.Generic.Dictionary$2(System.String,FaceUI.Entities.RichParagraphStyleInstruction))},ctor:function(){FaceUI.Entities.RichParagraphStyleInstruction.SetStyleInstructionsDenotes("{{","}}");FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("DEFAULT",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(void 0,void 0,void 0,void 0,!0));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("RED",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Red,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("BLUE",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Blue,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("GREEN",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Green,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("YELLOW",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Yellow,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("BROWN",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Brown,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("BLACK",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Black,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("WHITE",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.White,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("CYAN",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Cyan,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("PINK",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Pink,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("GRAY",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Gray,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("MAGENTA",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Magenta,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("ORANGE",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Orange,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("PURPLE",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Purple,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("SILVER",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Silver,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("GOLD",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Gold,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("TEAL",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Teal,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("NAVY",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.Navy,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("L_RED",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.PaleVioletRed,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("L_BLUE",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.AliceBlue,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("L_GREEN",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.LawnGreen,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("L_YELLOW",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.LightYellow,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("L_BROWN",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.RosyBrown,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("L_CYAN",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.LightCyan,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("L_PINK",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.LightPink,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("L_GRAY",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.LightGray,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("L_GOLD",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.LightGoldenrodYellow,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("D_RED",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.DarkRed,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("D_BLUE",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.DarkBlue,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("D_GREEN",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.ForestGreen,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("D_YELLOW",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.GreenYellow,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("D_BROWN",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.SaddleBrown,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("D_CYAN",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.DarkCyan,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("D_PINK",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.DeepPink,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("D_GRAY",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.DarkGray,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("D_GOLD",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(Microsoft.Xna.Framework.Color.DarkGoldenrod,void 0,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("BOLD",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(void 0,FaceUI.Entities.FontStyle.Bold,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("REGULAR",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(void 0,FaceUI.Entities.FontStyle.Regular,void 0,void 0,!1));FaceUI.Entities.RichParagraphStyleInstruction.AddInstruction("ITALIC",new FaceUI.Entities.RichParagraphStyleInstruction.$ctor1(void 0,FaceUI.Entities.FontStyle.Italic,void 0,void 0,!1))}},methods:{AddInstruction:function(key,instruction){FaceUI.Entities.RichParagraphStyleInstruction._instructions.set(key,instruction.$clone())},SetStyleInstructionsDenotes:function(opening,closing){FaceUI.Entities.RichParagraphStyleInstruction._styleInstructionsRegex=new System.Text.RegularExpressions.Regex.ctor((opening||"")+"[^{}]*"+(closing||""));FaceUI.Entities.RichParagraphStyleInstruction._styleInstructionsOpening=opening;FaceUI.Entities.RichParagraphStyleInstruction._styleInstructionsClosing=closing},getDefaultValue:function(){return new FaceUI.Entities.RichParagraphStyleInstruction}}},props:{FillColor:null,FontStyle:null,OutlineWidth:null,OutlineColor:null,ResetStyles:!1},ctors:{$ctor1:function(fillColor,fontStyle,outlineWidth,outlineColor,resetStyles){fillColor===void 0&&(fillColor=null);fontStyle===void 0&&(fontStyle=null);outlineWidth===void 0&&(outlineWidth=null);outlineColor===void 0&&(outlineColor=null);resetStyles===void 0&&(resetStyles=!1);this.$initialize();this.ResetStyles=resetStyles;this.FillColor=System.Nullable.lift1("$clone",fillColor);this.FontStyle=fontStyle;this.OutlineWidth=outlineWidth;this.OutlineColor=System.Nullable.lift1("$clone",outlineColor)},ctor:function(){this.$initialize()}},methods:{getHashCode:function(){return Bridge.addHash([12999253793,this.FillColor,this.FontStyle,this.OutlineWidth,this.OutlineColor,this.ResetStyles])},equals:function(o){return Bridge.is(o,FaceUI.Entities.RichParagraphStyleInstruction)?Bridge.equals(this.FillColor,o.FillColor)&&Bridge.equals(this.FontStyle,o.FontStyle)&&Bridge.equals(this.OutlineWidth,o.OutlineWidth)&&Bridge.equals(this.OutlineColor,o.OutlineColor)&&Bridge.equals(this.ResetStyles,o.ResetStyles):!1},$clone:function(to){var s=to||new FaceUI.Entities.RichParagraphStyleInstruction;return s.FillColor=System.Nullable.lift1("$clone",this.FillColor),s.FontStyle=this.FontStyle,s.OutlineWidth=this.OutlineWidth,s.OutlineColor=System.Nullable.lift1("$clone",this.OutlineColor),s.ResetStyles=this.ResetStyles,s}}});Bridge.define("FaceUI.Entities.SliderSkin",{$kind:"enum",statics:{fields:{Default:0,Fancy:1}}});Bridge.define("FaceUI.Entities.StylePropertyIds",{statics:{fields:{SpaceAfter:null,SpaceBefore:null,FillColor:null,Scale:null,Padding:null,ShadowColor:null,ShadowScale:null,ShadowOffset:null,OutlineColor:null,OutlineWidth:null,DefaultSize:null},ctors:{init:function(){this.SpaceAfter="SpaceAfter";this.SpaceBefore="SpaceBefore";this.FillColor="FillColor";this.Scale="Scale";this.Padding="Padding";this.ShadowColor="ShadowColor";this.ShadowScale="ShadowScale";this.ShadowOffset="ShadowOffset";this.OutlineColor="OutlineColor";this.OutlineWidth="OutlineWidth";this.DefaultSize="DefaultSize"}}}});Bridge.define("FaceUI.Entities.TabData",{fields:{panel:null,button:null,name:null},ctors:{ctor:function(tabName,tabPanel,tabButton){this.$initialize();this.name=tabName;this.panel=tabPanel;this.button=tabButton}}});Bridge.define("FaceUI.Entities.TextValidators.ITextValidator",{methods:{ValidateText:function(text,oldText){return!0}}});Bridge.define("FaceUI.Exceptions.InvalidStateException",{inherits:[System.Exception],ctors:{ctor:function(){this.$initialize();System.Exception.ctor.call(this)},$ctor1:function(message){this.$initialize();System.Exception.ctor.call(this,message)},$ctor2:function(message,inner){this.$initialize();System.Exception.ctor.call(this,message,inner)}}});Bridge.define("FaceUI.Exceptions.InvalidValueException",{inherits:[System.Exception],ctors:{ctor:function(){this.$initialize();System.Exception.ctor.call(this)},$ctor1:function(message){this.$initialize();System.Exception.ctor.call(this,message)},$ctor2:function(message,inner){this.$initialize();System.Exception.ctor.call(this,message,inner)}}});Bridge.define("FaceUI.Exceptions.NotFoundException",{inherits:[System.Exception],ctors:{ctor:function(){this.$initialize();System.Exception.ctor.call(this)},$ctor1:function(message){this.$initialize();System.Exception.ctor.call(this,message)},$ctor2:function(message,inner){this.$initialize();System.Exception.ctor.call(this,message,inner)}}});Bridge.define("FaceUI.MouseButton",{$kind:"enum",statics:{fields:{Left:0,Right:1,Middle:2}}});Bridge.define("FaceUI.Resources",{statics:{fields:{charStringDict:null,WhiteTexture:null,Cursors:null,CursorsData:null,PanelTextures:null,PanelData:null,ButtonTextures:null,ButtonData:null,CheckBoxTextures:null,RadioTextures:null,ProgressBarTexture:null,ProgressBarData:null,ProgressBarFillTexture:null,HorizontalLineTexture:null,SliderTextures:null,SliderMarkTextures:null,SliderData:null,IconTextures:null,IconBackgroundTexture:null,VerticalScrollbarTexture:null,VerticalScrollbarMarkTexture:null,VerticalScrollbarData:null,ArrowDown:null,ArrowUp:null,Fonts:null,DisabledEffect:null,SilhouetteEffect:null,_content:null,_root:null},ctors:{init:function(){this.charStringDict=new(System.Collections.Generic.Dictionary$2(System.Char,System.String));this.Cursors=new(FaceUI.TexturesGetter$1(FaceUI.CursorType))("textures/cursor_");this.PanelTextures=new(FaceUI.TexturesGetter$1(FaceUI.Entities.PanelSkin))("textures/panel_");this.ButtonTextures=new(FaceUI.TexturesGetter$1(FaceUI.Entities.ButtonSkin))("textures/button_");this.CheckBoxTextures=new(FaceUI.TexturesGetter$1(FaceUI.Entities.EntityState))("textures/checkbox");this.RadioTextures=new(FaceUI.TexturesGetter$1(FaceUI.Entities.EntityState))("textures/radio");this.SliderTextures=new(FaceUI.TexturesGetter$1(FaceUI.Entities.SliderSkin))("textures/slider_");this.SliderMarkTextures=new(FaceUI.TexturesGetter$1(FaceUI.Entities.SliderSkin))("textures/slider_","_mark");this.IconTextures=new(FaceUI.TexturesGetter$1(FaceUI.Entities.IconType))("textures/icons/")}},methods:{LoadContent:function(content,theme){var $t,$t1,$t2,$t3,$t4,cursor,cursorName,skin,skinName,skin1,skinName1,style,skin2,skinName2;theme===void 0&&(theme="default");FaceUI.Resources.InitialiseCharStringDict();FaceUI.Resources._root="FaceUI/themes/"+(theme||"")+"/";FaceUI.Resources._content=content;FaceUI.Resources.HorizontalLineTexture=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,(FaceUI.Resources._root||"")+"textures/horizontal_line");FaceUI.Resources.WhiteTexture=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,(FaceUI.Resources._root||"")+"textures/white_texture");FaceUI.Resources.IconBackgroundTexture=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,(FaceUI.Resources._root||"")+"textures/icons/background");FaceUI.Resources.VerticalScrollbarTexture=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,(FaceUI.Resources._root||"")+"textures/scrollbar");FaceUI.Resources.VerticalScrollbarMarkTexture=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,(FaceUI.Resources._root||"")+"textures/scrollbar_mark");FaceUI.Resources.ArrowDown=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,(FaceUI.Resources._root||"")+"textures/arrow_down");FaceUI.Resources.ArrowUp=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,(FaceUI.Resources._root||"")+"textures/arrow_up");FaceUI.Resources.ProgressBarTexture=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,(FaceUI.Resources._root||"")+"textures/progressbar");FaceUI.Resources.ProgressBarFillTexture=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,(FaceUI.Resources._root||"")+"textures/progressbar_fill");FaceUI.Resources.CursorsData=System.Array.init(System.Enum.getValues(FaceUI.CursorType).length,null,FaceUI.DataTypes.CursorTextureData);$t=Bridge.getEnumerator(System.Enum.getValues(FaceUI.CursorType));try{while($t.moveNext())cursor=Bridge.cast($t.Current,FaceUI.CursorType),cursorName=System.Enum.getName(FaceUI.CursorType,Bridge.box(cursor,FaceUI.CursorType,System.Enum.toStringFn(FaceUI.CursorType))).toLowerCase(),FaceUI.Resources.CursorsData[System.Array.index(cursor,FaceUI.Resources.CursorsData)]=content.Load(FaceUI.DataTypes.CursorTextureData,(FaceUI.Resources._root||"")+"textures/cursor_"+(cursorName||"")+"_md")}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}FaceUI.Resources.PanelData=System.Array.init(System.Enum.getValues(FaceUI.Entities.PanelSkin).length,null,FaceUI.DataTypes.TextureData);$t1=Bridge.getEnumerator(System.Enum.getValues(FaceUI.Entities.PanelSkin));try{while($t1.moveNext())(skin=Bridge.cast($t1.Current,FaceUI.Entities.PanelSkin),skin!==FaceUI.Entities.PanelSkin.None)&&(skinName=System.Enum.toString(FaceUI.Entities.PanelSkin,skin).toLowerCase(),FaceUI.Resources.PanelData[System.Array.index(skin,FaceUI.Resources.PanelData)]=content.Load(FaceUI.DataTypes.TextureData,(FaceUI.Resources._root||"")+"textures/panel_"+(skinName||"")+"_md"))}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}FaceUI.Resources.VerticalScrollbarData=content.Load(FaceUI.DataTypes.TextureData,(FaceUI.Resources._root||"")+"textures/scrollbar_md");FaceUI.Resources.SliderData=System.Array.init(System.Enum.getValues(FaceUI.Entities.SliderSkin).length,null,FaceUI.DataTypes.TextureData);$t2=Bridge.getEnumerator(System.Enum.getValues(FaceUI.Entities.SliderSkin));try{while($t2.moveNext())skin1=Bridge.cast($t2.Current,FaceUI.Entities.SliderSkin),skinName1=System.Enum.toString(FaceUI.Entities.SliderSkin,skin1).toLowerCase(),FaceUI.Resources.SliderData[System.Array.index(skin1,FaceUI.Resources.SliderData)]=content.Load(FaceUI.DataTypes.TextureData,(FaceUI.Resources._root||"")+"textures/slider_"+(skinName1||"")+"_md")}finally{Bridge.is($t2,System.IDisposable)&&$t2.System$IDisposable$Dispose()}FaceUI.Resources.Fonts=System.Array.init(System.Enum.getValues(FaceUI.Entities.FontStyle).length,null,Microsoft.Xna.Framework.Graphics.SpriteFont);$t3=Bridge.getEnumerator(System.Enum.getValues(FaceUI.Entities.FontStyle));try{while($t3.moveNext())style=Bridge.cast($t3.Current,FaceUI.Entities.FontStyle),FaceUI.Resources.Fonts[System.Array.index(style,FaceUI.Resources.Fonts)]=content.Load(Microsoft.Xna.Framework.Graphics.SpriteFont,(FaceUI.Resources._root||"")+"fonts/"+(System.Enum.toString(FaceUI.Entities.FontStyle,style)||"")),FaceUI.Resources.Fonts[System.Array.index(style,FaceUI.Resources.Fonts)].LineSpacing=FaceUI.Resources.Fonts[System.Array.index(style,FaceUI.Resources.Fonts)].LineSpacing+2|0}finally{Bridge.is($t3,System.IDisposable)&&$t3.System$IDisposable$Dispose()}FaceUI.Resources.ButtonData=System.Array.init(System.Enum.getValues(FaceUI.Entities.ButtonSkin).length,null,FaceUI.DataTypes.TextureData);$t4=Bridge.getEnumerator(System.Enum.getValues(FaceUI.Entities.ButtonSkin));try{while($t4.moveNext())skin2=Bridge.cast($t4.Current,FaceUI.Entities.ButtonSkin),skinName2=System.Enum.toString(FaceUI.Entities.ButtonSkin,skin2).toLowerCase(),FaceUI.Resources.ButtonData[System.Array.index(skin2,FaceUI.Resources.ButtonData)]=content.Load(FaceUI.DataTypes.TextureData,(FaceUI.Resources._root||"")+"textures/button_"+(skinName2||"")+"_md")}finally{Bridge.is($t4,System.IDisposable)&&$t4.System$IDisposable$Dispose()}FaceUI.Resources.ProgressBarData=content.Load(FaceUI.DataTypes.TextureData,(FaceUI.Resources._root||"")+"textures/progressbar_md");FaceUI.Resources.DisabledEffect=content.Load(Microsoft.Xna.Framework.Graphics.Effect,(FaceUI.Resources._root||"")+"effects/disabled");FaceUI.Resources.SilhouetteEffect=content.Load(Microsoft.Xna.Framework.Graphics.Effect,(FaceUI.Resources._root||"")+"effects/silhouette");FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.Entity,"DefaultStyle"),"Entity",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.Paragraph,"DefaultStyle"),"Paragraph",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.Button,"DefaultStyle"),"Button",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.Button,"DefaultParagraphStyle"),"ButtonParagraph",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.CheckBox,"DefaultStyle"),"CheckBox",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.CheckBox,"DefaultParagraphStyle"),"CheckBoxParagraph",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.ColoredRectangle,"DefaultStyle"),"ColoredRectangle",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.DropDown,"DefaultStyle"),"DropDown",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.DropDown,"DefaultParagraphStyle"),"DropDownParagraph",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.DropDown,"DefaultSelectedParagraphStyle"),"DropDownSelectedParagraph",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.Header,"DefaultStyle"),"Header",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.HorizontalLine,"DefaultStyle"),"HorizontalLine",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.Icon,"DefaultStyle"),"Icon",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.Image,"DefaultStyle"),"Image",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.Label,"DefaultStyle"),"Label",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.Panel,"DefaultStyle"),"Panel",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.ProgressBar,"DefaultStyle"),"ProgressBar",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.ProgressBar,"DefaultFillStyle"),"ProgressBarFill",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.RadioButton,"DefaultStyle"),"RadioButton",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.RadioButton,"DefaultParagraphStyle"),"RadioButtonParagraph",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.SelectList,"DefaultStyle"),"SelectList",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.SelectList,"DefaultParagraphStyle"),"SelectListParagraph",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.Slider,"DefaultStyle"),"Slider",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.TextInput,"DefaultStyle"),"TextInput",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.TextInput,"DefaultParagraphStyle"),"TextInputParagraph",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.TextInput,"DefaultPlaceholderStyle"),"TextInputPlaceholder",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.VerticalScrollbar,"DefaultStyle"),"VerticalScrollbar",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.PanelTabs,"DefaultButtonStyle"),"PanelTabsButton",FaceUI.Resources._root,content);FaceUI.Resources.LoadDefaultStyles(Bridge.ref(FaceUI.Entities.PanelTabs,"DefaultButtonParagraphStyle"),"PanelTabsButtonParagraph",FaceUI.Resources._root,content)},InitialiseCharStringDict:function(){var asciiValues,i,c;for(FaceUI.Resources.charStringDict.clear(),asciiValues=System.Linq.Enumerable.range(1,127).ToArray(System.Int32),i=0;i<asciiValues.length;i=i+1|0)c=asciiValues[System.Array.index(i,asciiValues)]&65535,FaceUI.Resources.charStringDict.add(c,String.fromCharCode(c))},GetStringForChar:function(c){return FaceUI.Resources.charStringDict.containsKey(c)?FaceUI.Resources.charStringDict.get(c):String.fromCharCode(c)},LoadDefaultStyles:function(sheet,entityName,themeRoot,content){var $t,$t1,stylesheetBase=(themeRoot||"")+"styles/"+(entityName||""),styles=content.Load(FaceUI.DataTypes.DefaultStylesList,stylesheetBase),style;$t=Bridge.getEnumerator(styles.Styles);try{while($t.moveNext())style=$t.Current,FaceUI.Resources.FillDefaultStyles(sheet,($t1=style.State,$t1!=null?$t1:FaceUI.Entities.EntityState.Default),style)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}},FillDefaultStyles:function(sheet,state,styles){System.Nullable.liftne(Microsoft.Xna.Framework.Color.op_Inequality,System.Nullable.lift1("$clone",styles.FillColor),null)&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".FillColor",new FaceUI.DataTypes.StyleProperty.$ctor1(System.Nullable.getValue(styles.FillColor)));styles.FontStyle!=null&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".FontStyle",new FaceUI.DataTypes.StyleProperty.$ctor4(System.Nullable.getValue(styles.FontStyle)));styles.ForceAlignCenter!=null&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".ForceAlignCenter",new FaceUI.DataTypes.StyleProperty.$ctor3(System.Nullable.getValue(styles.ForceAlignCenter)));System.Nullable.liftne(Microsoft.Xna.Framework.Color.op_Inequality,System.Nullable.lift1("$clone",styles.OutlineColor),null)&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".OutlineColor",new FaceUI.DataTypes.StyleProperty.$ctor1(System.Nullable.getValue(styles.OutlineColor)));styles.OutlineWidth!=null&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".OutlineWidth",new FaceUI.DataTypes.StyleProperty.$ctor4(System.Nullable.getValue(styles.OutlineWidth)));styles.Scale!=null&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".Scale",new FaceUI.DataTypes.StyleProperty.$ctor5(System.Nullable.getValue(styles.Scale)));System.Nullable.liftne(Microsoft.Xna.Framework.Color.op_Inequality,System.Nullable.lift1("$clone",styles.SelectedHighlightColor),null)&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".SelectedHighlightColor",new FaceUI.DataTypes.StyleProperty.$ctor1(System.Nullable.getValue(styles.SelectedHighlightColor)));System.Nullable.liftne(Microsoft.Xna.Framework.Color.op_Inequality,System.Nullable.lift1("$clone",styles.ShadowColor),null)&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".ShadowColor",new FaceUI.DataTypes.StyleProperty.$ctor1(System.Nullable.getValue(styles.ShadowColor)));System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",styles.ShadowOffset),null)&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".ShadowOffset",new FaceUI.DataTypes.StyleProperty.$ctor2(System.Nullable.getValue(styles.ShadowOffset)));System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",styles.Padding),null)&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".Padding",new FaceUI.DataTypes.StyleProperty.$ctor2(System.Nullable.getValue(styles.Padding)));System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",styles.SpaceBefore),null)&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".SpaceBefore",new FaceUI.DataTypes.StyleProperty.$ctor2(System.Nullable.getValue(styles.SpaceBefore)));System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",styles.SpaceAfter),null)&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".SpaceAfter",new FaceUI.DataTypes.StyleProperty.$ctor2(System.Nullable.getValue(styles.SpaceAfter)));styles.ShadowScale!=null&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".ShadowScale",new FaceUI.DataTypes.StyleProperty.$ctor5(System.Nullable.getValue(styles.ShadowScale)));System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",styles.DefaultSize),null)&&sheet.v.set((System.Enum.toString(FaceUI.Entities.EntityState,state)||"")+".DefaultSize",new FaceUI.DataTypes.StyleProperty.$ctor2(System.Nullable.getValue(styles.DefaultSize)))}}}});Bridge.define("FaceUI.SpecialChars",{$kind:"enum",statics:{fields:{Null:0,Delete:127,Backspace:8,Space:32,ArrowLeft:1,ArrowRight:2,ArrowUp:3,ArrowDown:4}}});Bridge.define("FaceUI.TexturesGetter$1",function(TEnum){return{fields:{_loadedTextures:null,_basepath:null,_suffix:null,_usesStates:!1,_typesCount:0},ctors:{ctor:function(path,suffix,usesStates){suffix===void 0&&(suffix=null);usesStates===void 0&&(usesStates=!0);var $t;this.$initialize();this._basepath=path;this._suffix=($t=suffix,$t!=null?$t:"");this._usesStates=usesStates;this._typesCount=System.Enum.getValues(TEnum).length;this._loadedTextures=System.Array.init(usesStates?Bridge.Int.mul(this._typesCount,3):this._typesCount,null,Microsoft.Xna.Framework.Graphics.Texture2D)}},methods:{getItem:function(i){var indx=this.GetIndex(i),path;return this._loadedTextures[System.Array.index(indx,this._loadedTextures)]==null&&(path=(FaceUI.Resources._root||"")+(this._basepath||"")+(this.EnumToString(i)||"")+(this._suffix||""),this._loadedTextures[System.Array.index(indx,this._loadedTextures)]=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,path)),this._loadedTextures[System.Array.index(indx,this._loadedTextures)]},setItem:function(i,value){var indx=this.GetIndex(i);this._loadedTextures[System.Array.index(indx,this._loadedTextures)]=value},getItem$1:function(i,s){var indx=this.GetIndex(i,s),path;return this._loadedTextures[System.Array.index(indx,this._loadedTextures)]==null&&(path=(FaceUI.Resources._root||"")+(this._basepath||"")+(this.EnumToString(i)||"")+(this._suffix||"")+(this.StateEnumToString(s)||""),this._loadedTextures[System.Array.index(indx,this._loadedTextures)]=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,path)),this._loadedTextures[System.Array.index(indx,this._loadedTextures)]},setItem$1:function(i,s,value){var indx=this.GetIndex(i,s);this._loadedTextures[System.Array.index(indx,this._loadedTextures)]=value},GetIndex:function(i,s){return(s===void 0&&(s=null),s!=null)?System.Nullable.getValue(Bridge.cast(Bridge.unbox(i,System.Int32),System.Int32))+Bridge.Int.mul(this._typesCount,System.Nullable.getValue(s))|0:System.Nullable.getValue(Bridge.cast(Bridge.unbox(i,System.Int32),System.Int32))},EnumToString:function(e){return Bridge.referenceEquals(TEnum,FaceUI.Entities.EntityState)?this.StateEnumToString(System.Nullable.getValue(Bridge.cast(Bridge.unbox(e,FaceUI.Entities.EntityState),System.Int32))):Bridge.referenceEquals(TEnum,FaceUI.Entities.IconType)?System.Enum.getName(TEnum,e):System.Enum.getName(TEnum,e).toLowerCase()},StateEnumToString:function(e){switch(e){case FaceUI.Entities.EntityState.MouseDown:return"_down";case FaceUI.Entities.EntityState.MouseHover:return"_hover";case FaceUI.Entities.EntityState.Default:return""}return null}}}});Bridge.define("FaceUI.UserInterface",{inherits:[System.IDisposable],statics:{fields:{VERSION:null,Active:null,_content:null,DefaultParagraph:null,TimeToShowTooltipText:0},ctors:{init:function(){this.VERSION="3.4.0.1";this.DefaultParagraph=$asm.$.FaceUI.UserInterface.f1;this.TimeToShowTooltipText=2}},methods:{Initialize$1:function(contentManager,theme){theme===void 0&&(theme="hd");FaceUI.UserInterface._content=contentManager;FaceUI.Resources.LoadContent(FaceUI.UserInterface._content,theme);FaceUI.UserInterface.Active=new FaceUI.UserInterface},Initialize:function(contentManager,theme){FaceUI.UserInterface.Initialize$1(contentManager,System.Enum.toString(FaceUI.BuiltinThemes,theme))},DefaultGenerateTooltipFunc:function(source){if(source.ToolTipText==null)return null;var tooltip=new FaceUI.Entities.Paragraph.$ctor2(source.ToolTipText,9,new Microsoft.Xna.Framework.Vector2.$ctor2(500,-1),void 0,void 0);return tooltip.BackgroundColor=Microsoft.Xna.Framework.Color.Black.$clone(),tooltip.BeforeDraw=Bridge.fn.combine(tooltip.BeforeDraw,function(ent){var destRect=tooltip.GetActualDestRect(),position=FaceUI.UserInterface.Active.GetTransformedCursorPos(new Microsoft.Xna.Framework.Vector2.$ctor2(Bridge.Int.div(-destRect.Width|0,2)|0,(-destRect.Height|0)-20|0)),screenBounds=FaceUI.UserInterface.Active.Root.GetActualDestRect();position.Y<screenBounds.Top&&(position.Y=screenBounds.Top);position.Y>(screenBounds.Bottom-destRect.Height|0)&&(position.Y=screenBounds.Bottom-destRect.Height|0);position.X<screenBounds.Left&&(position.X=screenBounds.Left);position.X>(screenBounds.Right-destRect.Width|0)&&(position.X=screenBounds.Right-destRect.Width|0);tooltip.SetAnchorAndOffset(FaceUI.Entities.Anchor.TopLeft,Microsoft.Xna.Framework.Vector2.op_Division$1(position.$clone(),FaceUI.UserInterface.Active.GlobalScale))}),tooltip.CalcTextActualRectWithWrap(),tooltip.BeforeDraw(tooltip),tooltip}}},fields:{MouseInputProvider:null,KeyboardInputProvider:null,_renderTarget:null,_useRenderTarget:!1,_isDeserializing:!1,SilentSoftErrors:!1,DebugDraw:!1,BlendState:null,SamplerState:null,_dragTarget:null,_scale:0,CursorScale:0,ScreenWidth:0,ScreenHeight:0,DrawUtils:null,ActiveEntity:null,OnMouseDown:null,OnRightMouseDown:null,OnMouseReleased:null,WhileMouseDown:null,WhileRightMouseDown:null,WhileMouseHover:null,WhileMouseHoverOrDown:null,OnClick:null,OnRightClick:null,OnValueChange:null,OnMouseEnter:null,OnMouseLeave:null,OnMouseWheelScroll:null,OnStartDrag:null,OnStopDrag:null,WhileDragging:null,BeforeUpdate:null,AfterUpdate:null,BeforeDraw:null,AfterDraw:null,OnVisiblityChange:null,OnEntitySpawn:null,OnFocusChange:null,_cursorTexture:null,_cursorWidth:0,_cursorOffset:null,_timeUntilTooltip:0,_tooltipEntity:null,_tooltipTargetEntity:null,_defaultSpriteBatchWrapper:null,_defaultGraphicDeviceWrapper:null,ShowCursor:!1,RenderTargetTransformMatrix:null,IncludeCursorInRenderTarget:!1,GenerateTooltipFunc:null},props:{CurrGameTime:null,UseRenderTarget:{get:function(){return this._useRenderTarget},set:function(value){this._useRenderTarget=value;this.DisposeRenderTarget()}},RenderTarget:{get:function(){return this._renderTarget}},Root:null,GlobalScale:{get:function(){return this._scale},set:function(value){this._scale=value;this.Root.MarkAsDirty()}},TargetEntity:null},alias:["Dispose","System$IDisposable$Dispose"],ctors:{init:function(){this._cursorOffset=new Microsoft.Xna.Framework.Point;this._useRenderTarget=!1;this._isDeserializing=!1;this.SilentSoftErrors=!1;this.DebugDraw=!1;this.BlendState=Microsoft.Xna.Framework.Graphics.BlendState.AlphaBlend;this.SamplerState=Microsoft.Xna.Framework.Graphics.SamplerState.PointClamp;this._scale=1;this.CursorScale=1;this.ScreenWidth=0;this.ScreenHeight=0;this._cursorWidth=32;this._cursorOffset=Microsoft.Xna.Framework.Point.Zero.$clone();this._timeUntilTooltip=0;this._defaultSpriteBatchWrapper=new FaceUI.Utils.DefaultSpriteBatchWrapper;this._defaultGraphicDeviceWrapper=new FaceUI.Utils.DefaultGraphicDeviceWrapper;this.ShowCursor=!0;this.IncludeCursorInRenderTarget=!0;this.GenerateTooltipFunc=FaceUI.UserInterface.DefaultGenerateTooltipFunc},ctor:function(){if(this.$initialize(),FaceUI.UserInterface._content==null)throw new FaceUI.Exceptions.InvalidStateException.$ctor1("Cannot create a UserInterface before calling UserInterface.Initialize()!");this.MouseInputProvider=new FaceUI.DefaultInputProvider;this.KeyboardInputProvider=new FaceUI.DefaultInputProvider;this.DrawUtils=new FaceUI.DrawUtils;this.Root=new FaceUI.Entities.RootPanel;this.SetCursor(FaceUI.CursorType.Default)}},methods:{Dispose:function(){this.DisposeRenderTarget()},SetCursor:function(type){var data=FaceUI.Resources.CursorsData[System.Array.index(type,FaceUI.Resources.CursorsData)];this.SetCursor$1(FaceUI.Resources.Cursors.getItem(type),data.DrawWidth,new Microsoft.Xna.Framework.Point.$ctor2(data.OffsetX,data.OffsetY))},SetCursor$1:function(texture,drawWidth,offset){var $t;drawWidth===void 0&&(drawWidth=32);offset===void 0&&(offset=null);this._cursorTexture=texture;this._cursorWidth=drawWidth;this._cursorOffset=($t=offset,$t!=null?$t:Microsoft.Xna.Framework.Point.Zero)},DrawCursor$1:function(spriteBatch){this._defaultSpriteBatchWrapper.Spritebatch=spriteBatch;this.DrawCursor(this._defaultSpriteBatchWrapper)},DrawCursor:function(spriteBatch){spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Begin(Microsoft.Xna.Framework.Graphics.SpriteSortMode.Deferred,this.BlendState,this.SamplerState,Microsoft.Xna.Framework.Graphics.DepthStencilState.None,Microsoft.Xna.Framework.Graphics.RasterizerState.CullCounterClockwise,void 0,void 0);var cursorSize=this.CursorScale*this.GlobalScale*(this._cursorWidth/this._cursorTexture.Width),cursorPos=this.MouseInputProvider.FaceUI$IMouseInput$MousePosition.$clone();spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(this._cursorTexture,new Microsoft.Xna.Framework.Rectangle.$ctor2(Bridge.Int.clip32(cursorPos.X+this._cursorOffset.X*cursorSize),Bridge.Int.clip32(cursorPos.Y+this._cursorOffset.Y*cursorSize),Bridge.Int.clip32(this._cursorTexture.Width*cursorSize),Bridge.Int.clip32(this._cursorTexture.Height*cursorSize)),Microsoft.Xna.Framework.Color.White.$clone());spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$End()},AddEntity:function(entity){return this.Root.AddChild(entity)},RemoveEntity:function(entity){this.Root.RemoveChild(entity)},Clear:function(){this.Root.ClearChildren()},Update:function(gameTime){this.CurrGameTime=gameTime;this.MouseInputProvider.FaceUI$IMouseInput$Update(gameTime);Bridge.referenceEquals(this.MouseInputProvider,this.KeyboardInputProvider)||this.KeyboardInputProvider.FaceUI$IKeyboardInput$Update(gameTime);this._dragTarget==null||this.MouseInputProvider.FaceUI$IMouseInput$MouseButtonDown(FaceUI.MouseButton.Left)||(this._dragTarget=null);var target={v:null},wasEventHandled={v:!1};this.Root.Update(target,Bridge.ref(this,"_dragTarget"),wasEventHandled,Microsoft.Xna.Framework.Point.Zero.$clone());this.MouseInputProvider.FaceUI$IMouseInput$MouseButtonDown(FaceUI.MouseButton.Left)&&(this.ActiveEntity=target.v);this.UpdateTooltipText(gameTime,target.v);this.ActiveEntity=this.ActiveEntity||this.Root;this.TargetEntity=target.v},UpdateTooltipText:function(gameTime,target){while(target!=null&&target._hiddenInternalEntity)target=target.Parent;Bridge.referenceEquals(this._tooltipTargetEntity,target)&&target!=null||(this._timeUntilTooltip=0,this._tooltipEntity!=null&&this._tooltipEntity.Parent!=null&&(this._tooltipEntity.RemoveFromParent(),this._tooltipEntity=null));this._tooltipTargetEntity=target;this._tooltipEntity==null&&(this._timeUntilTooltip+=gameTime.ElapsedGameTime.getTotalSeconds(),this._timeUntilTooltip>FaceUI.UserInterface.TimeToShowTooltipText&&(this._tooltipEntity=this.GenerateTooltipFunc(this._tooltipTargetEntity),this._tooltipEntity!=null&&(this._tooltipEntity.Locked=!0,this._tooltipEntity.ClickThrough=!0,this.AddEntity(this._tooltipEntity))))},DisposeRenderTarget:function(){this._renderTarget!=null&&(this._renderTarget.Dispose(),this._renderTarget=null)},Draw$1:function(spriteBatch){this._defaultSpriteBatchWrapper.Spritebatch=spriteBatch;this._defaultSpriteBatchWrapper.GraphicsDevice=this._defaultGraphicDeviceWrapper;this._defaultGraphicDeviceWrapper.GraphicDevice=spriteBatch.GraphicsDevice;this.Draw(this._defaultSpriteBatchWrapper)},Draw:function(spriteBatch){var newScreenWidth=spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.Viewport.Width,newScreenHeight=spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.Viewport.Height;(this.ScreenWidth!==newScreenWidth||this.ScreenHeight!==newScreenHeight)&&(this.ScreenWidth=newScreenWidth,this.ScreenHeight=newScreenHeight,this.Root.MarkAsDirty());this.UseRenderTarget&&(this._renderTarget==null||this._renderTarget.Width!==this.ScreenWidth||this._renderTarget.Height!==this.ScreenHeight?(this.DisposeRenderTarget(),this._renderTarget=new Microsoft.Xna.Framework.Graphics.RenderTarget2D.$ctor2(FaceUI.Utils.GraphicDeviceWrapper.op_Implicit(spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice),this.ScreenWidth,this.ScreenHeight,!1,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.PresentationParameters.BackBufferFormat,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.PresentationParameters.DepthStencilFormat,0,Microsoft.Xna.Framework.Graphics.RenderTargetUsage.PreserveContents)):(spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.SetRenderTarget(this._renderTarget),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.Clear(Microsoft.Xna.Framework.Color.Transparent.$clone())));this.Root.Draw(spriteBatch);this.ShowCursor&&(this.IncludeCursorInRenderTarget||!this.UseRenderTarget)&&this.DrawCursor(spriteBatch);this.UseRenderTarget&&spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.SetRenderTarget(null)},DrawMainRenderTarget$1:function(spriteBatch){this._defaultSpriteBatchWrapper.Spritebatch=spriteBatch;this.DrawMainRenderTarget(this._defaultSpriteBatchWrapper)},DrawMainRenderTarget:function(spriteBatch){this.RenderTarget==null||this.RenderTarget.IsDisposed||(spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Begin(Microsoft.Xna.Framework.Graphics.SpriteSortMode.Immediate,Microsoft.Xna.Framework.Graphics.BlendState.AlphaBlend,void 0,void 0,void 0,void 0,this.RenderTargetTransformMatrix),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(this.RenderTarget,new Microsoft.Xna.Framework.Rectangle.$ctor2(0,0,this.ScreenWidth,this.ScreenHeight),Microsoft.Xna.Framework.Color.White.$clone()),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$End());this.ShowCursor&&!this.IncludeCursorInRenderTarget&&this.DrawCursor(spriteBatch)},GetTransformedCursorPos:function(addVector){var $t,matrix;return(addVector=($t=addVector,$t!=null?$t:Microsoft.Xna.Framework.Vector2.Zero),this.UseRenderTarget&&System.Nullable.liftne(Microsoft.Xna.Framework.Matrix.op_Inequality,System.Nullable.lift1("$clone",this.RenderTargetTransformMatrix),null)&&!this.IncludeCursorInRenderTarget)?(matrix=Microsoft.Xna.Framework.Matrix.Invert(System.Nullable.getValue(this.RenderTargetTransformMatrix).$clone()),Microsoft.Xna.Framework.Vector2.op_Addition(this.MouseInputProvider.FaceUI$IMouseInput$TransformMousePosition(matrix.$clone()),Microsoft.Xna.Framework.Vector2.Transform(System.Nullable.getValue(addVector).$clone(),matrix.$clone()))):Microsoft.Xna.Framework.Vector2.op_Addition(this.MouseInputProvider.FaceUI$IMouseInput$MousePosition.$clone(),System.Nullable.getValue(addVector).$clone())}}});Bridge.ns("FaceUI.UserInterface",$asm.$);Bridge.apply($asm.$.FaceUI.UserInterface,{f1:function(text,anchor,color,scale,size,offset){return System.Nullable.liftne(Microsoft.Xna.Framework.Color.op_Inequality,System.Nullable.lift1("$clone",color),null)?new FaceUI.Entities.RichParagraph.$ctor1(text,anchor,System.Nullable.getValue(color).$clone(),scale,System.Nullable.lift1("$clone",size),System.Nullable.lift1("$clone",offset)):new FaceUI.Entities.RichParagraph.$ctor2(text,anchor,System.Nullable.lift1("$clone",size),System.Nullable.lift1("$clone",offset),scale)}});Bridge.define("FaceUI.Utils.GraphicDeviceWrapper",{statics:{methods:{op_Implicit:function(instance){return instance.GraphicsDevice}}}});Bridge.define("FaceUI.Utils.ISpriteBatchWrapper",{$kind:"interface"});Bridge.define("FaceUI.Utils.Forms.Form",{statics:{fields:{ExtraSpaceBetweenFields:0},ctors:{init:function(){this.ExtraSpaceBetweenFields=10}}},fields:{_fieldsData:null,_entities:null,FormPanel:null},ctors:{init:function(){this._fieldsData=new(System.Collections.Generic.Dictionary$2(System.String,FaceUI.Utils.Forms.FormFieldData));this._entities=new(System.Collections.Generic.Dictionary$2(System.String,FaceUI.Entities.Entity))},ctor:function(fields,parent){var $t,field,fieldEntity,needLabel,label;this.$initialize();this.FormPanel=new FaceUI.Entities.Panel.$ctor1(new Microsoft.Xna.Framework.Vector2.$ctor2(0,-1),FaceUI.Entities.PanelSkin.None,FaceUI.Entities.Anchor.Auto);this.FormPanel.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone();$t=Bridge.getEnumerator(fields,FaceUI.Utils.Forms.FormFieldData);try{while($t.moveNext())field={v:$t.Current},this._fieldsData.set(field.v.FieldId,field.v),fieldEntity={},needLabel={v:!0},fieldEntity.v=this.CreateEntityForField(field.v,needLabel),fieldEntity.v.Identifier="form-entity-"+(field.v.FieldId||""),fieldEntity.v.SpaceAfter=Microsoft.Xna.Framework.Vector2.op_Addition(fieldEntity.v.SpaceAfter.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,FaceUI.Utils.Forms.Form.ExtraSpaceBetweenFields)),needLabel.v&&(label=this.FormPanel.AddChild(new FaceUI.Entities.Label.$ctor1(field.v.FieldLabel)),label.Identifier="form-entity-label-"+(field.v.FieldId||"")),this.FormPanel.AddChild(fieldEntity.v),System.String.isNullOrEmpty(field.v.ToolTipText)||(fieldEntity.v.ToolTipText=field.v.ToolTipText),Bridge.staticEquals(field.v.OnFieldCreated,null)?null:field.v.OnFieldCreated(fieldEntity.v),this._entities.set(field.v.FieldId,fieldEntity.v)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}parent!=null&&parent.AddChild(this.FormPanel)}},methods:{CreateEntityForField:function(fieldData,needLabel){var $t,$t1,$t2,dropdown,choice,multiText,text,slider,selectlist,choice1,radiosPanel,choice2,radio,containerPanel;needLabel.v=!System.String.isNullOrEmpty(fieldData.FieldLabel);switch(fieldData.Type){case FaceUI.Utils.Forms.FormFieldType.Checkbox:return needLabel.v=!1,new FaceUI.Entities.CheckBox.$ctor1(fieldData.FieldLabel,9,void 0,void 0,fieldData.DefaultValue!=null&&System.Nullable.getValue(Bridge.cast(Bridge.unbox(fieldData.DefaultValue,System.Boolean),System.Boolean)));case FaceUI.Utils.Forms.FormFieldType.DropDown:dropdown=new FaceUI.Entities.DropDown.$ctor1(new Microsoft.Xna.Framework.Vector2.$ctor2(0,-1));$t=Bridge.getEnumerator(fieldData.Choices);try{while($t.moveNext())choice=$t.Current,dropdown.AddItem(choice)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return dropdown.SelectList.Items.length<10&&(dropdown.SelectList.AdjustHeightAutomatically=!0),Bridge.is(fieldData.DefaultValue,System.String)?dropdown.SelectedValue=Bridge.as(fieldData.DefaultValue,System.String):Bridge.is(fieldData.DefaultValue,System.Int32)&&(dropdown.SelectedIndex=System.Nullable.getValue(Bridge.cast(Bridge.unbox(fieldData.DefaultValue,System.Int32),System.Int32))),dropdown;case FaceUI.Utils.Forms.FormFieldType.MultilineTextInput:return multiText=new FaceUI.Entities.TextInput.$ctor1(!0),multiText.Value=Bridge.as(fieldData.DefaultValue,System.String),multiText;case FaceUI.Utils.Forms.FormFieldType.TextInput:return text=new FaceUI.Entities.TextInput.$ctor1(!1),fieldData.DefaultValue!=null&&(text.Value=Bridge.as(fieldData.DefaultValue,System.String)),text;case FaceUI.Utils.Forms.FormFieldType.Slider:return slider=new FaceUI.Entities.Slider.$ctor1(fieldData.Min>>>0,fieldData.Max>>>0),Bridge.is(fieldData.DefaultValue,System.Int32)&&(slider.Value=System.Nullable.getValue(Bridge.cast(Bridge.unbox(fieldData.DefaultValue,System.Int32),System.Int32))),slider;case FaceUI.Utils.Forms.FormFieldType.SelectList:selectlist=new FaceUI.Entities.SelectList.$ctor2(new Microsoft.Xna.Framework.Vector2.$ctor2(0,-1));$t1=Bridge.getEnumerator(fieldData.Choices);try{while($t1.moveNext())choice1=$t1.Current,selectlist.AddItem(choice1)}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}return selectlist.Items.length<10&&(selectlist.AdjustHeightAutomatically=!0),Bridge.is(fieldData.DefaultValue,System.String)?selectlist.SelectedValue=Bridge.as(fieldData.DefaultValue,System.String):Bridge.is(fieldData.DefaultValue,System.Int32)&&(selectlist.SelectedIndex=System.Nullable.getValue(Bridge.cast(Bridge.unbox(fieldData.DefaultValue,System.Int32),System.Int32))),selectlist;case FaceUI.Utils.Forms.FormFieldType.RadioButtons:radiosPanel=new FaceUI.Entities.Panel.$ctor1(new Microsoft.Xna.Framework.Vector2.$ctor2(0,-1),FaceUI.Entities.PanelSkin.None,FaceUI.Entities.Anchor.Auto);radiosPanel.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone();$t2=Bridge.getEnumerator(fieldData.Choices);try{while($t2.moveNext())choice2=$t2.Current,radio=new FaceUI.Entities.RadioButton.$ctor1(choice2,9,void 0,void 0,Bridge.referenceEquals(Bridge.as(fieldData.DefaultValue,System.String),choice2)),radiosPanel.AddChild(radio)}finally{Bridge.is($t2,System.IDisposable)&&$t2.System$IDisposable$Dispose()}return radiosPanel;case FaceUI.Utils.Forms.FormFieldType.Section:return containerPanel=new FaceUI.Entities.Panel.$ctor1(new Microsoft.Xna.Framework.Vector2.$ctor2(0,-1),FaceUI.Entities.PanelSkin.None,FaceUI.Entities.Anchor.Auto),containerPanel.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone(),needLabel.v&&containerPanel.AddChild(new FaceUI.Entities.Paragraph.$ctor2(fieldData.FieldLabel)),containerPanel.AddChild(new FaceUI.Entities.HorizontalLine.ctor),needLabel.v=!1,containerPanel;default:throw new FaceUI.Exceptions.InvalidStateException.$ctor1("Unknown field type!");}},Remove:function(){this.FormPanel.RemoveFromParent()},GetEntity:function(fieldId){return this._entities.get(fieldId)},GetValue:function(fieldId,defaultVal){var $t,child;defaultVal===void 0&&(defaultVal=null);var fieldData=this._fieldsData.get(fieldId),entity=this._entities.get(fieldId),ApplyDefaultVal=function(val){return defaultVal!=null&&(val==null||System.String.isNullOrEmpty(Bridge.toString(val)))?defaultVal:val};switch(fieldData.Type){case FaceUI.Utils.Forms.FormFieldType.Checkbox:return ApplyDefaultVal(Bridge.box(Bridge.cast(entity,FaceUI.Entities.CheckBox).Checked,System.Boolean,System.Boolean.toString));case FaceUI.Utils.Forms.FormFieldType.DropDown:return ApplyDefaultVal(Bridge.cast(entity,FaceUI.Entities.DropDown).SelectedValue);case FaceUI.Utils.Forms.FormFieldType.MultilineTextInput:return ApplyDefaultVal(Bridge.cast(entity,FaceUI.Entities.TextInput).Value);case FaceUI.Utils.Forms.FormFieldType.TextInput:return ApplyDefaultVal(Bridge.cast(entity,FaceUI.Entities.TextInput).Value);case FaceUI.Utils.Forms.FormFieldType.Slider:return ApplyDefaultVal(Bridge.box(Bridge.cast(entity,FaceUI.Entities.Slider).Value,System.Int32));case FaceUI.Utils.Forms.FormFieldType.SelectList:return ApplyDefaultVal(Bridge.cast(entity,FaceUI.Entities.SelectList).SelectedValue);case FaceUI.Utils.Forms.FormFieldType.RadioButtons:$t=Bridge.getEnumerator(Bridge.cast(entity,FaceUI.Entities.Panel).Children,FaceUI.Entities.Entity);try{while($t.moveNext())if(child=$t.Current,Bridge.is(child,FaceUI.Entities.RadioButton)&&Bridge.cast(child,FaceUI.Entities.RadioButton).Checked)return ApplyDefaultVal(Bridge.as(child,FaceUI.Entities.RadioButton).TextParagraph.Text)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return ApplyDefaultVal(null);case FaceUI.Utils.Forms.FormFieldType.Section:return ApplyDefaultVal(null);default:throw new FaceUI.Exceptions.InvalidStateException.$ctor1("Unknown field type!");}},GetValueString:function(fieldId,defaultVal){defaultVal===void 0&&(defaultVal=null);var ret=this.GetValue(fieldId,defaultVal);return Bridge.toString(ret).trim()},GetValueBool:function(fieldId,defaultVal){defaultVal===void 0&&(defaultVal=null);var ret=this.GetValue(fieldId,Bridge.box(defaultVal,System.Boolean,System.Nullable.toStringFn(System.Boolean.toString),System.Nullable.getHashCode));return System.Boolean.parse(Bridge.toString(ret))},GetValueInt:function(fieldId,defaultVal){defaultVal===void 0&&(defaultVal=null);var ret=this.GetValue(fieldId,Bridge.box(defaultVal,System.Int32,System.Nullable.toString,System.Nullable.getHashCode));return System.Int32.parse(Bridge.toString(ret))},GetValueFloat:function(fieldId,defaultVal){defaultVal===void 0&&(defaultVal=null);var ret=this.GetValue(fieldId,Bridge.box(defaultVal,System.Single,System.Nullable.toStringFn(System.Single.format),System.Nullable.getHashCodeFn(System.Single.getHashCode)));return System.Single.parse(Bridge.toString(ret))}}});Bridge.define("FaceUI.Utils.Forms.FormFieldData",{fields:{Type:0,FieldId:null,FieldLabel:null,DefaultValue:null,Choices:null,Min:0,Max:0,ToolTipText:null,OnFieldCreated:null},ctors:{ctor:function(type,id,label){label===void 0&&(label=null);this.$initialize();this.Type=type;this.FieldId=id;this.FieldLabel=label}}});Bridge.define("FaceUI.Utils.Forms.FormFieldType",{$kind:"enum",statics:{fields:{Checkbox:0,RadioButtons:1,TextInput:2,MultilineTextInput:3,SelectList:4,DropDown:5,Slider:6,Section:7}}});Bridge.define("FaceUI.Utils.MessageBox",{statics:{fields:{DefaultMsgBoxSize:null,DefaultOkButtonText:null,BackgroundFaderColor:null},props:{OpenedMsgBoxesCount:0,IsMsgBoxOpened:{get:function(){return FaceUI.Utils.MessageBox.OpenedMsgBoxesCount>0}}},ctors:{init:function(){this.DefaultMsgBoxSize=new Microsoft.Xna.Framework.Vector2;this.BackgroundFaderColor=new Microsoft.Xna.Framework.Color;this.DefaultMsgBoxSize=new Microsoft.Xna.Framework.Vector2.$ctor2(480,-1);this.DefaultOkButtonText="OK";this.BackgroundFaderColor=new Microsoft.Xna.Framework.Color.$ctor7(0,0,0,100);this.OpenedMsgBoxesCount=0}},methods:{BuildMessageBox:function(header,text,options,extraEntities,size,parent){var $t,$t1,$t2,ret,panel,fader,entity,buttonsPanel,btnSize,option,button;if(extraEntities===void 0&&(extraEntities=null),size===void 0&&(size=null),parent===void 0&&(parent=null),ret=new FaceUI.Utils.MessageBox.MessageBoxHandle,size=($t=size,$t!=null?$t:FaceUI.Utils.MessageBox.DefaultMsgBoxSize),panel=new FaceUI.Entities.Panel.$ctor1(System.Nullable.getValue(size).$clone()),ret.Panel=panel,System.String.isNullOrWhiteSpace(header)||(panel.AddChild(new FaceUI.Entities.Header.$ctor1(header)),panel.AddChild(new FaceUI.Entities.HorizontalLine.ctor)),System.String.isNullOrWhiteSpace(text)||panel.AddChild(new FaceUI.Entities.RichParagraph.$ctor2(text)),FaceUI.Utils.MessageBox.BackgroundFaderColor.A!==0&&(fader=new FaceUI.Entities.ColoredRectangle.$ctor4(Microsoft.Xna.Framework.Vector2.Zero.$clone(),FaceUI.Entities.Anchor.Center),fader.FillColor=new Microsoft.Xna.Framework.Color.$ctor7(0,0,0,100),fader.OutlineWidth=0,fader.ClickThrough=!1,ret.BackgroundFader=fader),extraEntities!=null){$t1=Bridge.getEnumerator(extraEntities);try{while($t1.moveNext())entity=$t1.Current,panel.AddChild(entity)}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}}buttonsPanel=new FaceUI.Entities.Panel.$ctor1(new Microsoft.Xna.Framework.Vector2.$ctor2(0,70),FaceUI.Entities.PanelSkin.None,System.Nullable.getValue(size).Y===-1?FaceUI.Entities.Anchor.Auto:FaceUI.Entities.Anchor.BottomCenter);buttonsPanel.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone();panel.AddChild(buttonsPanel);buttonsPanel.PriorityBonus=-10;btnSize=new Microsoft.Xna.Framework.Vector2.$ctor2(options.length===1?0:1/options.length,60);$t2=Bridge.getEnumerator(options);try{while($t2.moveNext())option={v:$t2.Current},button=new FaceUI.Entities.Button.$ctor1(option.v.Title,0,FaceUI.Entities.Anchor.AutoInline,btnSize,void 0),button.OnClick=Bridge.fn.combine(button.OnClick,function($me,option){return function(ent){(Bridge.staticEquals(option.v.Callback,null)||option.v.Callback())&&ret.Close()}}(this,option)),buttonsPanel.AddChild(button)}finally{Bridge.is($t2,System.IDisposable)&&$t2.System$IDisposable$Dispose()}return ret.Parent=parent,ret},BuildMessageBox$1:function(header,text,closeButtonTxt,size,extraEntities){var $t,$t1;return closeButtonTxt===void 0&&(closeButtonTxt=null),size===void 0&&(size=null),extraEntities===void 0&&(extraEntities=null),FaceUI.Utils.MessageBox.BuildMessageBox(header,text,System.Array.init([new FaceUI.Utils.MessageBox.MsgBoxOption(($t=closeButtonTxt,$t!=null?$t:FaceUI.Utils.MessageBox.DefaultOkButtonText),null)],FaceUI.Utils.MessageBox.MsgBoxOption),extraEntities,($t1=size,$t1!=null?$t1:FaceUI.Utils.MessageBox.DefaultMsgBoxSize),void 0)}}}});Bridge.define("FaceUI.Utils.MessageBox.MessageBoxHandle",{$kind:"nested class",fields:{Panel:null,BackgroundFader:null},props:{Parent:null,OnShow:null,OnDone:null},methods:{Close:function(){var $t;this.Panel.Parent!=null&&(this.Panel.RemoveFromParent(),this.BackgroundFader!=null?this.BackgroundFader.RemoveFromParent():null,FaceUI.Utils.MessageBox.OpenedMsgBoxesCount=FaceUI.Utils.MessageBox.OpenedMsgBoxesCount-1|0,Bridge.staticEquals($t=this.OnDone,null)?null:$t(this.Panel))},Show:function(){var $t;this.Panel.Parent==null&&(this.BackgroundFader!=null&&(FaceUI.UserInterface.Active.AddEntity(this.BackgroundFader),this.BackgroundFader.OnClick=Bridge.fn.bind(this,$asm.$.FaceUI.Utils.MessageBox.MessageBoxHandle.f1)),this.Parent!=null?this.Parent.AddChild(this.Panel):FaceUI.UserInterface.Active.AddEntity(this.Panel),FaceUI.Utils.MessageBox.OpenedMsgBoxesCount=FaceUI.Utils.MessageBox.OpenedMsgBoxesCount+1|0,Bridge.staticEquals($t=this.OnShow,null)?null:$t(this.Panel))}}});Bridge.ns("FaceUI.Utils.MessageBox.MessageBoxHandle",$asm.$);Bridge.apply($asm.$.FaceUI.Utils.MessageBox.MessageBoxHandle,{f1:function(b){this.Close()}});Bridge.define("FaceUI.Utils.MessageBox.MsgBoxOption",{$kind:"nested class",fields:{Title:null,Callback:null},ctors:{ctor:function(title,callback){this.$initialize();this.Title=title;this.Callback=callback}}});Bridge.define("FaceUI.Utils.PanelsGrid",{statics:{methods:{GenerateColums$1:function(amount,parent,columnSize,skin){var $t,retList,i,currPanel;for(columnSize===void 0&&(columnSize=null),skin===void 0&&(skin=-1),retList=new(System.Collections.Generic.List$1(FaceUI.Entities.Panel).ctor),columnSize=($t=columnSize,$t!=null?$t:new Microsoft.Xna.Framework.Vector2.$ctor2(1/amount,-1)),i=0;i<amount;i=i+1|0)currPanel=new FaceUI.Entities.Panel.$ctor1(System.Nullable.getValue(columnSize).$clone(),skin,FaceUI.Entities.Anchor.AutoInlineNoBreak),currPanel.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone(),retList.add(currPanel),parent!=null&&parent.AddChild(currPanel);return retList.ToArray()},GenerateColums:function(panelSizes,parent,skin){var $t,retList,currSize,currPanel;skin===void 0&&(skin=-1);retList=new(System.Collections.Generic.List$1(FaceUI.Entities.Panel).ctor);$t=Bridge.getEnumerator(panelSizes);try{while($t.moveNext())currSize=$t.Current.$clone(),currPanel=new FaceUI.Entities.Panel.$ctor1(currSize.$clone(),skin,FaceUI.Entities.Anchor.AutoInlineNoBreak),currPanel.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone(),retList.add(currPanel),parent!=null&&parent.AddChild(currPanel)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return retList.ToArray()}}}});Bridge.define("FaceUI.Utils.PresentationParametersWrapper",{props:{DepthStencilFormat:0,BackBufferFormat:0}});Bridge.define("FaceUI.Utils.SimpleFileMenu",{statics:{methods:{Create:function(layout,skin){var $t,$t1,rootPanel,menu,dropdown,item,i,callback;skin===void 0&&(skin=2);rootPanel=new FaceUI.Entities.Panel.$ctor1(new Microsoft.Xna.Framework.Vector2.$ctor2(0,FaceUI.Entities.DropDown.SelectedPanelHeight),skin,FaceUI.Entities.Anchor.TopLeft);rootPanel.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone();$t=Bridge.getEnumerator(layout.Layout);try{while($t.moveNext()){menu=$t.Current;dropdown=new FaceUI.Entities.DropDown.$ctor1(new Microsoft.Xna.Framework.Vector2.$ctor2(menu.Width,-1),FaceUI.Entities.Anchor.AutoInline,null,FaceUI.Entities.PanelSkin.None,skin,!1);rootPanel.AddChild(dropdown);$t1=Bridge.getEnumerator(menu.Items);try{while($t1.moveNext())item=$t1.Current,dropdown.AddItem(item)}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}for(dropdown.AutoSetListHeight=!0,dropdown.DefaultText=menu.Title,dropdown.Identifier="menu-"+(menu.Title||""),dropdown.DontKeepSelection=!0,i=0;i<menu.Items.Count;i=i+1|0)callback=menu.Actions.getItem(i),Bridge.staticEquals(callback,null)||dropdown.OnSelectedSpecificItem(menu.Items.getItem(i),callback)}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return rootPanel}}}});Bridge.define("FaceUI.Utils.SimpleFileMenu.MenuLayout",{$kind:"nested class",props:{Layout:null},ctors:{init:function(){this.Layout=new(System.Collections.Generic.List$1(FaceUI.Utils.SimpleFileMenu.MenuLayout.Menu).ctor)}},methods:{AddMenu:function(title,width){var $t,newMenu=($t=new FaceUI.Utils.SimpleFileMenu.MenuLayout.Menu,$t.Title=title,$t.Width=width,$t);this.Layout.add(newMenu)},AddItemToMenu:function(menuTitle,item,onClick){var $t,menu;$t=Bridge.getEnumerator(this.Layout);try{while($t.moveNext())if(menu=$t.Current,Bridge.referenceEquals(menu.Title,menuTitle)){menu.Items.add(item);menu.Actions.add(onClick);return}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}throw new FaceUI.Exceptions.NotFoundException.$ctor1("Menu with title '"+(menuTitle||"")+"' is not defined!");}}});Bridge.define("FaceUI.Utils.SimpleFileMenu.MenuLayout.Menu",{$kind:"nested class",fields:{Title:null,Width:0,Items:null,Actions:null},ctors:{init:function(){this.Items=new(System.Collections.Generic.List$1(System.String).ctor);this.Actions=new(System.Collections.Generic.List$1(Function).ctor)}}});Bridge.define("FaceUI.Animators.FadeOutAnimator",{inherits:[FaceUI.Animators.IAnimator],fields:{_timeLeft:0,SpeedFactor:0},props:{IsDone:{get:function(){return this._timeLeft<=0}}},ctors:{init:function(){this._timeLeft=1;this.SpeedFactor=1}},methods:{Update:function(){var dt=FaceUI.UserInterface.Active.CurrGameTime.ElapsedGameTime.getTotalSeconds(),newOpacity;this._timeLeft-=dt*this.SpeedFactor;newOpacity=Math.max(0,this._timeLeft);this.TargetEntity.Opacity=Bridge.Int.clipu8(newOpacity*255)},Reset:function(){this._timeLeft=1}}});Bridge.define("FaceUI.Animators.FloatUpDownAnimator",{inherits:[FaceUI.Animators.IAnimator],fields:{_maxDuration:null,_timeLeft:null,_step:0,SpeedFactor:0,FloatingDistance:0},props:{Duration:{get:function(){return this._maxDuration},set:function(value){this._maxDuration=this._timeLeft=value}},IsDone:{get:function(){return System.Nullable.hasValue(this._timeLeft)&&System.Nullable.getValue(this._timeLeft)<=0}}},ctors:{init:function(){this.SpeedFactor=2;this.FloatingDistance=5}},methods:{Update:function(){var dt=FaceUI.UserInterface.Active.CurrGameTime.ElapsedGameTime.getTotalSeconds(),currVal;this._step+=dt*this.SpeedFactor;currVal=Math.sin(this._step)*this.FloatingDistance;System.Nullable.hasValue(this._timeLeft)&&(this._timeLeft=System.Nullable.sub(this._timeLeft,dt),System.Nullable.getValue(this._timeLeft)<1&&(currVal*=System.Nullable.getValue(this._timeLeft)));this.TargetEntity.SpaceBefore=new Microsoft.Xna.Framework.Vector2.$ctor2(this.TargetEntity.SpaceBefore.X,currVal);this.TargetEntity.SpaceAfter=new Microsoft.Xna.Framework.Vector2.$ctor2(this.TargetEntity.SpaceAfter.X,-currVal)},Reset:function(){this._step=0;this._timeLeft=this._maxDuration}}});Bridge.define("FaceUI.Animators.TextWaveAnimator",{inherits:[FaceUI.Animators.IAnimator],fields:{_currPosition:0,SpeedFactor:0,WaveHeight:0,WaveLengthFactor:0,Loop:!1},props:{IsDone:{get:function(){return!this.Loop&&Bridge.Int.clip32(this._currPosition)>Bridge.as(this.TargetEntity,FaceUI.Entities.RichParagraph).Text.length}}},ctors:{init:function(){this._currPosition=0;this.SpeedFactor=10;this.WaveHeight=18;this.WaveLengthFactor=3.5;this.Loop=!0}},methods:{CheckEntityCompatibility:function(entity){return Bridge.is(entity,FaceUI.Entities.RichParagraph)},Update:function(){if(!this.IsDone){var paragraph=Bridge.as(this.TargetEntity,FaceUI.Entities.RichParagraph),dt=FaceUI.UserInterface.Active.CurrGameTime.ElapsedGameTime.getTotalSeconds();this._currPosition+=dt*this.SpeedFactor;this._currPosition>paragraph.Text.length+this.WaveLengthFactor*5&&this.Reset()}},OnAttached:function(){Bridge.as(this.TargetEntity,FaceUI.Entities.RichParagraph).PerCharacterManipulators=Bridge.fn.combine(Bridge.as(this.TargetEntity,FaceUI.Entities.RichParagraph).PerCharacterManipulators,Bridge.fn.cacheBind(this,this.PerCharacterManipulationFunc));this.Reset()},OnDetach:function(){Bridge.as(this.TargetEntity,FaceUI.Entities.RichParagraph).PerCharacterManipulators=Bridge.fn.remove(Bridge.as(this.TargetEntity,FaceUI.Entities.RichParagraph).PerCharacterManipulators,Bridge.fn.cacheBind(this,this.PerCharacterManipulationFunc))},Reset:function(){this._currPosition=-this.WaveLengthFactor*5},PerCharacterManipulationFunc:function(paragraph,currChar,index,fillColor,outlineColor,outlineWidth,offset,scale){var distance=Math.abs(index-this._currPosition);offset.v.Y=-this.WaveHeight/(1+distance*distance/this.WaveLengthFactor)}}});Bridge.define("FaceUI.Animators.TypeWriterAnimator",{inherits:[FaceUI.Animators.IAnimator],fields:{_text:null,_currPosition:0,_timeForNextChar:0,SpeedFactor:0},props:{TextToType:{get:function(){return this._text},set:function(value){this._text=value;this.Reset()}},IsDone:{get:function(){return this._currPosition>=this._text.length}}},ctors:{init:function(){this._timeForNextChar=1;this.SpeedFactor=10}},methods:{CheckEntityCompatibility:function(entity){return Bridge.is(entity,FaceUI.Entities.Paragraph)},Update:function(){var dt,openingDenote,closingDenote,closingPosition;this._text!=null&&(this.IsDone||(dt=FaceUI.UserInterface.Active.CurrGameTime.ElapsedGameTime.getTotalSeconds(),this._timeForNextChar-=dt*this.SpeedFactor,this._timeForNextChar<=0&&(this._timeForNextChar=1,this._currPosition=this._currPosition+1|0,Bridge.is(this.TargetEntity,FaceUI.Entities.RichParagraph)&&(openingDenote=FaceUI.Entities.RichParagraphStyleInstruction._styleInstructionsOpening,closingDenote=FaceUI.Entities.RichParagraphStyleInstruction._styleInstructionsClosing,(this._currPosition+openingDenote.length|0)<this._text.length&&Bridge.referenceEquals(this._text.substr(this._currPosition,openingDenote.length),openingDenote)&&(closingPosition=System.String.indexOf(this._text,closingDenote,this._currPosition),closingPosition!==-1&&(this._currPosition=closingPosition+closingDenote.length|0)))),Bridge.cast(this.TargetEntity,FaceUI.Entities.Paragraph).Text=this._text.substr(0,this._currPosition)))},Reset:function(){this._currPosition=0;this._timeForNextChar=1}}});Bridge.define("FaceUI.DefaultInputProvider",{inherits:[FaceUI.IMouseInput,FaceUI.IKeyboardInput],fields:{_newKeyboardState:null,_oldKeyboardState:null,_newMouseState:null,_oldMouseState:null,_newMousePos:null,_oldMousePos:null,_currTime:null,_allKeyValues:null,KeysTypeCooldown:0,_currCharacterInput:0,_currCharacterInputKey:0,_keyboardInputCooldown:0,_newKeyIsPressed:!1,_capslock:!1},props:{MouseWheel:0,MouseWheelChange:0,CurrGameTime:{get:function(){return this._currTime}},MousePosition:{get:function(){return this._newMousePos.$clone()}},MousePositionDiff:{get:function(){return Microsoft.Xna.Framework.Vector2.op_Subtraction(this._newMousePos.$clone(),this._oldMousePos.$clone())}}},alias:["MouseWheel","FaceUI$IMouseInput$MouseWheel","MouseWheelChange","FaceUI$IMouseInput$MouseWheelChange","Update","FaceUI$IKeyboardInput$Update","Update","FaceUI$IMouseInput$Update","UpdateMousePosition","FaceUI$IMouseInput$UpdateMousePosition","TransformMousePosition","FaceUI$IMouseInput$TransformMousePosition","GetTextInput","FaceUI$IKeyboardInput$GetTextInput","MousePosition","FaceUI$IMouseInput$MousePosition","MousePositionDiff","FaceUI$IMouseInput$MousePositionDiff","MouseButtonDown","FaceUI$IMouseInput$MouseButtonDown","AnyMouseButtonDown","FaceUI$IMouseInput$AnyMouseButtonDown","MouseButtonReleased","FaceUI$IMouseInput$MouseButtonReleased","AnyMouseButtonReleased","FaceUI$IMouseInput$AnyMouseButtonReleased","MouseButtonPressed","FaceUI$IMouseInput$MouseButtonPressed","AnyMouseButtonPressed","FaceUI$IMouseInput$AnyMouseButtonPressed","MouseButtonClick","FaceUI$IMouseInput$MouseButtonClick","AnyMouseButtonClicked","FaceUI$IMouseInput$AnyMouseButtonClicked"],ctors:{init:function(){this._newKeyboardState=new Microsoft.Xna.Framework.Input.KeyboardState;this._oldKeyboardState=new Microsoft.Xna.Framework.Input.KeyboardState;this._newMouseState=new Microsoft.Xna.Framework.Input.MouseState;this._oldMouseState=new Microsoft.Xna.Framework.Input.MouseState;this._newMousePos=new Microsoft.Xna.Framework.Vector2;this._oldMousePos=new Microsoft.Xna.Framework.Vector2;this.KeysTypeCooldown=.6;this._currCharacterInput=FaceUI.SpecialChars.Null;this._currCharacterInputKey=Microsoft.Xna.Framework.Input.Keys.Escape;this._keyboardInputCooldown=0;this._newKeyIsPressed=!1;this._capslock=!1},ctor:function(){this.$initialize();this._allKeyValues=Bridge.cast(System.Enum.getValues(Microsoft.Xna.Framework.Input.Keys),System.Array.type(Microsoft.Xna.Framework.Input.Keys));this._newKeyboardState=this._oldKeyboardState.$clone();this._newMouseState=this._oldMouseState.$clone();this._newMousePos=new Microsoft.Xna.Framework.Vector2.$ctor2(this._newMouseState.X,this._newMouseState.Y);this.Update(new Microsoft.Xna.Framework.GameTime.ctor)}},methods:{Update:function(gameTime){var $t,prevMouseWheel,key;this._currTime=gameTime;this._oldMouseState=this._newMouseState.$clone();this._oldKeyboardState=this._newKeyboardState.$clone();this._newMouseState=Microsoft.Xna.Framework.Input.Mouse.GetState();this._newKeyboardState=Microsoft.Xna.Framework.Input.Keyboard.GetState();this._oldMousePos=this._newMousePos.$clone();this._newMousePos=new Microsoft.Xna.Framework.Vector2.$ctor2(this._newMouseState.X,this._newMouseState.Y);prevMouseWheel=this.MouseWheel;this.MouseWheel=this._newMouseState.ScrollWheelValue;this.MouseWheelChange=Bridge.Int.sign(this.MouseWheel-prevMouseWheel);this._newKeyboardState.IsKeyDown(Microsoft.Xna.Framework.Input.Keys.CapsLock)&&!this._oldKeyboardState.IsKeyDown(Microsoft.Xna.Framework.Input.Keys.CapsLock)&&(this._capslock=!this._capslock);this._keyboardInputCooldown>0&&(this._newKeyIsPressed=!1,this._keyboardInputCooldown-=gameTime.ElapsedGameTime.getTotalSeconds());this._currCharacterInput===FaceUI.SpecialChars.Null||this._newKeyboardState.IsKeyDown(this._currCharacterInputKey)||(this._currCharacterInput=FaceUI.SpecialChars.Null);$t=Bridge.getEnumerator(this._allKeyValues);try{while($t.moveNext())key=$t.Current,this._newKeyboardState.IsKeyDown(key)&&!this._oldKeyboardState.IsKeyDown(key)&&this.OnKeyPressed(key)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}},UpdateMousePosition:function(pos){Microsoft.Xna.Framework.Input.Mouse.SetPosition(Bridge.Int.clip32(pos.X),Bridge.Int.clip32(pos.Y));this._newMousePos=this._oldMousePos=pos.$clone()},TransformMousePosition:function(transform){var newMousePos=this._newMousePos.$clone();return System.Nullable.liftne(Microsoft.Xna.Framework.Matrix.op_Inequality,System.Nullable.lift1("$clone",transform),null)?Microsoft.Xna.Framework.Vector2.op_Subtraction(Microsoft.Xna.Framework.Vector2.Transform(newMousePos.$clone(),System.Nullable.getValue(transform).$clone()),new Microsoft.Xna.Framework.Vector2.$ctor2(System.Nullable.getValue(transform).Translation.X,System.Nullable.getValue(transform).Translation.Y)):newMousePos.$clone()},OnKeyPressed:function(key){this.NewKeyTextInput(key)},NewKeyTextInput:function(key){var isShiftDown,prevKey,lastCharPressedStr,capsLock;this._keyboardInputCooldown=this.KeysTypeCooldown;this._newKeyIsPressed=!0;isShiftDown=this._newKeyboardState.IsKeyDown(Microsoft.Xna.Framework.Input.Keys.LeftShift)||this._newKeyboardState.IsKeyDown(Microsoft.Xna.Framework.Input.Keys.RightShift);prevKey=this._currCharacterInputKey;this._currCharacterInputKey=key;switch(key){case Microsoft.Xna.Framework.Input.Keys.Space:this._currCharacterInput=FaceUI.SpecialChars.Space;return;case Microsoft.Xna.Framework.Input.Keys.Left:this._currCharacterInput=FaceUI.SpecialChars.ArrowLeft;return;case Microsoft.Xna.Framework.Input.Keys.Right:this._currCharacterInput=FaceUI.SpecialChars.ArrowRight;return;case Microsoft.Xna.Framework.Input.Keys.Up:this._currCharacterInput=FaceUI.SpecialChars.ArrowUp;return;case Microsoft.Xna.Framework.Input.Keys.Down:this._currCharacterInput=FaceUI.SpecialChars.ArrowDown;return;case Microsoft.Xna.Framework.Input.Keys.Delete:this._currCharacterInput=FaceUI.SpecialChars.Delete;return;case Microsoft.Xna.Framework.Input.Keys.Back:this._currCharacterInput=FaceUI.SpecialChars.Backspace;return;case Microsoft.Xna.Framework.Input.Keys.CapsLock:case Microsoft.Xna.Framework.Input.Keys.RightShift:case Microsoft.Xna.Framework.Input.Keys.LeftShift:this._newKeyIsPressed=!1;return;case Microsoft.Xna.Framework.Input.Keys.Enter:this._currCharacterInput=10;return;case Microsoft.Xna.Framework.Input.Keys.D0:case Microsoft.Xna.Framework.Input.Keys.NumPad0:this._currCharacterInput=isShiftDown&&key===Microsoft.Xna.Framework.Input.Keys.D0?41:48;return;case Microsoft.Xna.Framework.Input.Keys.D9:case Microsoft.Xna.Framework.Input.Keys.NumPad9:this._currCharacterInput=isShiftDown&&key===Microsoft.Xna.Framework.Input.Keys.D9?40:57;return;case Microsoft.Xna.Framework.Input.Keys.D8:case Microsoft.Xna.Framework.Input.Keys.NumPad8:this._currCharacterInput=isShiftDown&&key===Microsoft.Xna.Framework.Input.Keys.D8?42:56;return;case Microsoft.Xna.Framework.Input.Keys.D7:case Microsoft.Xna.Framework.Input.Keys.NumPad7:this._currCharacterInput=isShiftDown&&key===Microsoft.Xna.Framework.Input.Keys.D7?38:55;return;case Microsoft.Xna.Framework.Input.Keys.D6:case Microsoft.Xna.Framework.Input.Keys.NumPad6:this._currCharacterInput=isShiftDown&&key===Microsoft.Xna.Framework.Input.Keys.D6?94:54;return;case Microsoft.Xna.Framework.Input.Keys.D5:case Microsoft.Xna.Framework.Input.Keys.NumPad5:this._currCharacterInput=isShiftDown&&key===Microsoft.Xna.Framework.Input.Keys.D5?37:53;return;case Microsoft.Xna.Framework.Input.Keys.D4:case Microsoft.Xna.Framework.Input.Keys.NumPad4:this._currCharacterInput=isShiftDown&&key===Microsoft.Xna.Framework.Input.Keys.D4?36:52;return;case Microsoft.Xna.Framework.Input.Keys.D3:case Microsoft.Xna.Framework.Input.Keys.NumPad3:this._currCharacterInput=isShiftDown&&key===Microsoft.Xna.Framework.Input.Keys.D3?35:51;return;case Microsoft.Xna.Framework.Input.Keys.D2:case Microsoft.Xna.Framework.Input.Keys.NumPad2:this._currCharacterInput=isShiftDown&&key===Microsoft.Xna.Framework.Input.Keys.D2?64:50;return;case Microsoft.Xna.Framework.Input.Keys.D1:case Microsoft.Xna.Framework.Input.Keys.NumPad1:this._currCharacterInput=isShiftDown&&key===Microsoft.Xna.Framework.Input.Keys.D1?33:49;return;case Microsoft.Xna.Framework.Input.Keys.OemQuestion:this._currCharacterInput=isShiftDown?63:47;return;case Microsoft.Xna.Framework.Input.Keys.OemQuotes:this._currCharacterInput=isShiftDown?34:39;return;case Microsoft.Xna.Framework.Input.Keys.OemSemicolon:this._currCharacterInput=isShiftDown?58:59;return;case Microsoft.Xna.Framework.Input.Keys.OemTilde:this._currCharacterInput=isShiftDown?126:96;return;case Microsoft.Xna.Framework.Input.Keys.OemOpenBrackets:this._currCharacterInput=isShiftDown?123:91;return;case Microsoft.Xna.Framework.Input.Keys.OemCloseBrackets:this._currCharacterInput=isShiftDown?125:93;return;case Microsoft.Xna.Framework.Input.Keys.OemPlus:case Microsoft.Xna.Framework.Input.Keys.Add:this._currCharacterInput=isShiftDown||key===Microsoft.Xna.Framework.Input.Keys.Add?43:61;return;case Microsoft.Xna.Framework.Input.Keys.OemMinus:case Microsoft.Xna.Framework.Input.Keys.Subtract:this._currCharacterInput=isShiftDown?95:45;return;case Microsoft.Xna.Framework.Input.Keys.OemPeriod:case Microsoft.Xna.Framework.Input.Keys.Decimal:this._currCharacterInput=isShiftDown?62:46;return;case Microsoft.Xna.Framework.Input.Keys.Divide:this._currCharacterInput=isShiftDown?63:47;return;case Microsoft.Xna.Framework.Input.Keys.Multiply:this._currCharacterInput=42;return;case Microsoft.Xna.Framework.Input.Keys.OemBackslash:this._currCharacterInput=isShiftDown?124:92;return;case Microsoft.Xna.Framework.Input.Keys.OemComma:this._currCharacterInput=isShiftDown?60:44;return;case Microsoft.Xna.Framework.Input.Keys.Tab:this._currCharacterInput=32;return;default:this._currCharacterInputKey=prevKey;break}(lastCharPressedStr=System.Enum.toString(Microsoft.Xna.Framework.Input.Keys,key),lastCharPressedStr.length>1)||(this._currCharacterInputKey=key,capsLock=this._capslock,isShiftDown&&(capsLock=!capsLock),this._currCharacterInput=(capsLock?lastCharPressedStr.toUpperCase():lastCharPressedStr.toLowerCase()).charCodeAt(0))},GetTextInput:function(txt,lineWidth,pos){if(!this._newKeyIsPressed&&this._keyboardInputCooldown>0||this._currCharacterInput===FaceUI.SpecialChars.Null)return txt;pos.v===-1&&(pos.v=txt.length);switch(this._currCharacterInput){case FaceUI.SpecialChars.ArrowLeft:return(pos.v=pos.v-1|0)<0&&(pos.v=0),txt;case FaceUI.SpecialChars.ArrowRight:return(pos.v=pos.v+1|0)>txt.length&&(pos.v=txt.length),txt;case FaceUI.SpecialChars.ArrowUp:return pos.v=pos.v-lineWidth|0,pos.v<0&&(pos.v=0),txt;case FaceUI.SpecialChars.ArrowDown:return pos.v=pos.v+lineWidth|0,pos.v>txt.length&&(pos.v=txt.length),txt;case FaceUI.SpecialChars.Backspace:return pos.v=pos.v-1|0,pos.v<txt.length&&pos.v>=0&&txt.length>0?System.String.remove(txt,pos.v,1):txt;case FaceUI.SpecialChars.Delete:return pos.v<txt.length&&txt.length>0?System.String.remove(txt,pos.v,1):txt}return System.String.insert(Bridge.identity(pos.v,pos.v=pos.v+1|0),txt,String.fromCharCode(this._currCharacterInput))},MouseButtonDown:function(button){return button===void 0&&(button=0),this.GetMouseButtonState(button)===Microsoft.Xna.Framework.Input.ButtonState.Pressed},AnyMouseButtonDown:function(){return this.MouseButtonDown(FaceUI.MouseButton.Left)||this.MouseButtonDown(FaceUI.MouseButton.Right)||this.MouseButtonDown(FaceUI.MouseButton.Middle)},MouseButtonReleased:function(button){return button===void 0&&(button=0),this.GetMouseButtonState(button)===Microsoft.Xna.Framework.Input.ButtonState.Released&&this.GetMousePreviousButtonState(button)===Microsoft.Xna.Framework.Input.ButtonState.Pressed},AnyMouseButtonReleased:function(){return this.MouseButtonReleased(FaceUI.MouseButton.Left)||this.MouseButtonReleased(FaceUI.MouseButton.Right)||this.MouseButtonReleased(FaceUI.MouseButton.Middle)},MouseButtonPressed:function(button){return button===void 0&&(button=0),this.GetMouseButtonState(button)===Microsoft.Xna.Framework.Input.ButtonState.Pressed&&this.GetMousePreviousButtonState(button)===Microsoft.Xna.Framework.Input.ButtonState.Released},AnyMouseButtonPressed:function(){return this.MouseButtonPressed(FaceUI.MouseButton.Left)||this.MouseButtonPressed(FaceUI.MouseButton.Right)||this.MouseButtonPressed(FaceUI.MouseButton.Middle)},MouseButtonClick:function(button){return button===void 0&&(button=0),this.GetMouseButtonState(button)===Microsoft.Xna.Framework.Input.ButtonState.Released&&this.GetMousePreviousButtonState(button)===Microsoft.Xna.Framework.Input.ButtonState.Pressed},AnyMouseButtonClicked:function(){return this.MouseButtonClick(FaceUI.MouseButton.Left)||this.MouseButtonClick(FaceUI.MouseButton.Right)||this.MouseButtonClick(FaceUI.MouseButton.Middle)},GetMouseButtonState:function(button){button===void 0&&(button=0);switch(button){case FaceUI.MouseButton.Left:return this._newMouseState.LeftButton;case FaceUI.MouseButton.Right:return this._newMouseState.RightButton;case FaceUI.MouseButton.Middle:return this._newMouseState.MiddleButton}return Microsoft.Xna.Framework.Input.ButtonState.Released},GetMousePreviousButtonState:function(button){button===void 0&&(button=0);switch(button){case FaceUI.MouseButton.Left:return this._oldMouseState.LeftButton;case FaceUI.MouseButton.Right:return this._oldMouseState.RightButton;case FaceUI.MouseButton.Middle:return this._oldMouseState.MiddleButton}return Microsoft.Xna.Framework.Input.ButtonState.Released},IsKeyDown:function(key){return this._newKeyboardState.IsKeyDown(key)},IsKeyReleased:function(key){return this._oldKeyboardState.IsKeyDown(key)&&this._newKeyboardState.IsKeyUp(key)}}});Bridge.define("FaceUI.Entities.Button",{inherits:[FaceUI.Entities.Entity],statics:{fields:{DefaultStyle:null,DefaultParagraphStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet;this.DefaultParagraphStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.Button)}}},fields:{_skin:0,ButtonParagraph:null,ToggleMode:!1,_checked:!1,_customSkin:null,_customFrame:null},props:{Skin:{get:function(){return this._skin},set:function(value){this._skin=value;this._customSkin=null}},Opacity:{get:function(){return Bridge.ensureBaseProperty(this,"Opacity").$FaceUI$Entities$Entity$Opacity},set:function(value){Bridge.ensureBaseProperty(this,"Opacity").$FaceUI$Entities$Entity$Opacity=value;this.ButtonParagraph.Opacity=value}},Checked:{get:function(){return this._checked===!0},set:function(value){this._checked=value;this.DoOnValueChange()}}},ctors:{init:function(){this._customFrame=new Microsoft.Xna.Framework.Vector2;this.ToggleMode=!1;this._checked=!1;this._customFrame=Microsoft.Xna.Framework.Vector2.Zero.$clone()},$ctor1:function(text,skin,anchor,size,offset){skin===void 0&&(skin=0);anchor===void 0&&(anchor=9);size===void 0&&(size=null);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this._skin=skin;this.UpdateStyle(FaceUI.Entities.Button.DefaultStyle);FaceUI.UserInterface.Active._isDeserializing||(this.ButtonParagraph=FaceUI.UserInterface.DefaultParagraph(text,FaceUI.Entities.Anchor.Center,void 0,void 0,void 0,void 0),this.ButtonParagraph._hiddenInternalEntity=!0,this.ButtonParagraph.UpdateStyle(FaceUI.Entities.Button.DefaultParagraphStyle),this.ButtonParagraph.Identifier="_button_caption",this.AddChild(this.ButtonParagraph,!0))},ctor:function(){FaceUI.Entities.Button.$ctor1.call(this,"")}},methods:{InitAfterDeserialize:function(){FaceUI.Entities.Entity.prototype.InitAfterDeserialize.call(this);this.ButtonParagraph=Bridge.as(this.Find$1("_button_caption"),FaceUI.Entities.Paragraph);this.ButtonParagraph._hiddenInternalEntity=!0},SetCustomSkin:function(defaultTexture,mouseHoverTexture,mouseDownTexture,frameWidth){var $t;frameWidth===void 0&&(frameWidth=null);this._customSkin=System.Array.init(3,null,Microsoft.Xna.Framework.Graphics.Texture2D);this._customSkin[System.Array.index(FaceUI.Entities.EntityState.Default,this._customSkin)]=defaultTexture;this._customSkin[System.Array.index(FaceUI.Entities.EntityState.MouseHover,this._customSkin)]=mouseHoverTexture;this._customSkin[System.Array.index(FaceUI.Entities.EntityState.MouseDown,this._customSkin)]=mouseDownTexture;this._customFrame=($t=frameWidth,$t!=null?$t:this._customFrame)},IsNaturallyInteractable:function(){return!0},DoOnClick:function(){this.ToggleMode&&(this.Checked=!this.Checked);FaceUI.Entities.Entity.prototype.DoOnClick.call(this)},DrawEntity:function(spriteBatch,phase){var state=this._entityState,scale;this.Checked&&(state=FaceUI.Entities.EntityState.MouseDown);var texture=this._customSkin==null?FaceUI.Resources.ButtonTextures.getItem$1(this._skin,state):this._customSkin[System.Array.index(state,this._customSkin)],data=FaceUI.Resources.ButtonData[System.Array.index(this._skin,FaceUI.Resources.ButtonData)],frameSize=this._customSkin==null?new Microsoft.Xna.Framework.Vector2.$ctor2(data.FrameWidth,data.FrameHeight):this._customFrame;frameSize.Length()>0?(scale=frameSize.Y>0?this.Scale:1,FaceUI.UserInterface.Active.DrawUtils.DrawSurface(spriteBatch,texture,this._destRect.$clone(),frameSize.$clone(),1,this.FillColor.$clone(),scale)):FaceUI.UserInterface.Active.DrawUtils.DrawImage(spriteBatch,texture,this._destRect.$clone(),this.FillColor.$clone(),1);FaceUI.Entities.Entity.prototype.DrawEntity.call(this,spriteBatch,phase)}}});Bridge.define("FaceUI.Entities.CheckBox",{inherits:[FaceUI.Entities.Entity],statics:{fields:{CHECKBOX_SIZE:null,DefaultStyle:null,DefaultParagraphStyle:null},ctors:{init:function(){this.CHECKBOX_SIZE=new Microsoft.Xna.Framework.Vector2;this.CHECKBOX_SIZE=new Microsoft.Xna.Framework.Vector2.$ctor2(35,35);this.DefaultStyle=new FaceUI.Entities.StyleSheet;this.DefaultParagraphStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.CheckBox)}}},fields:{TextParagraph:null,_value:!1},props:{Checked:{get:function(){return this._value===!0},set:function(value){this._value=value;this.DoOnValueChange()}}},ctors:{init:function(){this._value=!1},$ctor1:function(text,anchor,size,offset,isChecked){anchor===void 0&&(anchor=9);size===void 0&&(size=null);offset===void 0&&(offset=null);isChecked===void 0&&(isChecked=!1);this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this.UpdateStyle(FaceUI.Entities.CheckBox.DefaultStyle);FaceUI.UserInterface.Active._isDeserializing||(this.TextParagraph=FaceUI.UserInterface.DefaultParagraph(text,FaceUI.Entities.Anchor.CenterLeft,void 0,void 0,void 0,void 0),this.TextParagraph.UpdateStyle(FaceUI.Entities.CheckBox.DefaultParagraphStyle),this.TextParagraph.Offset=new Microsoft.Xna.Framework.Vector2.$ctor2(25,0),this.TextParagraph._hiddenInternalEntity=!0,this.TextParagraph.Identifier="_checkbox_text",this.AddChild(this.TextParagraph,!0));this.PromiscuousClicksMode=!0;this.Checked=isChecked},ctor:function(){FaceUI.Entities.CheckBox.$ctor1.call(this,"")}},methods:{InitAfterDeserialize:function(){FaceUI.Entities.Entity.prototype.InitAfterDeserialize.call(this);this.TextParagraph=Bridge.as(this.Find$1("_checkbox_text"),FaceUI.Entities.Paragraph);this.TextParagraph._hiddenInternalEntity=!0},IsNaturallyInteractable:function(){return!0},GetTexture:function(){var state=this._entityState;return state!==FaceUI.Entities.EntityState.MouseDown&&this.Checked&&(state=FaceUI.Entities.EntityState.MouseDown),FaceUI.Resources.CheckBoxTextures.getItem(state)},DrawEntity:function(spriteBatch,phase){var texture=this.GetTexture(),actualSize=Microsoft.Xna.Framework.Vector2.op_Multiply$1(FaceUI.Entities.CheckBox.CHECKBOX_SIZE.$clone(),this.GlobalScale),dest=new Microsoft.Xna.Framework.Rectangle.$ctor2(this._destRect.X,Bridge.Int.clip32((this._destRect.Y+(Bridge.Int.div(this._destRect.Height,2)|0)|0)-actualSize.Y/2),Bridge.Int.clip32(actualSize.X),Bridge.Int.clip32(actualSize.Y)),src;dest=FaceUI.UserInterface.Active.DrawUtils.ScaleRect(dest.$clone(),this.Scale);src=new Microsoft.Xna.Framework.Rectangle.$ctor2(0,0,texture.Width,texture.Height);spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw$1(texture,dest.$clone(),src.$clone(),this.FillColor.$clone());FaceUI.Entities.Entity.prototype.DrawEntity.call(this,spriteBatch,phase)},DoOnClick:function(){this.Checked=!this._value;FaceUI.Entities.Entity.prototype.DoOnClick.call(this)}}});Bridge.define("FaceUI.Entities.ColoredRectangle",{inherits:[FaceUI.Entities.Entity],statics:{fields:{DefaultStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.ColoredRectangle)}}},ctors:{$ctor3:function(fillColor,outlineColor,outlineWidth,size,anchor,offset){outlineColor===void 0&&(outlineColor=null);outlineWidth===void 0&&(outlineWidth=1);size===void 0&&(size=null);anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);var $t;this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this.UpdateStyle(FaceUI.Entities.ColoredRectangle.DefaultStyle);this.FillColor=fillColor.$clone();this.OutlineColor=($t=outlineColor,$t!=null?$t:Microsoft.Xna.Framework.Color.Black);this.OutlineWidth=outlineWidth},$ctor1:function(fillColor,outlineColor,size,anchor,offset){anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this.UpdateStyle(FaceUI.Entities.ColoredRectangle.DefaultStyle);this.FillColor=fillColor.$clone();this.OutlineColor=outlineColor.$clone()},$ctor2:function(fillColor,size,anchor,offset){anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this.UpdateStyle(FaceUI.Entities.ColoredRectangle.DefaultStyle);this.FillColor=fillColor.$clone();this.OutlineWidth=0},ctor:function(){FaceUI.Entities.ColoredRectangle.$ctor3.call(this,Microsoft.Xna.Framework.Color.White)},$ctor4:function(size,anchor,offset){anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this.UpdateStyle(FaceUI.Entities.ColoredRectangle.DefaultStyle)}},methods:{DrawEntity:function(spriteBatch,phase){var outlineWidth=this.OutlineWidth,outlineDest,fill;outlineWidth>0&&(outlineDest=this._destRect.$clone(),outlineDest.X=outlineDest.X-outlineWidth|0,outlineDest.Y=outlineDest.Y-outlineWidth|0,outlineDest.Width=outlineDest.Width+Bridge.Int.mul(outlineWidth,2)|0,outlineDest.Height=outlineDest.Height+Bridge.Int.mul(outlineWidth,2)|0,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(FaceUI.Resources.WhiteTexture,outlineDest.$clone(),this.OutlineColor.$clone()));fill=this.FillColor.$clone();spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(FaceUI.Resources.WhiteTexture,this._destRect.$clone(),fill.$clone());FaceUI.Entities.Entity.prototype.DrawEntity.call(this,spriteBatch,phase)}}});Bridge.define("FaceUI.Entities.DropDown",{inherits:[FaceUI.Entities.Entity],statics:{fields:{DefaultStyle:null,DefaultParagraphStyle:null,DefaultSelectedParagraphStyle:null,SelectedPanelHeight:0,ArrowSize:0},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet;this.DefaultParagraphStyle=new FaceUI.Entities.StyleSheet;this.DefaultSelectedParagraphStyle=new FaceUI.Entities.StyleSheet;this.SelectedPanelHeight=67;this.ArrowSize=30},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.DropDown)}}},fields:{_placeholderText:null,_perItemCallbacks:null,_lastSelected:0,_selectedTextPanel:null,_selectedTextParagraph:null,_arrowDownImage:null,_selectList:null,AutoSetListHeight:!1,DontKeepSelection:!1,OnListChange:null},props:{DefaultText:{get:function(){return this._placeholderText},set:function(value){this._placeholderText=value}},SelectedTextPanel:{get:function(){return this._selectedTextPanel}},AllowReselectValue:{get:function(){return this._selectList.AllowReselectValue},set:function(value){this._selectList.AllowReselectValue=value}},SelectList:{get:function(){return this._selectList}},SelectedTextPanelParagraph:{get:function(){return this._selectedTextParagraph}},ArrowDownImage:{get:function(){return this._arrowDownImage}},ListVisible:{get:function(){return this._selectList.Visible},set:function(value){this._selectList.Visible=value;this.OnDropDownVisibilityChange()}},Priority:{get:function(){return(100-this._indexInParent|0)+this.PriorityBonus|0}},HasSelectedValue:{get:function(){return this.SelectedIndex!==-1}},SelectedValue:{get:function(){return this._selectList.SelectedValue},set:function(value){this._selectList.SelectedValue=value}},SelectedIndex:{get:function(){return this._selectList.SelectedIndex},set:function(value){this._selectList.SelectedIndex=value}},ScrollPosition:{get:function(){return this._selectList.ScrollPosition},set:function(value){this._selectList.ScrollPosition=value}},Count:{get:function(){return this._selectList.Count}},Empty:{get:function(){return this._selectList.Empty}}},ctors:{init:function(){this._placeholderText="Click to Select";this._perItemCallbacks=new(System.Collections.Generic.Dictionary$2(System.String,Function));this._lastSelected=-1;this.AutoSetListHeight=!1;this.DontKeepSelection=!1},$ctor1:function(size,anchor,offset,skin,listSkin,showArrow){anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);skin===void 0&&(skin=4);listSkin===void 0&&(listSkin=null);showArrow===void 0&&(showArrow=!0);var $t,$t1;this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone();this.UseActualSizeForCollision=!0;FaceUI.UserInterface.Active._isDeserializing?this._selectList=new FaceUI.Entities.SelectList.$ctor2(new Microsoft.Xna.Framework.Vector2.$ctor2(0,size.Y),FaceUI.Entities.Anchor.TopCenter,Microsoft.Xna.Framework.Vector2.Zero.$clone(),($t1=listSkin,$t1!=null?$t1:skin)):(this._selectedTextPanel=new FaceUI.Entities.Panel.$ctor1(new Microsoft.Xna.Framework.Vector2.$ctor2(0,FaceUI.Entities.DropDown.SelectedPanelHeight),skin,FaceUI.Entities.Anchor.TopLeft),this._selectedTextParagraph=FaceUI.UserInterface.DefaultParagraph("",FaceUI.Entities.Anchor.CenterLeft,void 0,void 0,void 0,void 0),this._selectedTextParagraph.UseActualSizeForCollision=!1,this._selectedTextParagraph.UpdateStyle(FaceUI.Entities.SelectList.DefaultParagraphStyle),this._selectedTextParagraph.UpdateStyle(FaceUI.Entities.DropDown.DefaultParagraphStyle),this._selectedTextParagraph.UpdateStyle(FaceUI.Entities.DropDown.DefaultSelectedParagraphStyle),this._selectedTextParagraph.Identifier="_selectedTextParagraph",this._selectedTextPanel.AddChild(this._selectedTextParagraph,!0),this._selectedTextPanel._hiddenInternalEntity=!0,this._selectedTextPanel.Identifier="_selectedTextPanel",this._arrowDownImage=new FaceUI.Entities.Image.$ctor1(FaceUI.Resources.ArrowDown,new Microsoft.Xna.Framework.Vector2.$ctor2(FaceUI.Entities.DropDown.ArrowSize,FaceUI.Entities.DropDown.ArrowSize),FaceUI.Entities.ImageDrawMode.Stretch,FaceUI.Entities.Anchor.CenterRight,new Microsoft.Xna.Framework.Vector2.$ctor2(-10,0)),this._selectedTextPanel.AddChild(this._arrowDownImage,!0),this._arrowDownImage._hiddenInternalEntity=!0,this._arrowDownImage.Identifier="_arrowDownImage",this._arrowDownImage.Visible=showArrow,this._selectList=new FaceUI.Entities.SelectList.$ctor2(new Microsoft.Xna.Framework.Vector2.$ctor2(0,size.Y),FaceUI.Entities.Anchor.TopCenter,Microsoft.Xna.Framework.Vector2.Zero.$clone(),($t=listSkin,$t!=null?$t:skin)),this._selectList.Offset=new Microsoft.Xna.Framework.Vector2.$ctor2(0,FaceUI.Entities.DropDown.SelectedPanelHeight),this._selectList.SpaceBefore=Microsoft.Xna.Framework.Vector2.Zero.$clone(),this._selectList._hiddenInternalEntity=!0,this._selectList.Identifier="_selectList",this.AddChild(this._selectedTextPanel),this.AddChild(this._selectList),this.InitEvents())},ctor:function(){FaceUI.Entities.DropDown.$ctor1.call(this,new Microsoft.Xna.Framework.Vector2.$ctor2(0,200))}},methods:{InitEvents:function(){var $t;this._selectList.OnValueChange=Bridge.fn.bind(this,$asm.$.FaceUI.Entities.DropDown.f1);this._selectList.OnClick=Bridge.fn.bind(this,$asm.$.FaceUI.Entities.DropDown.f2);this._selectList.Visible=!1;this._selectedTextPanel.OnClick=Bridge.fn.bind(this,$asm.$.FaceUI.Entities.DropDown.f3);this._selectedTextParagraph.Text=($t=this.SelectedValue,$t!=null?$t:this.DefaultText);this._selectList.UpdateStyle(FaceUI.Entities.DropDown.DefaultStyle);this._selectList.PropagateEventsTo$1(this);this._selectedTextPanel.PropagateEventsTo(this)},InitAfterDeserialize:function(){FaceUI.Entities.Entity.prototype.InitAfterDeserialize.call(this);this._selectedTextPanel=this.Find(FaceUI.Entities.Panel,"_selectedTextPanel");this._selectedTextPanel._hiddenInternalEntity=!0;this._arrowDownImage=this._selectedTextPanel.Find(FaceUI.Entities.Image,"_arrowDownImage");this._arrowDownImage._hiddenInternalEntity=!0;this._selectList=this.Find(FaceUI.Entities.SelectList,"_selectList");this._selectList._hiddenInternalEntity=!0;this._selectedTextParagraph=Bridge.as(this._selectedTextPanel.Find$1("_selectedTextParagraph"),FaceUI.Entities.Paragraph);this.InitEvents()},OnSelectedSpecificItem:function(itemValue,action){this._perItemCallbacks.set(itemValue,action)},ClearSpecificItemEvents:function(){this._perItemCallbacks.clear()},GetDestRectForAutoAnchors:function(){return this._selectedTextPanel.UpdateDestinationRectsIfDirty(),this._selectedTextPanel.GetActualDestRect()},IsTouching:function(point){point=Microsoft.Xna.Framework.Vector2.op_Addition(point.$clone(),this._lastScrollVal.ToVector2());var rect=new Microsoft.Xna.Framework.Rectangle;return this.ListVisible?(this._selectList.UpdateDestinationRectsIfDirty(),rect=this._selectList.GetActualDestRect(),rect.Height=rect.Height+FaceUI.Entities.DropDown.SelectedPanelHeight|0,rect.Y=rect.Y-FaceUI.Entities.DropDown.SelectedPanelHeight|0):(this._selectedTextPanel.UpdateDestinationRectsIfDirty(),rect=this._selectedTextPanel.GetActualDestRect()),point.X>=rect.Left&&point.X<=rect.Right&&point.Y>=rect.Top&&point.Y<=rect.Bottom},OnDropDownVisibilityChange:function(){FaceUI.UserInterface.Active._isDeserializing||(this._arrowDownImage.Texture=this.ListVisible?FaceUI.Resources.ArrowUp:FaceUI.Resources.ArrowDown,this._selectList.IsFocused=!0,FaceUI.UserInterface.Active.ActiveEntity=this._selectList,this._selectList.UpdateDestinationRects(),this._selectList.Visible&&this._selectList.ScrollToSelected(),this.MarkAsDirty(),this.AutoSetListHeight&&this._selectList.MatchHeightToList())},DrawEntity:function(spriteBatch,phase){this.SelectedIndex!==-1||Bridge.referenceEquals(this._selectedTextParagraph.Text,this._placeholderText)||(this._selectedTextParagraph.Text=this._placeholderText)},DoAfterUpdate:function(){var mousePosition,callback;this.ListVisible&&(mousePosition=this.GetMousePos(),this.MouseInput.FaceUI$IMouseInput$AnyMouseButtonPressed()&&!this.IsTouching(mousePosition.$clone())&&(this.ListVisible=!1));FaceUI.Entities.Entity.prototype.DoAfterUpdate.call(this);this.HasSelectedValue&&(this.SelectedIndex!==this._lastSelected&&(callback={v:null},this._perItemCallbacks.tryGetValue(this._selectList.SelectedValue,callback)&&callback.v()),this.DontKeepSelection&&this.SelectedIndex!==-1&&this.Unselect());this._lastSelected=this.SelectedIndex},Unselect:function(){this._selectList.Unselect()},AddItem:function(value){this._selectList.AddItem(value)},AddItem$1:function(value,index){this._selectList.AddItem$1(value,index)},RemoveItem$1:function(value){this._selectList.RemoveItem$1(value)},RemoveItem:function(index){this._selectList.RemoveItem(index)},ClearItems:function(){this._selectList.ClearItems()},IsNaturallyInteractable:function(){return!0},ScrollToSelected:function(){this._selectList.ScrollToSelected()},scrollToEnd:function(){this._selectList.scrollToEnd()}}});Bridge.ns("FaceUI.Entities.DropDown",$asm.$);Bridge.apply($asm.$.FaceUI.Entities.DropDown,{f1:function(entity){var $t;this.ListVisible=!1;this._selectedTextParagraph.Text=($t=this.SelectedValue,$t!=null?$t:this.DefaultText)},f2:function(entity){this.ListVisible=!1},f3:function(self){this.ListVisible=!this.ListVisible}});Bridge.define("FaceUI.Entities.Paragraph",{inherits:[FaceUI.Entities.Entity],statics:{fields:{DefaultStyle:null,MaxOutlineWidthToOptimize:0,BaseSize:0},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet;this.MaxOutlineWidthToOptimize=1;this.BaseSize=1},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.Paragraph)}}},fields:{_text:null,BackgroundColor:null,BackgroundColorPadding:null,FontOverride:null,SingleCharacterSize:null,BackgroundColorUseBoxSize:!1,_wrapWords:!1,_actualDestRect:null,_processedText:null,_currFont:null,_actualScale:0,_position:null,_fontOrigin:null,_breakWordsIfMust:!1,_addHyphenWhenBreakWord:!1},props:{Text:{get:function(){return this._text},set:function(value){Bridge.referenceEquals(this._text,value)||(this._text=value,this.MarkAsDirty())}},WrapWords:{get:function(){return this._wrapWords},set:function(value){this._wrapWords=value;this.MarkAsDirty()}},BreakWordsIfMust:{get:function(){return this._breakWordsIfMust},set:function(value){this._breakWordsIfMust=value;this.MarkAsDirty()}},AddHyphenWhenBreakWord:{get:function(){return this._addHyphenWhenBreakWord},set:function(value){this._addHyphenWhenBreakWord=value;this.MarkAsDirty()}},MaxCharactersInLine:{get:function(){return Bridge.Int.div(this.GetActualDestRect().Width,Bridge.Int.clip32(this.GetCharacterActualSize().X))|0}},TextStyle:{get:function(){return this.GetActiveStyle("FontStyle").asInt},set:function(value){this.SetStyleProperty("FontStyle",new FaceUI.DataTypes.StyleProperty.$ctor4(value))}},AlignToCenter:{get:function(){return this.GetActiveStyle("ForceAlignCenter").asBool},set:function(value){this.SetStyleProperty("ForceAlignCenter",new FaceUI.DataTypes.StyleProperty.$ctor3(value))}}},ctors:{init:function(){this.BackgroundColor=new Microsoft.Xna.Framework.Color;this.BackgroundColorPadding=new Microsoft.Xna.Framework.Point;this.SingleCharacterSize=new Microsoft.Xna.Framework.Vector2;this._actualDestRect=new Microsoft.Xna.Framework.Rectangle;this._position=new Microsoft.Xna.Framework.Vector2;this._fontOrigin=new Microsoft.Xna.Framework.Vector2;this._text="";this.BackgroundColor=Microsoft.Xna.Framework.Color.Transparent.$clone();this.BackgroundColorPadding=new Microsoft.Xna.Framework.Point.$ctor2(10,10);this.BackgroundColorUseBoxSize=!1;this._wrapWords=!0;this._breakWordsIfMust=!0;this._addHyphenWhenBreakWord=!0},$ctor2:function(text,anchor,size,offset,scale){anchor===void 0&&(anchor=9);size===void 0&&(size=null);offset===void 0&&(offset=null);scale===void 0&&(scale=null);this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this.Text=text;this.UpdateStyle(FaceUI.Entities.Paragraph.DefaultStyle);scale!=null&&this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.Scale,new FaceUI.DataTypes.StyleProperty.$ctor5(System.Nullable.getValue(scale)));this.UpdateFontPropertiesIfNeeded()},$ctor1:function(text,anchor,color,scale,size,offset){scale===void 0&&(scale=null);size===void 0&&(size=null);offset===void 0&&(offset=null);FaceUI.Entities.Paragraph.$ctor2.call(this,text,anchor,size,offset);this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.FillColor,new FaceUI.DataTypes.StyleProperty.$ctor1(color.$clone()));scale!=null&&this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.Scale,new FaceUI.DataTypes.StyleProperty.$ctor5(System.Nullable.getValue(scale)));this.UpdateFontPropertiesIfNeeded()},ctor:function(){FaceUI.Entities.Paragraph.$ctor2.call(this,"")}},methods:{GetActualDestRect:function(){return this._actualDestRect.$clone()},GetCharacterActualSize:function(){var font=this.GetCurrFont(),scale=this.Scale*FaceUI.Entities.Paragraph.BaseSize*this.GlobalScale;return Microsoft.Xna.Framework.Vector2.op_Multiply$1(this.SingleCharacterSize.$clone(),scale)},WrapText:function(font,text,maxLineWidth,fontSize){var $t,$t1,ret,lines,line,words,currWidth,i,breakPos,currWordWidth,c,firstHalf,secondHalf;if(maxLineWidth<=0)return text;if(ret=new System.Text.StringBuilder(""),System.String.contains(text,"\n")){lines=System.String.split(text,[10].map(function(i){return String.fromCharCode(i)}));$t=Bridge.getEnumerator(lines);try{while($t.moveNext())line=$t.Current,ret.appendLine(this.WrapText(font,line,maxLineWidth,fontSize))}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return ret=ret.remove(ret.getLength()-1|0,1),ret.toString()}for(words=new(System.Collections.Generic.List$1(System.String).$ctor1)(System.String.split(text,[32].map(function(i){return String.fromCharCode(i)}))),currWidth=0,i=0;i<words.Count;i=i+1|0){var lastWord=i===(words.Count-1|0),word=words.getItem(i),wordWidth=Bridge.Int.clip32((font.MeasureString(word).X+this.SingleCharacterSize.X)*fontSize);if(this.BreakWordsIfMust&&wordWidth>=maxLineWidth&&word.length>=4){breakPos=0;currWordWidth=Bridge.Int.clip32(this.SingleCharacterSize.X*fontSize);$t1=Bridge.getEnumerator(word);try{while($t1.moveNext()){if(c=$t1.Current,currWordWidth=currWordWidth+Bridge.Int.clip32(font.MeasureString(String.fromCharCode(c)).X*fontSize)|0,currWordWidth>=maxLineWidth)break;breakPos=breakPos+1|0}}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}breakPos=breakPos-3|0;breakPos>=(word.length-1|0)&&(breakPos=breakPos-2|0);breakPos<=0&&(breakPos=1);firstHalf=word.substr(0,breakPos);secondHalf=word.substr(breakPos,word.length-breakPos|0);this.AddHyphenWhenBreakWord&&(firstHalf=(firstHalf||"")+String.fromCharCode(45));words.insert(i+1|0,firstHalf);words.insert(i+2|0,secondHalf);continue}currWidth=currWidth+wordWidth|0;currWidth>=maxLineWidth?(ret.append(String.fromCharCode(10)),ret.append(word),lastWord||ret.append(String.fromCharCode(32)),currWidth=wordWidth):(ret.append(word),lastWord||ret.append(String.fromCharCode(32)))}return ret.getLength()>0&&ret.getChar(ret.getLength()-1|0)===10&&(ret=ret.remove(ret.getLength()-1|0,1)),ret.toString()},GetProcessedText:function(){return this._processedText},GetCurrFont:function(){return this.FontOverride||FaceUI.Resources.Fonts[System.Array.index(this.TextStyle,FaceUI.Resources.Fonts)]},UpdateDestinationRects:function(){FaceUI.Entities.Entity.prototype.UpdateDestinationRects.call(this);this.CalcTextActualRectWithWrap()},UpdateFontPropertiesIfNeeded:function(){var font=this.GetCurrFont();if(!Bridge.referenceEquals(font,this._currFont)&&(this.MarkAsDirty(),this._currFont=font,this.SingleCharacterSize=this._currFont.MeasureString(" "),this.SingleCharacterSize.X*2!==this._currFont.MeasureString("!.").X))throw new FaceUI.Exceptions.InvalidValueException.$ctor1("Cannot use non-monospace fonts!");},CalcTextActualRectWithWrap:function(){var actualScale,newProcessedText,size,alreadyCentered,minInPixels,maxInPixels;this.UpdateFontPropertiesIfNeeded();actualScale=this.Scale*FaceUI.Entities.Paragraph.BaseSize*this.GlobalScale;actualScale!==this._actualScale&&(this._actualScale=actualScale,this.MarkAsDirty());newProcessedText=this.Text;this.WrapWords&&(newProcessedText=this.WrapText(this._currFont,newProcessedText,this._destRect.Width,this._actualScale));Bridge.referenceEquals(newProcessedText,this._processedText)||(this._processedText=newProcessedText,this.MarkAsDirty());this._fontOrigin=Microsoft.Xna.Framework.Vector2.Zero.$clone();this._position=new Microsoft.Xna.Framework.Vector2.$ctor2(this._destRect.X,this._destRect.Y);size=this._currFont.MeasureString(this._processedText);alreadyCentered=!1;switch(this._anchor){case FaceUI.Entities.Anchor.Center:this._fontOrigin=Microsoft.Xna.Framework.Vector2.op_Division$1(size.$clone(),2);this._position=Microsoft.Xna.Framework.Vector2.op_Addition(this._position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(Bridge.Int.div(this._destRect.Width,2)|0,Bridge.Int.div(this._destRect.Height,2)|0));alreadyCentered=!0;break;case FaceUI.Entities.Anchor.AutoCenter:case FaceUI.Entities.Anchor.TopCenter:this._fontOrigin=new Microsoft.Xna.Framework.Vector2.$ctor2(size.X/2,0);this._position=Microsoft.Xna.Framework.Vector2.op_Addition(this._position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(Bridge.Int.div(this._destRect.Width,2)|0,0));alreadyCentered=!0;break;case FaceUI.Entities.Anchor.TopRight:this._fontOrigin=new Microsoft.Xna.Framework.Vector2.$ctor2(size.X,0);this._position=Microsoft.Xna.Framework.Vector2.op_Addition(this._position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(this._destRect.Width,0));break;case FaceUI.Entities.Anchor.BottomCenter:this._fontOrigin=new Microsoft.Xna.Framework.Vector2.$ctor2(size.X/2,size.Y);this._position=Microsoft.Xna.Framework.Vector2.op_Addition(this._position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(Bridge.Int.div(this._destRect.Width,2)|0,this._destRect.Height));alreadyCentered=!0;break;case FaceUI.Entities.Anchor.BottomRight:this._fontOrigin=new Microsoft.Xna.Framework.Vector2.$ctor2(size.X,size.Y);this._position=Microsoft.Xna.Framework.Vector2.op_Addition(this._position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(this._destRect.Width,this._destRect.Height));break;case FaceUI.Entities.Anchor.BottomLeft:this._fontOrigin=new Microsoft.Xna.Framework.Vector2.$ctor2(0,size.Y);this._position=Microsoft.Xna.Framework.Vector2.op_Addition(this._position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,this._destRect.Height));break;case FaceUI.Entities.Anchor.CenterLeft:this._fontOrigin=new Microsoft.Xna.Framework.Vector2.$ctor2(0,size.Y/2);this._position=Microsoft.Xna.Framework.Vector2.op_Addition(this._position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,Bridge.Int.div(this._destRect.Height,2)|0));break;case FaceUI.Entities.Anchor.CenterRight:this._fontOrigin=new Microsoft.Xna.Framework.Vector2.$ctor2(size.X,size.Y/2);this._position=Microsoft.Xna.Framework.Vector2.op_Addition(this._position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(this._destRect.Width,Bridge.Int.div(this._destRect.Height,2)|0));break}this.AlignToCenter&&!alreadyCentered&&(this._fontOrigin.X=size.X/2,this._position.X=this._destRect.X+(Bridge.Int.div(this._destRect.Width,2)|0)|0);this._actualDestRect.X=Bridge.Int.clip32(this._position.X)-Bridge.Int.clip32(this._fontOrigin.X*this._actualScale)|0;this._actualDestRect.Y=Bridge.Int.clip32(this._position.Y)-Bridge.Int.clip32(this._fontOrigin.Y*this._actualScale)|0;this._actualDestRect.Width=Bridge.Int.clip32(size.X*this._actualScale);this._actualDestRect.Height=Bridge.Int.clip32(size.Y*this._actualScale);System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",this.MinSize),null)&&(minInPixels=this.CalcActualSizeInPixels(System.Nullable.getValue(this.MinSize).$clone()),this._actualDestRect.Width=Math.max(minInPixels.X,this._actualDestRect.Width),this._actualDestRect.Height=Math.max(minInPixels.Y,this._actualDestRect.Height));System.Nullable.liftne(Microsoft.Xna.Framework.Vector2.op_Inequality,System.Nullable.lift1("$clone",this.MaxSize),null)&&(maxInPixels=this.CalcActualSizeInPixels(System.Nullable.getValue(this.MaxSize).$clone()),this._actualDestRect.Width=Math.min(maxInPixels.X,this._actualDestRect.Width),this._actualDestRect.Height=Math.min(maxInPixels.Y,this._actualDestRect.Height))},DrawEntityOutline:function(spriteBatch){},DrawEntity:function(spriteBatch,phase){var backColor,rect,padding,outlineWidth,fillCol;this._processedText==null&&this.UpdateDestinationRects();this.BackgroundColor.A>0&&(backColor=FaceUI.UserInterface.Active.DrawUtils.FixColorOpacity(this.BackgroundColor.$clone()),rect=this.BackgroundColorUseBoxSize?this._destRect:this._actualDestRect,this.BackgroundColorUseBoxSize&&(rect.Height=Bridge.Int.clip32(rect.Height/this.GlobalScale)),padding=new Microsoft.Xna.Framework.Point.$ctor2(Bridge.Int.clip32(this.BackgroundColorPadding.X*this.GlobalScale),Bridge.Int.clip32(this.BackgroundColorPadding.Y*this.GlobalScale)),rect.Location=Microsoft.Xna.Framework.Point.op_Subtraction(rect.Location.$clone(),padding.$clone()),rect.Size=Microsoft.Xna.Framework.Point.op_Addition(rect.Size.$clone(),Microsoft.Xna.Framework.Point.op_Addition(padding.$clone(),padding.$clone())),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(FaceUI.Resources.WhiteTexture,rect.$clone(),backColor.$clone()));outlineWidth=this.OutlineWidth;outlineWidth>0&&this.DrawTextOutline(spriteBatch,outlineWidth);fillCol=FaceUI.UserInterface.Active.DrawUtils.FixColorOpacity(this.FillColor.$clone());spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$DrawString(this._currFont,this._processedText,this._position.$clone(),fillCol.$clone(),0,this._fontOrigin.$clone(),this._actualScale,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,.5);FaceUI.Entities.Entity.prototype.DrawEntity.call(this,spriteBatch,phase)},DrawTextOutline:function(spriteBatch,outlineWidth){var outlineColor=FaceUI.UserInterface.Active.DrawUtils.FixColorOpacity(this.OutlineColor.$clone());this.DrawTextOutline$1(spriteBatch,this._processedText,outlineWidth,this._currFont,this._actualScale,this._position.$clone(),outlineColor.$clone(),this._fontOrigin.$clone())},DrawTextOutline$1:function(spriteBatch,text,outlineWidth,font,scale,position,outlineColor,origin){outlineWidth<=FaceUI.Entities.Paragraph.MaxOutlineWidthToOptimize?(spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$DrawString(font,text,Microsoft.Xna.Framework.Vector2.op_Addition(position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.One.$clone(),outlineWidth)),outlineColor.$clone(),0,origin.$clone(),scale,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,.5),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$DrawString(font,text,Microsoft.Xna.Framework.Vector2.op_Subtraction(position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.One.$clone(),outlineWidth)),outlineColor.$clone(),0,origin.$clone(),scale,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,.5)):(spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$DrawString(font,text,Microsoft.Xna.Framework.Vector2.op_Addition(position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.UnitX.$clone(),outlineWidth)),outlineColor.$clone(),0,origin.$clone(),scale,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,.5),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$DrawString(font,text,Microsoft.Xna.Framework.Vector2.op_Subtraction(position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.UnitX.$clone(),outlineWidth)),outlineColor.$clone(),0,origin.$clone(),scale,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,.5),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$DrawString(font,text,Microsoft.Xna.Framework.Vector2.op_Addition(position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.UnitY.$clone(),outlineWidth)),outlineColor.$clone(),0,origin.$clone(),scale,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,.5),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$DrawString(font,text,Microsoft.Xna.Framework.Vector2.op_Subtraction(position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.UnitY.$clone(),outlineWidth)),outlineColor.$clone(),0,origin.$clone(),scale,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,.5))}}});Bridge.define("FaceUI.Entities.HorizontalLine",{inherits:[FaceUI.Entities.Entity],statics:{fields:{FRAME_WIDTH:null,DefaultStyle:null},ctors:{init:function(){this.FRAME_WIDTH=new Microsoft.Xna.Framework.Vector2;this.FRAME_WIDTH=new Microsoft.Xna.Framework.Vector2.$ctor2(.2,0);this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.HorizontalLine)}}},ctors:{$ctor1:function(anchor,offset){offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Entity.ctor.call(this,Microsoft.Xna.Framework.Vector2.Zero,anchor,offset);this.Locked=!0;this.UpdateStyle(FaceUI.Entities.HorizontalLine.DefaultStyle);var texture=FaceUI.Resources.HorizontalLineTexture;this._size.Y=texture.Height*1.75},ctor:function(){FaceUI.Entities.HorizontalLine.$ctor1.call(this,FaceUI.Entities.Anchor.Auto)}},methods:{DrawEntity:function(spriteBatch,phase){var texture=FaceUI.Resources.HorizontalLineTexture;FaceUI.UserInterface.Active.DrawUtils.DrawSurface(spriteBatch,texture,this._destRect.$clone(),FaceUI.Entities.HorizontalLine.FRAME_WIDTH.$clone(),1,this.FillColor.$clone());FaceUI.Entities.Entity.prototype.DrawEntity.call(this,spriteBatch,phase)}}});Bridge.define("FaceUI.Entities.Image",{inherits:[FaceUI.Entities.Entity],statics:{fields:{DefaultStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.Image)}}},fields:{DrawMode:0,FrameWidth:null,Texture:null,SourceRectangle:null},props:{TextureName:{get:function(){return this.Texture.Name},set:function(value){this.Texture=FaceUI.Resources._content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,value)}}},ctors:{init:function(){this.FrameWidth=new Microsoft.Xna.Framework.Vector2;this.FrameWidth=Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.One.$clone(),.15)},$ctor1:function(texture,size,drawMode,anchor,offset){size===void 0&&(size=null);drawMode===void 0&&(drawMode=0);anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this.DrawMode=drawMode;this.Texture=texture;this.UpdateStyle(FaceUI.Entities.Image.DefaultStyle)},ctor:function(){FaceUI.Entities.Image.$ctor1.call(this,null)}},methods:{GetTextureCoordsAt:function(pos){if(this.DrawMode!==FaceUI.Entities.ImageDrawMode.Stretch)throw new FaceUI.Exceptions.InvalidStateException.$ctor1("Cannot get texture coords on image that is not in stretched mode!");if(!this.IsTouching(pos.$clone()))throw new FaceUI.Exceptions.InvalidValueException.$ctor1("Position to get coords for must be inside entity boundaries!");this.CalcDestRect();var rect=this.GetActualDestRect(),relativePos=new Microsoft.Xna.Framework.Vector2.$ctor2(rect.Right-pos.X,rect.Bottom-pos.Y),uv=new Microsoft.Xna.Framework.Vector2.$ctor2(1-relativePos.X/rect.Width,1-relativePos.Y/rect.Height),textCoords=new Microsoft.Xna.Framework.Point.$ctor2(Bridge.Int.clip32(uv.X*this.Texture.Width),Bridge.Int.clip32(uv.Y*this.Texture.Height));return textCoords.$clone()},GetColorAt:function(textureCoords){var data=System.Array.init(Bridge.Int.mul(this.Texture.Width,this.Texture.Height),function(){return new Microsoft.Xna.Framework.Color},Microsoft.Xna.Framework.Color),index=textureCoords.X+Bridge.Int.mul(textureCoords.Y,this.Texture.Width)|0;return this.Texture.GetData(Microsoft.Xna.Framework.Color,data),data[System.Array.index(index,data)].$clone()},SetTextureColorAt:function(textureCoords,color){var data=System.Array.init([color.$clone()],Microsoft.Xna.Framework.Color);this.Texture.SetData$3(Microsoft.Xna.Framework.Color,0,new Microsoft.Xna.Framework.Rectangle.$ctor2(textureCoords.X,textureCoords.Y,1,1),data,0,1)},CalcAutoWidth:function(){this.UpdateDestinationRectsIfDirty();var width=this._destRect.Height/this.Texture.Height*this.Texture.Width;this.Size=new Microsoft.Xna.Framework.Vector2.$ctor2(width,this._size.Y)},CalcAutoHeight:function(){this.UpdateDestinationRectsIfDirty();var height=this._destRect.Width/this.Texture.Width*this.Texture.Height;this.Size=new Microsoft.Xna.Framework.Vector2.$ctor2(this._size.X,height)},DrawEntity:function(spriteBatch,phase){switch(this.DrawMode){case FaceUI.Entities.ImageDrawMode.Panel:FaceUI.UserInterface.Active.DrawUtils.DrawSurface(spriteBatch,this.Texture,this._destRect.$clone(),this.FrameWidth.$clone(),this.Scale,this.FillColor.$clone());break;case FaceUI.Entities.ImageDrawMode.Stretch:FaceUI.UserInterface.Active.DrawUtils.DrawImage(spriteBatch,this.Texture,this._destRect.$clone(),this.FillColor.$clone(),this.Scale,System.Nullable.lift1("$clone",this.SourceRectangle));break}FaceUI.Entities.Entity.prototype.DrawEntity.call(this,spriteBatch,phase)}}});Bridge.define("FaceUI.Entities.LineSpace",{inherits:[FaceUI.Entities.Entity],statics:{fields:{SpaceSize:0},ctors:{init:function(){this.SpaceSize=8},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.LineSpace)}}},ctors:{$ctor1:function(spacesCount){var $t;this.$initialize();FaceUI.Entities.Entity.ctor.call(this,Microsoft.Xna.Framework.Vector2.One,FaceUI.Entities.Anchor.Auto,Microsoft.Xna.Framework.Vector2.Zero);this.Locked=!0;this.Enabled=!1;this.ClickThrough=!0;this.Size=new Microsoft.Xna.Framework.Vector2.$ctor2(0,1);this.SpaceBefore=($t=Microsoft.Xna.Framework.Vector2.Zero.$clone(),this.Padding=$t.$clone(),$t);this.SpaceAfter=new Microsoft.Xna.Framework.Vector2.$ctor2(0,FaceUI.Entities.LineSpace.SpaceSize*this.GlobalScale*spacesCount)},ctor:function(){FaceUI.Entities.LineSpace.$ctor1.call(this,1)}},methods:{DrawEntity:function(spriteBatch,phase){}}});Bridge.define("FaceUI.Entities.PanelBase",{inherits:[FaceUI.Entities.Entity],statics:{fields:{MinAutoAdjustHeight:0},ctors:{init:function(){this.MinAutoAdjustHeight=50},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.PanelBase)}}},fields:{_skin:0,_customTexture:null,_customFrame:null,AdjustHeightAutomatically:!1},props:{Skin:{get:function(){return this._skin},set:function(value){this._skin=value}}},ctors:{init:function(){this.AdjustHeightAutomatically=!1},$ctor1:function(size,skin,anchor,offset){skin===void 0&&(skin=0);anchor===void 0&&(anchor=0);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this._skin=skin;this.UpdateStyle(FaceUI.Entities.Panel.DefaultStyle)},ctor:function(){FaceUI.Entities.PanelBase.$ctor1.call(this,new Microsoft.Xna.Framework.Vector2.$ctor2(500,500))}},methods:{Draw:function(spriteBatch){this.AdjustHeightAutomatically&&this.Visible&&!this.SetHeightBasedOnChildren()||FaceUI.Entities.Entity.prototype.Draw.call(this,spriteBatch)},SetHeightBasedOnChildren:function(){var $t,$t1,child,childDestRect,currHeight,child1;this.UpdateDestinationRectsIfDirty();var selfDestRect=this.GetActualDestRect(),selfTop=selfDestRect.Y-this.Padding.Y,maxHeight=FaceUI.Entities.PanelBase.MinAutoAdjustHeight,didAdjustHeight=!1;$t=Bridge.getEnumerator(this._children);try{while($t.moveNext())if(child=$t.Current,child.Size.Y!==0&&!child.Draggable&&child.Visible&&(child.Anchor===FaceUI.Entities.Anchor.TopCenter||child.Anchor===FaceUI.Entities.Anchor.TopLeft||child.Anchor===FaceUI.Entities.Anchor.TopRight||child.Anchor===FaceUI.Entities.Anchor.Auto||child.Anchor===FaceUI.Entities.Anchor.AutoCenter||child.Anchor===FaceUI.Entities.Anchor.AutoInline||child.Anchor===FaceUI.Entities.Anchor.AutoInlineNoBreak)){if(child.UpdateDestinationRectsIfDirty(),child.GetActualDestRect().Height===0)continue;childDestRect=child.GetDestRectForAutoAnchors();currHeight=childDestRect.Bottom+child.SpaceAfter.Y-selfTop;didAdjustHeight=!0;currHeight>maxHeight&&(maxHeight=currHeight)}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}if(this.Size.Y!==maxHeight){this.Size=new Microsoft.Xna.Framework.Vector2.$ctor2(this.Size.X,maxHeight/FaceUI.UserInterface.Active.GlobalScale);this.UpdateDestinationRects();$t1=Bridge.getEnumerator(this._children);try{while($t1.moveNext())child1=$t1.Current,child1.UpdateDestinationRects()}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}}return didAdjustHeight},SetCustomSkin:function(customTexture,frameWidth){var $t;frameWidth===void 0&&(frameWidth=null);this._customTexture=customTexture;this._customFrame=($t=frameWidth,$t!=null?$t:null)},DrawEntity:function(spriteBatch,phase){var $t;if(this._skin!==FaceUI.Entities.PanelSkin.None){var texture=this._customTexture||FaceUI.Resources.PanelTextures.getItem(this._skin),data=FaceUI.Resources.PanelData[System.Array.index(this._skin,FaceUI.Resources.PanelData)],frameSize=($t=this._customFrame,$t!=null?$t:new Microsoft.Xna.Framework.Vector2.$ctor2(data.FrameWidth,data.FrameHeight));FaceUI.UserInterface.Active.DrawUtils.DrawSurface(spriteBatch,texture,this._destRect.$clone(),frameSize.$clone(),1,this.FillColor.$clone(),this.Scale)}FaceUI.Entities.Entity.prototype.DrawEntity.call(this,spriteBatch,phase)}}});Bridge.define("FaceUI.Entities.PanelTabs",{inherits:[FaceUI.Entities.Entity],statics:{fields:{DefaultButtonStyle:null,DefaultButtonParagraphStyle:null},ctors:{init:function(){this.DefaultButtonStyle=new FaceUI.Entities.StyleSheet;this.DefaultButtonParagraphStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.PanelTabs)}}},fields:{_tabs:null,_buttonsPanel:null,_panelsPanel:null,_internalRoot:null,_activeTab:null},props:{BackgroundSkin:{get:function(){return this._panelsPanel.Skin},set:function(value){this._panelsPanel!=null&&(this._panelsPanel.Skin=value)}},ActiveTab:{get:function(){return this._activeTab}}},ctors:{init:function(){this._tabs=new(System.Collections.Generic.List$1(FaceUI.Entities.TabData).ctor)},ctor:function(buttonsBackground){buttonsBackground===void 0&&(buttonsBackground=-1);var $t,$t1,$t2,$t3,$t4,$t5;this.$initialize();FaceUI.Entities.Entity.ctor.call(this,new Microsoft.Xna.Framework.Vector2.$ctor2(0,0),FaceUI.Entities.Anchor.TopCenter,Microsoft.Xna.Framework.Vector2.Zero);this.UpdateStyle(FaceUI.Entities.Entity.DefaultStyle);this.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone();FaceUI.UserInterface.Active._isDeserializing||(this._internalRoot=new FaceUI.Entities.Panel.$ctor1(Microsoft.Xna.Framework.Vector2.Zero.$clone(),FaceUI.Entities.PanelSkin.None,FaceUI.Entities.Anchor.TopCenter),this._internalRoot.SpaceBefore=($t=($t1=Microsoft.Xna.Framework.Vector2.Zero.$clone(),this._internalRoot.Padding=$t1.$clone(),$t1),this._internalRoot.SpaceAfter=$t.$clone(),$t),this._internalRoot.Identifier="_internalRoot",this.AddChild(this._internalRoot),this._buttonsPanel=new FaceUI.Entities.Panel.$ctor1(Microsoft.Xna.Framework.Vector2.Zero.$clone(),buttonsBackground,FaceUI.Entities.Anchor.TopCenter),this._buttonsPanel.SpaceBefore=($t2=($t3=Microsoft.Xna.Framework.Vector2.Zero.$clone(),this._buttonsPanel.Padding=$t3.$clone(),$t3),this._buttonsPanel.SpaceAfter=$t2.$clone(),$t2),this._buttonsPanel.Identifier="_buttonsPanel",this._internalRoot.AddChild(this._buttonsPanel),this._panelsPanel=new FaceUI.Entities.Panel.$ctor1(Microsoft.Xna.Framework.Vector2.Zero.$clone(),FaceUI.Entities.PanelSkin.None,FaceUI.Entities.Anchor.TopCenter,new Microsoft.Xna.Framework.Vector2.$ctor2(0,0)),this._panelsPanel.SpaceBefore=($t4=($t5=Microsoft.Xna.Framework.Vector2.Zero.$clone(),this._panelsPanel.Padding=$t5.$clone(),$t5),this._panelsPanel.SpaceAfter=$t4.$clone(),$t4),this._panelsPanel.Identifier="_panelsPanel",this._internalRoot.AddChild(this._panelsPanel),this._panelsPanel._hiddenInternalEntity=!0,this._buttonsPanel._hiddenInternalEntity=!0,this._internalRoot._hiddenInternalEntity=!0)}},methods:{InitAfterDeserialize:function(){var buttons,panels,i;for(FaceUI.Entities.Entity.prototype.InitAfterDeserialize.call(this),this._internalRoot=this.Find(FaceUI.Entities.Panel,"_internalRoot"),this._buttonsPanel=this._internalRoot.Find(FaceUI.Entities.Panel,"_buttonsPanel"),this._panelsPanel=this._internalRoot.Find(FaceUI.Entities.Panel,"_panelsPanel"),this._panelsPanel._hiddenInternalEntity=!0,this._buttonsPanel._hiddenInternalEntity=!0,this._internalRoot._hiddenInternalEntity=!0,buttons=new(System.Collections.Generic.List$1(FaceUI.Entities.Entity).$ctor1)(this._buttonsPanel._children),this._buttonsPanel.ClearChildren(),panels=new(System.Collections.Generic.List$1(FaceUI.Entities.Entity).$ctor1)(this._panelsPanel._children),this._panelsPanel.ClearChildren(),i=0;i<panels.Count;i=i+1|0)this.AddTab$1(Bridge.as(panels.getItem(i),FaceUI.Entities.Panel),Bridge.as(buttons.getItem(i),FaceUI.Entities.Button))},GetButtonsHeight:function(withGlobalScale){return this._tabs.Count===0?0:this._tabs.getItem(0).button.GetActualDestRect().Height/(withGlobalScale?1:this.GlobalScale)},DrawEntity:function(spriteBatch,phase){var $t,buttonsHeight,buttons,sizeX,button;this._internalRoot.Padding=Microsoft.Xna.Framework.Vector2.op_UnaryNegation(this.Parent.Padding.$clone());buttonsHeight=this.GetButtonsHeight(!1);this._panelsPanel.Offset=new Microsoft.Xna.Framework.Vector2.$ctor2(0,buttonsHeight);this._buttonsPanel.CalcDestRect();buttons=this._buttonsPanel.Children;sizeX=Bridge.Int.clip32(Bridge.Math.round(Bridge.Int.clip32(Bridge.Math.round(this._buttonsPanel.GetActualDestRect().Width/System.Array.getCount(buttons,FaceUI.Entities.Entity),0,6))/this.GlobalScale,0,6));$t=Bridge.getEnumerator(buttons,FaceUI.Entities.Entity);try{while($t.moveNext())button=$t.Current,button.Size=new Microsoft.Xna.Framework.Vector2.$ctor2(sizeX,button.Size.Y)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}FaceUI.Entities.Entity.prototype.DrawEntity.call(this,spriteBatch,phase)},SelectTab:function(name){var $t,tab;$t=Bridge.getEnumerator(this._tabs);try{while($t.moveNext())if(tab=$t.Current,Bridge.referenceEquals(tab.name,name)){tab.button.Checked=!0;return}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}if(!FaceUI.UserInterface.Active.SilentSoftErrors)throw new FaceUI.Exceptions.NotFoundException.$ctor1("Tab not found!");},AddTab:function(name,panelSkin){panelSkin===void 0&&(panelSkin=-1);var newPanel=new FaceUI.Entities.Panel.$ctor1(Microsoft.Xna.Framework.Vector2.Zero.$clone(),panelSkin,FaceUI.Entities.Anchor.TopCenter),newButton=new FaceUI.Entities.Button.$ctor1(name,FaceUI.Entities.ButtonSkin.Default,FaceUI.Entities.Anchor.AutoInlineNoBreak,new Microsoft.Xna.Framework.Vector2.$ctor2(-1,-1));return newPanel.Identifier=name,this.AddTab$1(newPanel,newButton)},AddTab$1:function(newPanel,newButton){var $t,name=newPanel.Identifier,newTab=new FaceUI.Entities.TabData(name,newPanel,newButton),width,data;newTab.panel.AttachedData=newTab;newTab.button.UpdateStyle(FaceUI.Entities.PanelTabs.DefaultButtonStyle);newTab.button.ButtonParagraph.UpdateStyle(FaceUI.Entities.PanelTabs.DefaultButtonParagraphStyle);this._tabs.add(newTab);width=1/this._tabs.Count;width===1&&(width=0);$t=Bridge.getEnumerator(this._tabs);try{while($t.moveNext())data=$t.Current,data.button.Size=new Microsoft.Xna.Framework.Vector2.$ctor2(width,data.button.Size.Y)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return newTab.button.ToggleMode=!0,newTab.button.Checked=!1,newTab.button.Identifier="tab-button-"+(name||""),newTab.panel.Identifier="tab-panel-"+(name||""),newTab.panel.Visible=!1,newTab.button.OnValueChange=Bridge.fn.bind(this,function(entity){var $t1,self=Bridge.cast(entity,FaceUI.Entities.Button),prevActive=this._activeTab!=null?this._activeTab.panel:null,data1,iterButton,selfPanel;if(this._activeTab=null,self.Checked){$t1=Bridge.getEnumerator(this._tabs);try{while($t1.moveNext())data1=$t1.Current,iterButton=data1.button,!Bridge.referenceEquals(iterButton,self)&&iterButton.Checked&&(iterButton.Checked=!1)}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}}selfPanel=this._panelsPanel.Find(FaceUI.Entities.Panel,"tab-panel-"+(name||""));selfPanel.Visible=self.Checked;self.Checked&&(this._activeTab=Bridge.cast(selfPanel.AttachedData,FaceUI.Entities.TabData));this._activeTab==null&&Bridge.referenceEquals(prevActive,selfPanel)&&(self.Checked=!0);self.Checked&&this.DoOnValueChange()}),this._panelsPanel.AddChild(newTab.panel),this._buttonsPanel.AddChild(newTab.button),this._tabs.Count===1&&(newTab.button.Checked=!0),this.MarkAsDirty(),newTab}}});Bridge.define("FaceUI.Entities.Slider",{inherits:[FaceUI.Entities.Entity],statics:{fields:{DefaultStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.Slider)}}},fields:{_skin:0,_min:0,_max:0,_stepsCount:0,_value:0,_frameActualWidth:0,_markWidth:0},props:{SliderSkin:{get:function(){return this._skin},set:function(value){this._skin=value}},Value:{get:function(){return this._value},set:function(value){var prevVal=this._value;this._value=this.NormalizeValue(value);prevVal!==this._value&&this.DoOnValueChange()}},Min:{get:function(){return this._min},set:function(value){this._min!==value&&(this._min=value,System.Int64(this.Value).lt(System.Int64(this._min))&&(this.Value=this._min|0))}},Max:{get:function(){return this._max},set:function(value){this._max!==value&&(this._max=value,System.Int64(this.Value).gt(System.Int64(this._max))&&(this.Value=this._max|0))}},StepsCount:{get:function(){return this._stepsCount},set:function(value){this._stepsCount=value;this.Value=this.Value}}},ctors:{init:function(){this._stepsCount=0;this._frameActualWidth=0;this._markWidth=20},$ctor2:function(min,max,size,skin,anchor,offset){skin===void 0&&(skin=0);anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Entity.ctor.call(this,size,anchor,offset);this._skin=skin;this.Min=min;this.Max=max;this._stepsCount=this.Max-this.Min>>>0;this._value=this.Min+(Bridge.Int.div(this.Max-this.Min>>>0,2)>>>0)>>>0|0;this.UpdateStyle(FaceUI.Entities.Slider.DefaultStyle)},$ctor1:function(min,max,skin,anchor,offset){skin===void 0&&(skin=0);anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);FaceUI.Entities.Slider.$ctor2.call(this,min,max,FaceUI.Entities.Entity.USE_DEFAULT_SIZE.$clone(),skin,anchor,offset)},ctor:function(){FaceUI.Entities.Slider.$ctor1.call(this,0,10)}},methods:{GetStepSize:function(){return this.StepsCount>0?this.Max-this.Min>>>0===this.StepsCount?1:Math.max((Bridge.Int.div(this.Max-this.Min>>>0,this.StepsCount)>>>0)+1>>>0,2)|0:1},NormalizeValue:function(value){if(!FaceUI.UserInterface.Active._isDeserializing){var stepSize=this.GetStepSize();value=Bridge.Int.clip32(Bridge.Math.round(value/stepSize,0,6)*stepSize);value=System.Int64.clip32(System.Int64.min(System.Int64.max(System.Int64(value),System.Int64(this.Min)),System.Int64(this.Max)))}return value},IsNaturallyInteractable:function(){return!0},DoWhileMouseDown:function(){var mousePos=this.GetMousePos(),val;mousePos=Microsoft.Xna.Framework.Vector2.op_Addition(mousePos.$clone(),this._lastScrollVal.ToVector2());mousePos.X<=this._destRect.X+this._frameActualWidth?this.Value=this.Min|0:mousePos.X>=this._destRect.Right-this._frameActualWidth?this.Value=this.Max|0:(val=(mousePos.X-this._destRect.X-this._frameActualWidth+(Bridge.Int.div(this._markWidth,2)|0))/(this._destRect.Width-this._frameActualWidth*2),this.Value=Bridge.Int.clip32(this.Min+val*(this.Max-this.Min>>>0)));FaceUI.Entities.Entity.prototype.DoWhileMouseDown.call(this)},GetValueAsPercent:function(){return System.Int64(this._value).sub(System.Int64(this.Min))/(this.Max-this.Min>>>0)},DrawEntity:function(spriteBatch,phase){var texture=FaceUI.Resources.SliderTextures.getItem(this._skin),markTexture=FaceUI.Resources.SliderMarkTextures.getItem(this._skin),data=FaceUI.Resources.SliderData[System.Array.index(this._skin,FaceUI.Resources.SliderData)],frameWidth=data.FrameWidth,markX,markDest;FaceUI.UserInterface.Active.DrawUtils.DrawSurface(spriteBatch,texture,this._destRect.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(frameWidth,0),1,this.FillColor.$clone());var frameSizeTexture=new Microsoft.Xna.Framework.Vector2.$ctor2(texture.Width*frameWidth,texture.Height),frameSizeRender=frameSizeTexture.$clone(),ScaleXfac=this._destRect.Height/frameSizeRender.Y,markHeight=this._destRect.Height;this._markWidth=Bridge.Int.clip32(markTexture.Width/markTexture.Height*markHeight);this._frameActualWidth=frameWidth*texture.Width*ScaleXfac;markX=this._destRect.X+this._frameActualWidth+this._markWidth*.5+(this._destRect.Width-this._frameActualWidth*2-this._markWidth)*this.GetValueAsPercent();markDest=new Microsoft.Xna.Framework.Rectangle.$ctor2(Bridge.Int.clip32(Bridge.Math.round(markX,0,6))-(Bridge.Int.div(this._markWidth,2)|0)|0,this._destRect.Y,this._markWidth,markHeight);FaceUI.UserInterface.Active.DrawUtils.DrawImage(spriteBatch,markTexture,markDest.$clone(),this.FillColor.$clone());FaceUI.Entities.Entity.prototype.DrawEntity.call(this,spriteBatch,phase)},DoOnMouseWheelScroll:function(){this._isMouseOver&&(this.Value=this._value+Bridge.Int.mul(this.MouseInput.FaceUI$IMouseInput$MouseWheelChange,this.GetStepSize())|0)}}});Bridge.define("FaceUI.Entities.StyleSheet",{inherits:[System.Collections.Generic.Dictionary$2(System.String,FaceUI.DataTypes.StyleProperty)],statics:{fields:{stateAsString:null,_identifiersCache:null},ctors:{init:function(){this.stateAsString=System.Array.init(["Default","MouseHover","MouseDown"],System.String);this._identifiersCache=new(System.Collections.Generic.Dictionary$2(System.Collections.Generic.KeyValuePair$2(System.String,FaceUI.Entities.EntityState),System.String))(null,new FaceUI.Entities.StyleSheet.StringEntityStateKvpComparer)},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.StyleSheet)}}},methods:{getPropertyFullId:function(property,state){var $t,pair=new(System.Collections.Generic.KeyValuePair$2(System.String,FaceUI.Entities.EntityState).$ctor1)(property,state),fullPropertyIdentifier;return FaceUI.Entities.StyleSheet._identifiersCache.containsKey(pair)?FaceUI.Entities.StyleSheet._identifiersCache.get(pair):(fullPropertyIdentifier=new System.Text.StringBuilder(FaceUI.Entities.StyleSheet.stateAsString[System.Array.index(state,FaceUI.Entities.StyleSheet.stateAsString)]),fullPropertyIdentifier.append(String.fromCharCode(46)),fullPropertyIdentifier.append(property),$t=fullPropertyIdentifier.toString(),FaceUI.Entities.StyleSheet._identifiersCache.set(pair,$t),$t)},getStyleProperty:function(property,state,fallbackToDefault){state===void 0&&(state=0);fallbackToDefault===void 0&&(fallbackToDefault=!0);var ret={v:new FaceUI.DataTypes.StyleProperty},gotVal=this.tryGetValue(this.getPropertyFullId(property,state),ret);return!gotVal&&state!==FaceUI.Entities.EntityState.Default&&fallbackToDefault?this.getStyleProperty(property,FaceUI.Entities.EntityState.Default):ret.v.$clone()},setStyleProperty:function(property,value,state){state===void 0&&(state=0);this.set(this.getPropertyFullId(property,state),value.$clone())},updateFrom:function(other){var $t,de;$t=Bridge.getEnumerator(other);try{while($t.moveNext())de=$t.Current,this.set(de.key,de.value.$clone())}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}}});Bridge.define("FaceUI.Entities.StyleSheet.StringEntityStateKvpComparer",{inherits:[System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.KeyValuePair$2(System.String,FaceUI.Entities.EntityState))],$kind:"nested struct",statics:{methods:{getDefaultValue:function(){return new FaceUI.Entities.StyleSheet.StringEntityStateKvpComparer}}},alias:["equals2",["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$KeyValuePair$2$System$String$FaceUI$Entities$EntityState$equals2","System$Collections$Generic$IEqualityComparer$1$equals2"],"getHashCode2",["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$KeyValuePair$2$System$String$FaceUI$Entities$EntityState$getHashCode2","System$Collections$Generic$IEqualityComparer$1$getHashCode2"]],ctors:{ctor:function(){this.$initialize()}},methods:{equals2:function(x,y){return Bridge.referenceEquals(x.key,y.key)&&x.value===y.value},getHashCode2:function(obj){var hashCode=0;return hashCode=Bridge.Int.mul(hashCode,397)^(obj.key!=null?Bridge.getHashCode(obj.key):0),Bridge.Int.mul(hashCode,397)^Bridge.getHashCode(obj.value)},$clone:function(to){return this}}});Bridge.define("FaceUI.Entities.TextValidators.OnlySingleSpaces",{inherits:[FaceUI.Entities.TextValidators.ITextValidator],statics:{ctors:{ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.TextValidators.OnlySingleSpaces)}}},methods:{ValidateText:function(text,oldText){return!System.String.contains(text.v,"  ")&&!System.String.contains(text.v,"\t")}}});Bridge.define("FaceUI.Entities.TextValidators.SlugValidator",{inherits:[FaceUI.Entities.TextValidators.ITextValidator],statics:{fields:{_slugNoSpaces:null,_slugWithSpaces:null},ctors:{init:function(){this._slugNoSpaces=new System.Text.RegularExpressions.Regex.ctor("^[a-zA-Z\\-_0-9]+$");this._slugWithSpaces=new System.Text.RegularExpressions.Regex.ctor("^[a-zA-Z\\-_\\ 0-9]+$")},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.TextValidators.SlugValidator)}}},fields:{_regex:null,_allowSpaces:!1},props:{AllowSpaces:{get:function(){return this._allowSpaces},set:function(value){this._allowSpaces=value;this._regex=this._allowSpaces?FaceUI.Entities.TextValidators.SlugValidator._slugWithSpaces:FaceUI.Entities.TextValidators.SlugValidator._slugNoSpaces}}},ctors:{$ctor1:function(allowSpaces){this.$initialize();FaceUI.Entities.TextValidators.ITextValidator.ctor.call(this);this.AllowSpaces=this.AllowSpaces},ctor:function(){FaceUI.Entities.TextValidators.SlugValidator.$ctor1.call(this,!1)}},methods:{ValidateText:function(text,oldText){return text.v.length===0||this._regex.isMatch(text.v)}}});Bridge.define("FaceUI.Entities.TextValidators.TextValidatorEnglishCharsOnly",{inherits:[FaceUI.Entities.TextValidators.ITextValidator],statics:{fields:{_slugNoSpaces:null,_slugWithSpaces:null},ctors:{init:function(){this._slugNoSpaces=new System.Text.RegularExpressions.Regex.ctor("^[a-zA-Z|]+$");this._slugWithSpaces=new System.Text.RegularExpressions.Regex.ctor("^[a-zA-Z|\\ ]+$")},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.TextValidators.TextValidatorEnglishCharsOnly)}}},fields:{_regex:null,_allowSpaces:!1},props:{AllowSpaces:{get:function(){return this._allowSpaces},set:function(value){this._allowSpaces=value;this._regex=this._allowSpaces?FaceUI.Entities.TextValidators.TextValidatorEnglishCharsOnly._slugWithSpaces:FaceUI.Entities.TextValidators.TextValidatorEnglishCharsOnly._slugNoSpaces}}},ctors:{$ctor1:function(allowSpaces){this.$initialize();FaceUI.Entities.TextValidators.ITextValidator.ctor.call(this);this.AllowSpaces=allowSpaces},ctor:function(){FaceUI.Entities.TextValidators.TextValidatorEnglishCharsOnly.$ctor1.call(this,!1)}},methods:{ValidateText:function(text,oldText){return text.v.length===0||this._regex.isMatch(text.v)}}});Bridge.define("FaceUI.Entities.TextValidators.TextValidatorMakeTitle",{inherits:[FaceUI.Entities.TextValidators.ITextValidator],statics:{ctors:{ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.TextValidators.TextValidatorMakeTitle)}}},methods:{ValidateText:function(text,oldText){return text.v.length>0&&(text.v=text.v.toLowerCase(),text.v=(String.fromCharCode(text.v.charCodeAt(0)).toUpperCase()||"")+(System.String.remove(text.v,0,1)||"")),!0}}});Bridge.define("FaceUI.Entities.TextValidators.TextValidatorNumbersOnly",{inherits:[FaceUI.Entities.TextValidators.ITextValidator],statics:{ctors:{ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.TextValidators.TextValidatorNumbersOnly)}}},fields:{AllowDecimalPoint:!1,Min:null,Max:null},ctors:{$ctor1:function(allowDecimal,min,max){min===void 0&&(min=null);max===void 0&&(max=null);this.$initialize();FaceUI.Entities.TextValidators.ITextValidator.ctor.call(this);this.AllowDecimalPoint=allowDecimal;this.Min=min;this.Max=max},ctor:function(){FaceUI.Entities.TextValidators.TextValidatorNumbersOnly.$ctor1.call(this,!1)}},methods:{ValidateText:function(text,oldText){var num,temp;if(text.v.length===0)return!0;if(num={},this.AllowDecimalPoint){if(!System.Double.tryParse(text.v,null,num))return!1}else{if(temp={},!System.Int32.tryParse(text.v,temp))return!1;num.v=temp.v}return this.Min!=null&&num.v<System.Nullable.getValue(this.Min)&&(text.v=System.Nullable.toString(this.Min,function($t){return System.Double.format($t)})),this.Max!=null&&num.v>System.Nullable.getValue(this.Max)&&(text.v=System.Nullable.toString(this.Max,function($t){return System.Double.format($t)})),!0}}});Bridge.define("FaceUI.PipelineImporter.DefaultStylesReader",{inherits:[Microsoft.Xna.Framework.Content.ContentTypeReader$1(FaceUI.DataTypes.DefaultStylesList)],methods:{Read$1:function(reader,existingInstance){for(var $t,result=($t=new FaceUI.DataTypes.DefaultStylesList,$t.Styles=System.Array.init(reader.ReadInt32(),null,FaceUI.DataTypes.DefaultStyles),$t),i=0;i<result.Styles.length;i=i+1|0)result.Styles[System.Array.index(i,result.Styles)]=this.Read$2(reader);return result},Read$2:function(reader){var result=new FaceUI.DataTypes.DefaultStyles;return reader.ReadBoolean()&&(result.Scale=reader.ReadSingle()),reader.ReadBoolean()&&(result.FillColor=new Microsoft.Xna.Framework.Color.$ctor10(reader.ReadUInt32())),reader.ReadBoolean()&&(result.OutlineColor=new Microsoft.Xna.Framework.Color.$ctor10(reader.ReadUInt32())),reader.ReadBoolean()&&(result.OutlineWidth=reader.ReadInt32()),reader.ReadBoolean()&&(result.ForceAlignCenter=reader.ReadBoolean()),reader.ReadBoolean()&&(result.FontStyle=reader.ReadInt32()),reader.ReadBoolean()&&(result.SelectedHighlightColor=new Microsoft.Xna.Framework.Color.$ctor10(reader.ReadUInt32())),reader.ReadBoolean()&&(result.ShadowColor=new Microsoft.Xna.Framework.Color.$ctor10(reader.ReadUInt32())),reader.ReadBoolean()&&(result.ShadowOffset=new Microsoft.Xna.Framework.Vector2.$ctor2(reader.ReadSingle(),reader.ReadSingle())),reader.ReadBoolean()&&(result.Padding=new Microsoft.Xna.Framework.Vector2.$ctor2(reader.ReadSingle(),reader.ReadSingle())),reader.ReadBoolean()&&(result.SpaceBefore=new Microsoft.Xna.Framework.Vector2.$ctor2(reader.ReadSingle(),reader.ReadSingle())),reader.ReadBoolean()&&(result.SpaceAfter=new Microsoft.Xna.Framework.Vector2.$ctor2(reader.ReadSingle(),reader.ReadSingle())),reader.ReadBoolean()&&(result.ShadowScale=reader.ReadSingle()),reader.ReadBoolean()&&(result.DefaultSize=new Microsoft.Xna.Framework.Vector2.$ctor2(reader.ReadSingle(),reader.ReadSingle())),result}}});Bridge.define("FaceUI.Utils.DefaultGraphicDeviceWrapper",{inherits:[FaceUI.Utils.GraphicDeviceWrapper],fields:{graphicDevice:null},props:{GraphicDevice:{get:function(){return this.graphicDevice},set:function(value){this.graphicDevice=value;this.PresentationParameters.BackBufferFormat=value.PresentationParameters.BackBufferFormat;this.PresentationParameters.DepthStencilFormat=value.PresentationParameters.DepthStencilFormat}},GraphicsDevice:{get:function(){return this.GraphicDevice}},PresentationParameters:null,Viewport:{get:function(){return this.GraphicDevice.Viewport.Bounds.$clone()}}},ctors:{init:function(){this.PresentationParameters=new FaceUI.Utils.PresentationParametersWrapper}},methods:{Clear:function(color){this.GraphicDevice.Clear(color.$clone())},SetRenderTarget:function(target){this.GraphicDevice.SetRenderTarget(target)}}});Bridge.define("FaceUI.Utils.DefaultSpriteBatchWrapper",{inherits:[FaceUI.Utils.ISpriteBatchWrapper],props:{Spritebatch:null,GraphicsDevice:null},alias:["Begin","FaceUI$Utils$ISpriteBatchWrapper$Begin","End","FaceUI$Utils$ISpriteBatchWrapper$End","Draw","FaceUI$Utils$ISpriteBatchWrapper$Draw","Draw$1","FaceUI$Utils$ISpriteBatchWrapper$Draw$1","DrawString","FaceUI$Utils$ISpriteBatchWrapper$DrawString","GraphicsDevice","FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice"],methods:{Begin:function(sortMode,blendState,samplerState,depthStencilState,rasterizerState,effect,transformMatrix){sortMode===void 0&&(sortMode=0);blendState===void 0&&(blendState=null);samplerState===void 0&&(samplerState=null);depthStencilState===void 0&&(depthStencilState=null);rasterizerState===void 0&&(rasterizerState=null);effect===void 0&&(effect=null);transformMatrix===void 0&&(transformMatrix=null);this.Spritebatch.Begin(sortMode,blendState,samplerState,depthStencilState,rasterizerState,effect,System.Nullable.lift1("$clone",transformMatrix))},End:function(){this.Spritebatch.End()},Draw:function(texture,destRect,color){this.Spritebatch.Draw(texture,destRect.$clone(),color.$clone())},Draw$1:function(texture,destRect,srcRect,color){this.Spritebatch.Draw$1(texture,destRect.$clone(),srcRect.$clone(),color.$clone())},DrawString:function(spriteFont,text,position,color,rotation,origin,scalef,effects,layerDepth){this.Spritebatch.DrawString$2(spriteFont,text,position.$clone(),color.$clone(),rotation,origin.$clone(),scalef,effects,layerDepth)}}});Bridge.define("FaceUI.Entities.Header",{inherits:[FaceUI.Entities.Paragraph],statics:{fields:{DefaultStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.Header)}}},ctors:{$ctor1:function(text,anchor,offset){anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Paragraph.$ctor2.call(this,text,anchor,void 0,offset,void 0);this.UpdateStyle(FaceUI.Entities.Header.DefaultStyle)},ctor:function(){FaceUI.Entities.Header.$ctor1.call(this,"")}}});Bridge.define("FaceUI.Entities.Icon",{inherits:[FaceUI.Entities.Image],statics:{fields:{DefaultStyle:null,BackgroundSize:0},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet;this.BackgroundSize=10},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.Icon)}}},fields:{DrawBackground:!1,_icon:0},props:{IconType:{get:function(){return this._icon},set:function(value){this.Texture=FaceUI.Resources.IconTextures.getItem(value);this._icon=value}}},ctors:{init:function(){this.DrawBackground=!1},$ctor1:function(icon,anchor,scale,background,offset){anchor===void 0&&(anchor=9);scale===void 0&&(scale=1);background===void 0&&(background=!1);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Image.$ctor1.call(this,null,FaceUI.Entities.Entity.USE_DEFAULT_SIZE.$clone(),FaceUI.Entities.ImageDrawMode.Stretch,anchor,offset);this.Scale=scale;this.DrawBackground=background;this.IconType=icon;this.SetStyleProperty("BackgroundColor",new FaceUI.DataTypes.StyleProperty.$ctor1(Microsoft.Xna.Framework.Color.White.$clone()));background&&(this.SpaceAfter=Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.One.$clone(),FaceUI.Entities.Icon.BackgroundSize));this.UpdateStyle(FaceUI.Entities.Icon.DefaultStyle)},ctor:function(){FaceUI.Entities.Icon.$ctor1.call(this,FaceUI.Entities.IconType.Apple)}},methods:{DrawEntity:function(spriteBatch,phase){var backColor,dest;if(this.DrawBackground){backColor=Microsoft.Xna.Framework.Color.White.$clone();switch(phase){case FaceUI.Entities.DrawPhase.Base:backColor=this.GetActiveStyle("BackgroundColor").asColor.$clone();break;case FaceUI.Entities.DrawPhase.Outline:backColor=this.OutlineColor.$clone();break;case FaceUI.Entities.DrawPhase.Shadow:backColor=this.ShadowColor.$clone();break}dest=this._destRect.$clone();dest.X=dest.X-(Bridge.Int.div(FaceUI.Entities.Icon.BackgroundSize,2)|0)|0;dest.Y=dest.Y-(Bridge.Int.div(FaceUI.Entities.Icon.BackgroundSize,2)|0)|0;dest.Width=dest.Width+FaceUI.Entities.Icon.BackgroundSize|0;dest.Height=dest.Height+FaceUI.Entities.Icon.BackgroundSize|0;FaceUI.UserInterface.Active.DrawUtils.DrawImage(spriteBatch,FaceUI.Resources.IconBackgroundTexture,dest.$clone(),backColor.$clone())}FaceUI.Entities.Image.prototype.DrawEntity.call(this,spriteBatch,phase)}}});Bridge.define("FaceUI.Entities.Label",{inherits:[FaceUI.Entities.Paragraph],statics:{fields:{DefaultStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.Label)}}},ctors:{$ctor1:function(text,anchor,size,offset){anchor===void 0&&(anchor=9);size===void 0&&(size=null);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Paragraph.$ctor2.call(this,text,anchor,size,offset,void 0);this.UpdateStyle(FaceUI.Entities.Label.DefaultStyle)},ctor:function(){FaceUI.Entities.Label.$ctor1.call(this,"")}}});Bridge.define("FaceUI.Entities.Panel",{inherits:[FaceUI.Entities.PanelBase],statics:{fields:{DefaultStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.Panel)}}},fields:{_overflowMode:0,_scrollbar:null,_renderTarget:null,_originalInternalDestRect:null},props:{Scrollbar:{get:function(){return this._scrollbar}},PanelOverflowBehavior:{get:function(){return this._overflowMode},set:function(value){this._overflowMode=value;this.UpdateOverflowMode()}},OverflowScrollVal:{get:function(){return this._scrollbar==null?Microsoft.Xna.Framework.Point.Zero:new Microsoft.Xna.Framework.Point.$ctor2(0,this._scrollbar.Value)}}},ctors:{init:function(){this._originalInternalDestRect=new Microsoft.Xna.Framework.Rectangle;this._overflowMode=FaceUI.Entities.PanelOverflowBehavior.Overflow},$ctor1:function(size,skin,anchor,offset){skin===void 0&&(skin=0);anchor===void 0&&(anchor=0);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.PanelBase.$ctor1.call(this,size,skin,anchor,offset);this.UpdateStyle(FaceUI.Entities.Panel.DefaultStyle);size.Y===-1&&(this.AdjustHeightAutomatically=!0)},ctor:function(){FaceUI.Entities.Panel.$ctor1.call(this,new Microsoft.Xna.Framework.Vector2.$ctor2(500,500))}},methods:{CalcDestRect:function(){return this.AdjustHeightAutomatically&&this.Size.Y<=0&&(this._size.Y=1),FaceUI.Entities.PanelBase.prototype.CalcDestRect.call(this)},InitAfterDeserialize:function(){FaceUI.Entities.PanelBase.prototype.InitAfterDeserialize.call(this);var scrollbar=this.Find(FaceUI.Entities.VerticalScrollbar,"__scrollbar");scrollbar!=null&&this.RemoveChild(scrollbar);this.UpdateOverflowMode()},Dispose:function(){this.DisposeRenderTarget()},GetRenderTargetRect:function(){var ret=this._destRectInternal.$clone();return ret.Width=ret.Width+Bridge.Int.mul(this.GetScrollbarWidth(),2)|0,ret.$clone()},BeforeDrawChildren:function(spriteBatch){this._overflowMode===FaceUI.Entities.PanelOverflowBehavior.Overflow?this.DisposeRenderTarget():this.UpdatePanelRenderTarget(spriteBatch)},SetHeightBasedOnChildren:function(){if(this.PanelOverflowBehavior===FaceUI.Entities.PanelOverflowBehavior.VerticalScroll)throw new FaceUI.Exceptions.InvalidStateException.$ctor1("Cannot set panel height automatically while having vertical scrollbar!");return FaceUI.Entities.PanelBase.prototype.SetHeightBasedOnChildren.call(this)},UpdatePanelRenderTarget:function(spriteBatch){var targetRect=this.GetRenderTargetRect();(this._renderTarget==null||this._renderTarget.Width!==targetRect.Width||this._renderTarget.Height!==targetRect.Height)&&(this.DisposeRenderTarget(),this._renderTarget=new Microsoft.Xna.Framework.Graphics.RenderTarget2D.$ctor2(FaceUI.Utils.GraphicDeviceWrapper.op_Implicit(spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice),targetRect.Width,targetRect.Height,!1,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.PresentationParameters.BackBufferFormat,spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.PresentationParameters.DepthStencilFormat,0,Microsoft.Xna.Framework.Graphics.RenderTargetUsage.PreserveContents));spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.SetRenderTarget(this._renderTarget);spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$GraphicsDevice.Clear(Microsoft.Xna.Framework.Color.Transparent.$clone());FaceUI.UserInterface.Active.DrawUtils.PushRenderTarget(this._renderTarget);this._originalInternalDestRect=this._destRectInternal.$clone();this._destRectInternal.X=2;this._destRectInternal.Y=2;this._destRectInternal.Width=this._destRectInternal.Width-2|0;this._destRectInternal.Height=this._destRectInternal.Height-2|0;this._overflowMode===FaceUI.Entities.PanelOverflowBehavior.VerticalScroll&&(this._destRectInternal.Y=this._destRectInternal.Y-this._scrollbar.Value|0,this._scrollbar.Anchor=FaceUI.Entities.Anchor.CenterLeft,this._scrollbar.Offset=Microsoft.Xna.Framework.Vector2.op_Division$1(new Microsoft.Xna.Framework.Vector2.$ctor2(this._destRectInternal.Width+5|0,-this._destRectInternal.Y|0),this.GlobalScale),this._scrollbar.Parent!=null?this._scrollbar.BringToFront():this.AddChild(this._scrollbar));this.ClearDirtyFlag(!0)},CalcInternalRect:function(){return FaceUI.Entities.PanelBase.prototype.CalcInternalRect.call(this),this._destRectInternal.Width=this._destRectInternal.Width-this.GetScrollbarWidth()|0,this._destRectInternal.$clone()},GetScrollbarWidth:function(){return this._scrollbar!=null?this._scrollbar.GetActualDestRect().Width:0},AfterDrawChildren:function(spriteBatch){this._overflowMode!==FaceUI.Entities.PanelOverflowBehavior.Overflow&&(this._destRectInternal=this._originalInternalDestRect.$clone(),this._destRectVersion=this._destRectVersion+1>>>0,this._renderTarget!=null&&(FaceUI.UserInterface.Active.DrawUtils.PopRenderTarget(),FaceUI.UserInterface.Active.DrawUtils.StartDraw(spriteBatch,this.IsDisabled()),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$Draw(this._renderTarget,this.GetRenderTargetRect(),Microsoft.Xna.Framework.Color.White.$clone()),FaceUI.UserInterface.Active.DrawUtils.EndDraw(spriteBatch),this._scrollbar!=null&&(this._destRectInternal.Y=this._destRectInternal.Y-this._scrollbar.Value|0,this._destRectInternal.Width=this._destRectInternal.Width-this._scrollbar.GetActualDestRect().Width|0,this._scrollbar.UpdateDestinationRects(),this._destRectInternal=this._originalInternalDestRect.$clone())))},UpdateOverflowMode:function(){var $t,prev_needToSortChildren;this._overflowMode===FaceUI.Entities.PanelOverflowBehavior.VerticalScroll?this._scrollbar==null&&(this._scrollbar=($t=new FaceUI.Entities.VerticalScrollbar.$ctor1(0,0,FaceUI.Entities.Anchor.TopRight),$t.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone(),$t.AdjustMaxAutomatically=!0,$t.Identifier="__scrollbar",$t._hiddenInternalEntity=!0,$t),prev_needToSortChildren=this._needToSortChildren,this.AddChild(this._scrollbar),this._needToSortChildren=prev_needToSortChildren):this._scrollbar!=null&&this._scrollbar.RemoveFromParent()},DisposeRenderTarget:function(){this._renderTarget!=null&&(this._renderTarget.Dispose(),this._renderTarget=null)},UpdateChildren:function(targetEntity,dragTargetEntity,wasEventHandled,scrollVal){var $t,skipChildren=!1,mousePos,child;if(this._overflowMode!==FaceUI.Entities.PanelOverflowBehavior.Overflow&&(mousePos=this.GetMousePos(),(mousePos.X<this._destRectInternal.Left||mousePos.X>this._destRectInternal.Right||mousePos.Y<this._destRectInternal.Top||mousePos.Y>this._destRectInternal.Bottom)&&(skipChildren=!0)),this._scrollbar!=null&&(this._scrollbar.Enabled=!1),skipChildren){$t=Bridge.getEnumerator(this._children);try{while($t.moveNext())child=$t.Current,child.UpdateAnimators(!0)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}else FaceUI.Entities.PanelBase.prototype.UpdateChildren.call(this,targetEntity,dragTargetEntity,wasEventHandled,scrollVal.$clone());this._scrollbar!=null&&(this._scrollbar.Enabled=!0,this._scrollbar.Update(targetEntity,dragTargetEntity,wasEventHandled,Microsoft.Xna.Framework.Point.op_Subtraction(scrollVal.$clone(),this.OverflowScrollVal.$clone())))}}});Bridge.define("FaceUI.Entities.ProgressBar",{inherits:[FaceUI.Entities.Slider],statics:{fields:{DefaultStyle:null,DefaultFillStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet;this.DefaultFillStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.ProgressBar)}}},fields:{ProgressFill:null,Caption:null},ctors:{$ctor2:function(min,max,size,anchor,offset){anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Slider.$ctor2.call(this,min,max,size,FaceUI.Entities.SliderSkin.Default,anchor,offset);this.UpdateStyle(FaceUI.Entities.ProgressBar.DefaultStyle);FaceUI.UserInterface.Active._isDeserializing||(this.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone(),this.ProgressFill=new FaceUI.Entities.Image.$ctor1(FaceUI.Resources.ProgressBarFillTexture,Microsoft.Xna.Framework.Vector2.Zero.$clone(),FaceUI.Entities.ImageDrawMode.Stretch,FaceUI.Entities.Anchor.CenterLeft),this.ProgressFill.UpdateStyle(FaceUI.Entities.ProgressBar.DefaultFillStyle),this.ProgressFill._hiddenInternalEntity=!0,this.ProgressFill.Identifier="_progress_fill",this.AddChild(this.ProgressFill,!0),this.Caption=new FaceUI.Entities.Label.$ctor1("",FaceUI.Entities.Anchor.Center),this.Caption.ClickThrough=!0,this.Caption._hiddenInternalEntity=!0,this.Caption.Identifier="_progress_caption",this.AddChild(this.Caption))},$ctor1:function(min,max,anchor,offset){anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);FaceUI.Entities.ProgressBar.$ctor2.call(this,min,max,FaceUI.Entities.Entity.USE_DEFAULT_SIZE.$clone(),anchor,offset)},ctor:function(){FaceUI.Entities.ProgressBar.$ctor1.call(this,0,10)}},methods:{InitAfterDeserialize:function(){FaceUI.Entities.Slider.prototype.InitAfterDeserialize.call(this);this.Caption=this.Find(FaceUI.Entities.Label,"_progress_caption",!1);this.Caption._hiddenInternalEntity=!0;this.ProgressFill=this.Find(FaceUI.Entities.Image,"_progress_fill");this.ProgressFill._hiddenInternalEntity=!0},DrawEntity:function(spriteBatch,phase){var progressbarFrameWidth=FaceUI.Resources.ProgressBarData.FrameWidth,barTexture=FaceUI.Resources.ProgressBarTexture,markWidth;FaceUI.UserInterface.Active.DrawUtils.DrawSurface(spriteBatch,barTexture,this._destRect.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(progressbarFrameWidth,0),1,this.FillColor.$clone());var frameSizeTexture=new Microsoft.Xna.Framework.Vector2.$ctor2(barTexture.Width*progressbarFrameWidth,barTexture.Height),frameSizeRender=frameSizeTexture.$clone(),ScaleXfac=this._destRect.Height/frameSizeRender.Y;this._frameActualWidth=progressbarFrameWidth*barTexture.Width*ScaleXfac;markWidth=Bridge.Int.clip32((this._destRect.Width-this._frameActualWidth*2)*this.GetValueAsPercent());this.ProgressFill.Offset=new Microsoft.Xna.Framework.Vector2.$ctor2(this._frameActualWidth/this.GlobalScale,0);this.ProgressFill.Size=Microsoft.Xna.Framework.Vector2.op_Division$1(new Microsoft.Xna.Framework.Vector2.$ctor2(markWidth,this._destRectInternal.Height),this.GlobalScale);this.ProgressFill.Visible=markWidth>0}}});Bridge.define("FaceUI.Entities.RadioButton",{inherits:[FaceUI.Entities.CheckBox],statics:{fields:{DefaultStyle:null,DefaultParagraphStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet;this.DefaultParagraphStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.RadioButton)}}},fields:{CanUncheck:!1},ctors:{init:function(){this.CanUncheck=!1},$ctor1:function(text,anchor,size,offset,isChecked){anchor===void 0&&(anchor=9);size===void 0&&(size=null);offset===void 0&&(offset=null);isChecked===void 0&&(isChecked=!1);this.$initialize();FaceUI.Entities.CheckBox.$ctor1.call(this,text,anchor,size,offset,isChecked);this.UpdateStyle(FaceUI.Entities.RadioButton.DefaultStyle);this.TextParagraph!=null&&this.TextParagraph.UpdateStyle(FaceUI.Entities.RadioButton.DefaultParagraphStyle)},ctor:function(){FaceUI.Entities.RadioButton.$ctor1.call(this,"")}},methods:{GetTexture:function(){var state=this._entityState;return state!==FaceUI.Entities.EntityState.MouseDown&&this.Checked&&(state=FaceUI.Entities.EntityState.MouseDown),FaceUI.Resources.RadioTextures.getItem(state)},DoOnValueChange:function(){var $t,entity,radio;if(this.Checked){if(this._parent!=null){$t=Bridge.getEnumerator(this._parent._children);try{while($t.moveNext())(entity=$t.Current,Bridge.referenceEquals(entity,this))||Bridge.is(entity,FaceUI.Entities.RadioButton)&&(radio=Bridge.cast(entity,FaceUI.Entities.RadioButton),radio.Checked&&(radio.Checked=!1))}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}FaceUI.Entities.CheckBox.prototype.DoOnValueChange.call(this)}},DoOnClick:function(){FaceUI.Entities.CheckBox.prototype.DoOnClick.call(this);this.CanUncheck||(this.Checked=!0)}}});Bridge.define("FaceUI.Entities.RichParagraph",{inherits:[FaceUI.Entities.Paragraph],statics:{fields:{DefaultStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.RichParagraph)}}},fields:{PerCharacterManipulators:null,_enableStyleInstructions:!1,_needUpdateStyleInstructions:!1,_styleInstructions:null},props:{EnableStyleInstructions:{get:function(){return this._enableStyleInstructions},set:function(value){this._enableStyleInstructions=value;this._needUpdateStyleInstructions=!0}},Text:{get:function(){return this._text},set:function(value){Bridge.referenceEquals(this._text,value)||(this._text=value,this.MarkAsDirty(),this.EnableStyleInstructions&&(this._needUpdateStyleInstructions=!0))}}},ctors:{init:function(){this._enableStyleInstructions=!0;this._needUpdateStyleInstructions=!0;this._styleInstructions=new(System.Collections.Generic.Dictionary$2(System.Int32,FaceUI.Entities.RichParagraphStyleInstruction))},$ctor2:function(text,anchor,size,offset,scale){anchor===void 0&&(anchor=9);size===void 0&&(size=null);offset===void 0&&(offset=null);scale===void 0&&(scale=null);this.$initialize();FaceUI.Entities.Paragraph.$ctor2.call(this,text,anchor,size,offset,scale)},ctor:function(){FaceUI.Entities.RichParagraph.$ctor2.call(this,"")},$ctor1:function(text,anchor,color,scale,size,offset){scale===void 0&&(scale=null);size===void 0&&(size=null);offset===void 0&&(offset=null);this.$initialize();FaceUI.Entities.Paragraph.$ctor1.call(this,text,anchor,color,scale,size,offset)}},methods:{InitAfterDeserialize:function(){FaceUI.Entities.Paragraph.prototype.InitAfterDeserialize.call(this);this._needUpdateStyleInstructions=!0},ParseStyleInstructions:function(){var $t,iLastLength,oMatches;if(this._styleInstructions.clear(),!this.EnableStyleInstructions){this._needUpdateStyleInstructions=!1;return}var openingDenote=FaceUI.Entities.RichParagraphStyleInstruction._styleInstructionsOpening,closingDenote=FaceUI.Entities.RichParagraphStyleInstruction._styleInstructionsClosing,denotesLength=openingDenote.length+closingDenote.length|0;if(System.String.contains(this._text,openingDenote)){iLastLength=0;oMatches=FaceUI.Entities.RichParagraphStyleInstruction._styleInstructionsRegex.matches(this._text);$t=Bridge.getEnumerator(oMatches);try{while($t.moveNext()){var oMatch=Bridge.cast($t.Current,System.Text.RegularExpressions.Match),key=oMatch.getValue().substr(openingDenote.length,oMatch.getValue().length-denotesLength|0),sColor=oMatch.getValue().substr(openingDenote.length,oMatch.getValue().length-denotesLength|0);this._styleInstructions.set(oMatch.getIndex()-iLastLength|0,FaceUI.Entities.RichParagraphStyleInstruction._instructions.get(key).$clone());iLastLength=iLastLength+oMatch.getValue().length|0}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}this._text=FaceUI.Entities.RichParagraphStyleInstruction._styleInstructionsRegex.replace(this._text,"")}this._needUpdateStyleInstructions=!1},DrawEntityOutline:function(spriteBatch){},DrawEntity:function(spriteBatch,phase){var $t,currCharacter,styleInstruction,currText,offset;if(this._needUpdateStyleInstructions&&(this.ParseStyleInstructions(),this.UpdateDestinationRects()),this._styleInstructions.count>0||!Bridge.staticEquals(this.PerCharacterManipulators,null)){var iTextIndex=0,currColor={v:Microsoft.Xna.Framework.Color.White.$clone()},currOutlineColor={v:Microsoft.Xna.Framework.Color.Black.$clone()},currFont=null,characterSize=this.GetCharacterActualSize(),currPosition=new Microsoft.Xna.Framework.Vector2.$ctor2(this._position.X-characterSize.X,this._position.Y),currOutlineWidth={v:0},ResetToDefaults=Bridge.fn.bind(this,function(){currColor.v=FaceUI.UserInterface.Active.DrawUtils.FixColorOpacity(this.FillColor.$clone());currFont=this._currFont;currOutlineWidth.v=this.OutlineWidth;currOutlineColor.v=FaceUI.UserInterface.Active.DrawUtils.FixColorOpacity(this.OutlineColor.$clone());characterSize=this.GetCharacterActualSize()});ResetToDefaults();$t=Bridge.getEnumerator(this._processedText);try{while($t.moveNext())currCharacter=$t.Current,styleInstruction={v:new FaceUI.Entities.RichParagraphStyleInstruction},this._styleInstructions.tryGetValue(iTextIndex,styleInstruction)&&(styleInstruction.v.ResetStyles&&ResetToDefaults(),System.Nullable.hasValue(styleInstruction.v.FillColor)&&(currColor.v=FaceUI.UserInterface.Active.DrawUtils.FixColorOpacity(System.Nullable.getValue(styleInstruction.v.FillColor).$clone())),System.Nullable.hasValue(styleInstruction.v.FontStyle)&&(currFont=FaceUI.Resources.Fonts[System.Array.index(System.Nullable.getValue(styleInstruction.v.FontStyle),FaceUI.Resources.Fonts)]),System.Nullable.hasValue(styleInstruction.v.OutlineWidth)&&(currOutlineWidth.v=System.Nullable.getValue(styleInstruction.v.OutlineWidth)),System.Nullable.hasValue(styleInstruction.v.OutlineColor)&&(currOutlineColor.v=FaceUI.UserInterface.Active.DrawUtils.FixColorOpacity(System.Nullable.getValue(styleInstruction.v.OutlineColor).$clone()))),currCharacter===10?(currPosition.X=this._position.X-characterSize.X,currPosition.Y+=currFont.LineSpacing*this._actualScale):(iTextIndex=iTextIndex+1|0,currPosition.X+=characterSize.X),currText=FaceUI.Resources.GetStringForChar(currCharacter),offset={v:Microsoft.Xna.Framework.Vector2.Zero.$clone()},Bridge.staticEquals(this.PerCharacterManipulators,null)||this.PerCharacterManipulators(this,currCharacter,iTextIndex,currColor,currOutlineColor,currOutlineWidth,offset,Bridge.ref(this,"_actualScale")),this.DrawTextOutline$1(spriteBatch,currText,currOutlineWidth.v,currFont,this._actualScale,Microsoft.Xna.Framework.Vector2.op_Addition(currPosition.$clone(),offset.v.$clone()),currOutlineColor.v.$clone(),this._fontOrigin.$clone()),spriteBatch.FaceUI$Utils$ISpriteBatchWrapper$DrawString(currFont,currText,Microsoft.Xna.Framework.Vector2.op_Addition(currPosition.$clone(),offset.v.$clone()),currColor.v.$clone(),0,this._fontOrigin.$clone(),this._actualScale,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,.5)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}else FaceUI.Entities.Paragraph.prototype.DrawEntity.call(this,spriteBatch,phase)}}});Bridge.define("FaceUI.Entities.SelectList",{inherits:[FaceUI.Entities.PanelBase],statics:{fields:{DefaultParagraphStyle:null,DefaultStyle:null},ctors:{init:function(){this.DefaultParagraphStyle=new FaceUI.Entities.StyleSheet;this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.SelectList)}}},fields:{_value:null,_index:0,_prevSize:null,_paragraphs:null,_scrollbar:null,_hadResizeWhileNotVisible:!1,ExtraSpaceBetweenLines:0,ItemsScale:0,OnListChange:null,ClipTextIfOverflow:!1,AddWhenClipping:null,LockSelection:!1,LockedItems:null,_list:null,AllowReselectValue:!1,MaxItems:0},props:{Items:{get:function(){return this._list.ToArray()},set:function(value){this._list.clear();this._list.AddRange(value);this.OnListChanged()}},Count:{get:function(){return this._list.Count}},Empty:{get:function(){return this._list.Count===0}},SelectedValue:{get:function(){return this._value},set:function(value){this.Select$1(value)}},SelectedIndex:{get:function(){return this._index},set:function(value){this.Select(value)}},ScrollPosition:{get:function(){return this._scrollbar.Value},set:function(value){this._scrollbar.Value=value}},HasSelectedValue:{get:function(){return this.SelectedIndex!==-1}}},ctors:{init:function(){this._prevSize=new Microsoft.Xna.Framework.Point;this._index=-1;this._prevSize=Microsoft.Xna.Framework.Point.Zero.$clone();this._paragraphs=new(System.Collections.Generic.List$1(FaceUI.Entities.Paragraph).ctor);this._hadResizeWhileNotVisible=!1;this.ExtraSpaceBetweenLines=0;this.ItemsScale=1;this.ClipTextIfOverflow=!0;this.AddWhenClipping="..";this.LockSelection=!1;this.LockedItems=new(System.Collections.Generic.Dictionary$2(System.Int32,System.Boolean));this._list=new(System.Collections.Generic.List$1(System.String).ctor);this.AllowReselectValue=!1;this.MaxItems=0},$ctor2:function(size,anchor,offset,skin){anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);skin===void 0&&(skin=4);this.$initialize();FaceUI.Entities.PanelBase.$ctor1.call(this,size,skin,anchor,offset);this.UpdateStyle(FaceUI.Entities.SelectList.DefaultStyle);this._scrollbar=new FaceUI.Entities.VerticalScrollbar.$ctor1(0,10,FaceUI.Entities.Anchor.CenterRight,new Microsoft.Xna.Framework.Vector2.$ctor2(-8,0),!1);this._scrollbar.Value=0;this._scrollbar.Visible=!1;this._scrollbar._hiddenInternalEntity=!0;this.AddChild(this._scrollbar,!1)},$ctor1:function(anchor,offset){offset===void 0&&(offset=null);FaceUI.Entities.SelectList.$ctor2.call(this,FaceUI.Entities.Entity.USE_DEFAULT_SIZE.$clone(),anchor,offset)},ctor:function(){FaceUI.Entities.SelectList.$ctor1.call(this,FaceUI.Entities.Anchor.Auto)}},methods:{InitAfterDeserialize:function(){FaceUI.Entities.PanelBase.prototype.InitAfterDeserialize.call(this);this._scrollbar._hiddenInternalEntity=!0},OnListChanged:function(){this._parent!=null&&this.OnResize();this.SelectedIndex>=this._list.Count&&this.Unselect();Bridge.staticEquals(this.OnListChange,null)?null:this.OnListChange(this)},AddItem:function(value){this.MaxItems!==0&&this.Count>=this.MaxItems||(this._list.add(value),this.OnListChanged())},AddItem$1:function(value,index){this.MaxItems!==0&&this.Count>=this.MaxItems||(this._list.insert(index,value),this.OnListChanged())},RemoveItem$1:function(value){this._list.remove(value);this.OnListChanged()},RemoveItem:function(index){this._list.removeAt(index);this.OnListChanged()},ClearItems:function(){this._list.clear();this.OnListChanged()},IsNaturallyInteractable:function(){return!0},MatchHeightToList:function(){if(this._list.Count!==0&&(this._paragraphs.Count!==0||(this.OnResize(),this._paragraphs.Count!==0))){var height=this._list.Count*(this._paragraphs.getItem(0).GetCharacterActualSize().Y/this.GlobalScale+this._paragraphs.getItem(0).SpaceAfter.Y)+this.Padding.Y*2;this.Size=new Microsoft.Xna.Framework.Vector2.$ctor2(this.Size.X,height)}},ScrollToSelected:function(){this._scrollbar!=null&&this._scrollbar.Visible&&(this._scrollbar.Value=this.SelectedIndex)},scrollToEnd:function(){this._scrollbar!=null&&this._scrollbar.Visible&&(this._scrollbar.Value=this._list.Count)},SetHeightBasedOnChildren:function(){return this.MatchHeightToList(),!0},OnCreatedListParagraph:function(paragraph){},OnBeforeDraw:function(spriteBatch){FaceUI.Entities.PanelBase.prototype.OnBeforeDraw.call(this,spriteBatch);this._hadResizeWhileNotVisible&&this.OnResize()},OnResize:function(){var i,paragraph;if(!this.IsVisible()){this._hadResizeWhileNotVisible=!0;return}for(this._hadResizeWhileNotVisible=!1,this.ClearChildren(),this._paragraphs.clear(),this.UpdateDestinationRects(),i=0;;)if(paragraph=FaceUI.UserInterface.DefaultParagraph(".",FaceUI.Entities.Anchor.Auto,void 0,void 0,void 0,void 0),paragraph.PromiscuousClicksMode=!0,paragraph.WrapWords=!1,paragraph.UpdateStyle(FaceUI.Entities.SelectList.DefaultParagraphStyle),paragraph.Scale=paragraph.Scale*this.ItemsScale,paragraph.SpaceAfter=Microsoft.Xna.Framework.Vector2.op_Addition(paragraph.SpaceAfter.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,this.ExtraSpaceBetweenLines-2|0)),paragraph.ExtraMargin.Y=(Bridge.Int.div(this.ExtraSpaceBetweenLines,2)|0)+3|0,paragraph.AttachedData=new FaceUI.Entities.ParagraphData.$ctor1(this,Bridge.identity(i,i=i+1|0)).$clone(),paragraph.UseActualSizeForCollision=!1,paragraph.Size=new Microsoft.Xna.Framework.Vector2.$ctor2(0,paragraph.GetCharacterActualSize().Y+this.ExtraSpaceBetweenLines),paragraph.BackgroundColorPadding=new Microsoft.Xna.Framework.Point.$ctor2(Bridge.Int.clip32(this.Padding.X),5),paragraph.BackgroundColorUseBoxSize=!0,paragraph._hiddenInternalEntity=!0,paragraph.PropagateEventsTo(this),this.AddChild(paragraph),this.OnCreatedListParagraph(paragraph),this._paragraphs.add(paragraph),paragraph.OnClick=Bridge.fn.combine(paragraph.OnClick,$asm.$.FaceUI.Entities.SelectList.f1),paragraph.UpdateDestinationRects(),paragraph.GetActualDestRect().Bottom>this._destRect.Bottom-this._scaledPadding.Y||i>this._list.Count){this.RemoveChild(paragraph);this._paragraphs.remove(paragraph);break}this._paragraphs.Count>0&&this._paragraphs.Count<this._list.Count?(this.AddChild(this._scrollbar,!1),this._scrollbar.Max=(this._list.Count-this._paragraphs.Count|0)>>>0,this._scrollbar.Max<2&&(this._scrollbar.Max=2),this._scrollbar.StepsCount=this._scrollbar.Max,this._scrollbar.Visible=!0):(this._scrollbar.Visible=!1,this._scrollbar.Value>0&&(this._scrollbar.Value=0))},PropagateEventsTo$2:function(other){this.PropagateEventsTo(Bridge.cast(other,FaceUI.Entities.Entity));this.OnListChange=Bridge.fn.combine(this.OnListChange,function(entity){Bridge.staticEquals(other.OnListChange,null)?null:other.OnListChange(other)})},PropagateEventsTo$1:function(other){this.PropagateEventsTo(Bridge.cast(other,FaceUI.Entities.Entity));this.OnListChange=Bridge.fn.combine(this.OnListChange,function(entity){Bridge.staticEquals(other.OnListChange,null)?null:other.OnListChange(other)})},Unselect:function(){this.Select(-1,!1)},Select$1:function(value){if(this.AllowReselectValue||!Bridge.referenceEquals(value,this._value)){if(value==null){this._value=value;this._index=-1;this.DoOnValueChange();return}if(this._index=this._list.indexOf(value),this._index===-1){if(this._value=null,FaceUI.UserInterface.Active.SilentSoftErrors)return;throw new FaceUI.Exceptions.NotFoundException.$ctor1("Value to set not found in list!");}this._value=value;this.DoOnValueChange()}},Select:function(index,relativeToScrollbar){if(relativeToScrollbar===void 0&&(relativeToScrollbar=!1),relativeToScrollbar&&(index=index+this._scrollbar.Value|0),this.AllowReselectValue||index!==this._index){if(index>=-1&&index>=this._list.Count){if(FaceUI.UserInterface.Active.SilentSoftErrors)return;throw new FaceUI.Exceptions.NotFoundException.$ctor1("Invalid list index to select!");}this._value=index>-1?this._list.getItem(index):null;this._index=index;this.DoOnValueChange()}},DrawEntity:function(spriteBatch,phase){var i,item_index,par,charWidth,toClip,charsToClip,isLocked,selectedParagraphIndex,i1,paragraph,destRect;for((this._prevSize.Y!==this._destRectInternal.Size.Y||this._hadResizeWhileNotVisible)&&this.OnResize(),this._prevSize=this._destRectInternal.Size.$clone(),FaceUI.Entities.PanelBase.prototype.DrawEntity.call(this,spriteBatch,phase),i=0;i<this._paragraphs.Count;i=i+1|0)item_index=i+this._scrollbar.Value|0,par=this._paragraphs.getItem(i),item_index<this._list.Count?(par.Text=this._list.getItem(item_index),par.BackgroundColor.A=0,par.Visible=!0,this.ClipTextIfOverflow&&(charWidth=par.GetCharacterActualSize().X,toClip=charWidth*par.Text.length-this._destRectInternal.Width,toClip>0&&(charsToClip=(Bridge.Int.clip32(Math.ceil(toClip/charWidth))+this.AddWhenClipping.length|0)+1|0,par.Text=charsToClip<par.Text.length?(par.Text.substr(0,par.Text.length-charsToClip|0)||"")+(this.AddWhenClipping||""):this.AddWhenClipping)),isLocked={v:!1},this.LockedItems.tryGetValue(item_index,isLocked),par.Locked=isLocked.v):(par.Visible=!1,par.Text="");selectedParagraphIndex=this._index;selectedParagraphIndex!==-1&&(i1=selectedParagraphIndex-this._scrollbar.Value|0,i1>=0&&i1<this._paragraphs.Count&&(paragraph=this._paragraphs.getItem(i1),destRect=paragraph.GetActualDestRect(),paragraph.State=FaceUI.Entities.EntityState.MouseDown,paragraph.BackgroundColor=this.GetActiveStyle("SelectedHighlightColor").asColor.$clone()))}}});Bridge.ns("FaceUI.Entities.SelectList",$asm.$);Bridge.apply($asm.$.FaceUI.Entities.SelectList,{f1:function(entity){var data=System.Nullable.getValue(Bridge.cast(Bridge.unbox(entity.AttachedData,FaceUI.Entities.ParagraphData),FaceUI.Entities.ParagraphData));data.list.LockSelection||data.list.Select(data.relativeIndex,!0)}});Bridge.define("FaceUI.Entities.TextInput",{inherits:[FaceUI.Entities.PanelBase],statics:{fields:{DefaultStyle:null,DefaultParagraphStyle:null,DefaultPlaceholderStyle:null,CaretBlinkingSpeed:0},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet;this.DefaultParagraphStyle=new FaceUI.Entities.StyleSheet;this.DefaultPlaceholderStyle=new FaceUI.Entities.StyleSheet;this.CaretBlinkingSpeed=2},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.TextInput)}}},fields:{_value:null,_caret:0,TextParagraph:null,PlaceholderParagraph:null,_multiLine:!1,_scrollbar:null,ValueWhenEmpty:null,_caretAnim:0,_placeholderText:null,CharactersLimit:0,LimitBySize:!1,HideInputWithChar:null,_actualDisplayText:null,Validators:null},props:{Multiline:{get:function(){return this._multiLine},set:function(value){this._multiLine!==value&&(this._multiLine=value,this.UpdateMultilineState())}},PlaceholderText:{get:function(){return this._placeholderText},set:function(value){this._placeholderText=this._multiLine?value:System.String.replaceAll(value,"\n","")}},Value:{get:function(){return this._value},set:function(value){var $t;value=($t=value,$t!=null?$t:"");this._value=this._multiLine?value:System.String.replaceAll(value,"\n","");this.FixCaretPosition()}},Caret:{get:function(){return this._caret},set:function(value){this._caret=value}},ScrollPosition:{get:function(){return this._scrollbar!=null?this._scrollbar.Value:0},set:function(value){this._scrollbar!=null&&(this._scrollbar.Value=value)}}},ctors:{init:function(){this._value="";this._caret=-1;this._multiLine=!1;this._caretAnim=0;this._placeholderText="";this.CharactersLimit=0;this.LimitBySize=!1;this._actualDisplayText="";this.Validators=new(System.Collections.Generic.List$1(FaceUI.Entities.TextValidators.ITextValidator).ctor)},$ctor2:function(multiline,size,anchor,offset,skin){if(anchor===void 0&&(anchor=9),offset===void 0&&(offset=null),skin===void 0&&(skin=4),this.$initialize(),FaceUI.Entities.PanelBase.$ctor1.call(this,size,skin,anchor,offset),this._multiLine=multiline,this.UpdateStyle(FaceUI.Entities.TextInput.DefaultStyle),multiline&&this.SetStyleProperty(FaceUI.Entities.StylePropertyIds.DefaultSize,new FaceUI.DataTypes.StyleProperty.$ctor2(Microsoft.Xna.Framework.Vector2.op_Multiply(this.EntityDefaultSize.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(1,4)))),this.LimitBySize=!this._multiLine,!FaceUI.UserInterface.Active._isDeserializing){this.TextParagraph=FaceUI.UserInterface.DefaultParagraph("",FaceUI.Entities.Anchor.TopLeft,void 0,void 0,void 0,void 0);this.TextParagraph.UpdateStyle(FaceUI.Entities.TextInput.DefaultParagraphStyle);this.TextParagraph._hiddenInternalEntity=!0;this.TextParagraph.Identifier="_TextParagraph";this.AddChild(this.TextParagraph,!0);this.PlaceholderParagraph=FaceUI.UserInterface.DefaultParagraph("",FaceUI.Entities.Anchor.TopLeft,void 0,void 0,void 0,void 0);this.PlaceholderParagraph.UpdateStyle(FaceUI.Entities.TextInput.DefaultPlaceholderStyle);this.PlaceholderParagraph._hiddenInternalEntity=!0;this.PlaceholderParagraph.Identifier="_PlaceholderParagraph";this.AddChild(this.PlaceholderParagraph,!0);this.UpdateMultilineState();var colorTextParagraph=Bridge.as(this.TextParagraph,FaceUI.Entities.RichParagraph);colorTextParagraph!=null&&(colorTextParagraph.EnableStyleInstructions=!1)}},$ctor1:function(multiline,anchor,offset){anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);FaceUI.Entities.TextInput.$ctor2.call(this,multiline,FaceUI.Entities.Entity.USE_DEFAULT_SIZE.$clone(),anchor,offset)},ctor:function(){FaceUI.Entities.TextInput.$ctor1.call(this,!1)}},methods:{UpdateMultilineState:function(){var $t;this._multiLine?(this._scrollbar=new FaceUI.Entities.VerticalScrollbar.$ctor1(0,0,FaceUI.Entities.Anchor.CenterRight,new Microsoft.Xna.Framework.Vector2.$ctor2(-8,0),!1),this._scrollbar.Value=0,this._scrollbar.Visible=!1,this._scrollbar._hiddenInternalEntity=!0,this._scrollbar.Identifier="__inputScrollbar",this.AddChild(this._scrollbar,!1)):this._scrollbar!=null&&(this._scrollbar.RemoveFromParent(),this._scrollbar=null);this.TextParagraph.WrapWords=this._multiLine;this.PlaceholderParagraph.WrapWords=this._multiLine;this.TextParagraph.Anchor=($t=this._multiLine?FaceUI.Entities.Anchor.TopLeft:FaceUI.Entities.Anchor.CenterLeft,this.PlaceholderParagraph.Anchor=$t,$t)},InitAfterDeserialize:function(){FaceUI.Entities.PanelBase.prototype.InitAfterDeserialize.call(this);this.TextParagraph=Bridge.as(this.Find$1("_TextParagraph"),FaceUI.Entities.Paragraph);this.TextParagraph._hiddenInternalEntity=!0;this._scrollbar=this.Find(FaceUI.Entities.VerticalScrollbar,"__inputScrollbar");this._scrollbar!=null&&(this._scrollbar._hiddenInternalEntity=!0);this.PlaceholderParagraph=Bridge.as(this.Find$1("_PlaceholderParagraph"),FaceUI.Entities.Paragraph);this.PlaceholderParagraph._hiddenInternalEntity=!0;this.UpdateMultilineState()},IsNaturallyInteractable:function(){return!0},ScrollToCaret:function(){if(this._scrollbar!=null)if(this._caret>=this._value.length&&(this._caret=-1),this._caret===-1)this._scrollbar.Value=this._scrollbar.Max|0;else{this.TextParagraph.Text=this._value;this.TextParagraph.CalcTextActualRectWithWrap();var processedValueText=this.TextParagraph.GetProcessedText(),currLine=System.String.split(processedValueText.substr(0,this._caret),[10].map(function(i){return String.fromCharCode(i)})).length;this._scrollbar.Value=currLine-1|0}},ResetCaret:function(scrollToCaret){this.Caret=-1;scrollToCaret&&this.ScrollToCaret()},PrepareInputTextForDisplay:function(usePlaceholder,showCaret){var caretShow=showCaret?Bridge.Int.clip32(this._caretAnim)%2==0?"|":" ":"",hiddenVal,currParagraph;return this.HideInputWithChar!=null?(hiddenVal=System.String.fromCharCount(System.Nullable.getValue(this.HideInputWithChar),this._value.length),this.TextParagraph.Text=System.String.insert(this._caret>=0?this._caret:hiddenVal.length,hiddenVal,caretShow)):this.TextParagraph.Text=System.String.insert(this._caret>=0?this._caret:this._value.length,this._value,caretShow),this.PlaceholderParagraph.Text=this._placeholderText,currParagraph=usePlaceholder?this.PlaceholderParagraph:this.TextParagraph,this.TextParagraph.UpdateDestinationRectsIfDirty(),currParagraph.GetProcessedText()},DoOnClick:function(){var i;if(FaceUI.Entities.PanelBase.prototype.DoOnClick.call(this),this._value.length>0){var actualParagraphPos=new Microsoft.Xna.Framework.Vector2.$ctor2(this._destRectInternal.Location.X,this._destRectInternal.Location.Y),relativeOffset=this.GetMousePos(Microsoft.Xna.Framework.Vector2.op_UnaryNegation(actualParagraphPos.$clone())),charSize=this.TextParagraph.GetCharacterActualSize(),x=Bridge.Int.clip32(relativeOffset.X/charSize.X);if(this._caret=x,this._multiLine){this.TextParagraph.Text=this._value;this.TextParagraph.CalcTextActualRectWithWrap();var processedValueText=this.TextParagraph.GetProcessedText(),y=Bridge.Int.clip32(relativeOffset.Y/charSize.Y)+this._scrollbar.Value|0,lines=new(System.Collections.Generic.List$1(System.String).$ctor1)(System.String.split(processedValueText,[10].map(function(i){return String.fromCharCode(i)})));for(i=0;i<y&&i<lines.Count;i=i+1|0)this._caret=this._caret+(lines.getItem(i).length+1|0)|0}this._caret>=this._value.length&&(this._caret=-1)}else this._caret=-1},DrawEntity:function(spriteBatch,phase){var showPlaceholder,currParagraph,linesFit,linesInText,prevWidth;if(FaceUI.Entities.PanelBase.prototype.DrawEntity.call(this,spriteBatch,phase),showPlaceholder=!(this.IsFocused||this._value.length>0),currParagraph=showPlaceholder?this.PlaceholderParagraph:this.TextParagraph,this._actualDisplayText=this.PrepareInputTextForDisplay(showPlaceholder,this.IsFocused),this._multiLine&&this._actualDisplayText!=null&&this._destRectInternal.Height>0)if(linesFit=Bridge.Int.div(this._destRectInternal.Height,Bridge.Int.clip32(Math.max(currParagraph.GetCharacterActualSize().Y,1)))|0,linesInText=System.String.split(this._actualDisplayText,[10].map(function(i){return String.fromCharCode(i)})).length,linesInText>linesFit){prevWidth=currParagraph.Size.X;currParagraph.Size=new Microsoft.Xna.Framework.Vector2.$ctor2(this._destRectInternal.Width/this.GlobalScale-20,0);currParagraph.Size.X!==prevWidth&&(this._actualDisplayText=this.PrepareInputTextForDisplay(showPlaceholder,this.IsFocused),linesInText=System.String.split(this._actualDisplayText,[10].map(function(i){return String.fromCharCode(i)})).length);this._scrollbar.Max=Math.max(linesInText-linesFit|0,2)>>>0;this._scrollbar.StepsCount=this._scrollbar.Max;this._scrollbar.Visible=!0;var lines=new(System.Collections.Generic.List$1(System.String).$ctor1)(System.String.split(this._actualDisplayText,[10].map(function(i){return String.fromCharCode(i)}))),from=Math.min(this._scrollbar.Value,lines.Count-1|0),size=Math.min(linesFit,lines.Count-from|0);lines=lines.GetRange(from,size);this._actualDisplayText=Bridge.toArray(lines).join("\n");currParagraph.Text=this._actualDisplayText}else currParagraph.Size=Microsoft.Xna.Framework.Vector2.Zero.$clone(),this._scrollbar.Visible=!1;this.TextParagraph.Visible=!showPlaceholder;this.PlaceholderParagraph.Visible=showPlaceholder},ValidateInput:function(newVal,oldVal){var $t,textSize,validator;if(this.CharactersLimit!==0&&newVal.v.length>this.CharactersLimit||!this._multiLine&&System.String.contains(newVal.v,"\n"))return newVal.v=oldVal,!1;if(this.LimitBySize)if(this.PrepareInputTextForDisplay(!1,!1),textSize=this.TextParagraph.GetActualDestRect(),this._multiLine&&textSize.Height>=this._destRectInternal.Height)return newVal.v=oldVal,!1;else if(textSize.Width>=this._destRectInternal.Width)return newVal.v=oldVal,!1;$t=Bridge.getEnumerator(this.Validators);try{while($t.moveNext())if(validator=$t.Current,!validator.ValidateText(newVal,oldVal))return newVal.v=oldVal,!1}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return!0},FixCaretPosition:function(){this._caret<-1&&(this._caret=0);(this._caret>=this._value.length||this._value.length===0)&&(this._caret=-1)},DoBeforeUpdate:function(){if(this._caretAnim+=FaceUI.UserInterface.Active.CurrGameTime.ElapsedGameTime.getTotalSeconds()*FaceUI.Entities.TextInput.CaretBlinkingSpeed,this.IsFocused){this.FixCaretPosition();var pos={v:this._caret},oldVal=this._value;this._value=this.KeyboardInput.FaceUI$IKeyboardInput$GetTextInput(this._value,this.TextParagraph.MaxCharactersInLine,pos);this._caret=pos.v;Bridge.referenceEquals(this._value,oldVal)||(this.ValidateInput(Bridge.ref(this,"_value"),oldVal)||(this._value=oldVal),Bridge.referenceEquals(this._value,oldVal)||this.DoOnValueChange(),this.ScrollToCaret(),this.FixCaretPosition())}FaceUI.Entities.PanelBase.prototype.DoBeforeUpdate.call(this)},DoOnFocusChange:function(){FaceUI.Entities.PanelBase.prototype.DoOnFocusChange.call(this);this.ValueWhenEmpty!=null&&this.Value.length===0&&(this.Value=this.ValueWhenEmpty)}}});Bridge.define("FaceUI.Entities.VerticalScrollbar",{inherits:[FaceUI.Entities.Slider],statics:{fields:{DefaultStyle:null},ctors:{init:function(){this.DefaultStyle=new FaceUI.Entities.StyleSheet},ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.VerticalScrollbar)}}},fields:{_frameActualHeight:0,_markHeight:0,AdjustMaxAutomatically:!1},ctors:{init:function(){this._frameActualHeight=0;this._markHeight=20;this.AdjustMaxAutomatically=!1},$ctor1:function(min,max,anchor,offset,adjustMaxAutomatically){anchor===void 0&&(anchor=9);offset===void 0&&(offset=null);adjustMaxAutomatically===void 0&&(adjustMaxAutomatically=!1);this.$initialize();FaceUI.Entities.Slider.$ctor2.call(this,0,0,FaceUI.Entities.Entity.USE_DEFAULT_SIZE.$clone(),FaceUI.Entities.SliderSkin.Default,anchor,offset);this.DoEventsIfDirectParentIsLocked=!0;this.AdjustMaxAutomatically=adjustMaxAutomatically;this.UpdateStyle(FaceUI.Entities.VerticalScrollbar.DefaultStyle)},ctor:function(){FaceUI.Entities.VerticalScrollbar.$ctor1.call(this,0,10)}},methods:{DoOnMouseReleased:function(){var mousePos=this.GetMousePos(this._lastScrollVal.ToVector2());mousePos.Y<=this._destRect.Y+this._frameActualHeight?this.Value=this._value-this.GetStepSize()|0:mousePos.Y>=this._destRect.Bottom-this._frameActualHeight&&(this.Value=this._value+this.GetStepSize()|0);FaceUI.Entities.Slider.prototype.DoOnMouseReleased.call(this)},DoWhileMouseDown:function(){var mousePos=this.GetMousePos(this._lastScrollVal.ToVector2());if(mousePos.Y>=this._destRect.Y+this._frameActualHeight*.5&&mousePos.Y<=this._destRect.Bottom-this._frameActualHeight*.5){var relativePos=mousePos.Y-this._destRect.Y-this._frameActualHeight*.5-this._markHeight*.5,internalHeight=this._destRect.Height-this._frameActualHeight-this._markHeight*.5,relativeVal=relativePos/internalHeight;this.Value=Bridge.Int.clip32(Bridge.Math.round(this.Min+relativeVal*(this.Max-this.Min>>>0),0,6))}Bridge.staticEquals(this.WhileMouseDown,null)?null:this.WhileMouseDown(this)},DrawEntity:function(spriteBatch,phase){var markY,markDest;Bridge.referenceEquals(FaceUI.UserInterface.Active.ActiveEntity,this)||this.CalcAutoMaxValue();var texture=FaceUI.Resources.VerticalScrollbarTexture,markTexture=FaceUI.Resources.VerticalScrollbarMarkTexture,FrameHeight=FaceUI.Resources.VerticalScrollbarData.FrameHeight;FaceUI.UserInterface.Active.DrawUtils.DrawSurface(spriteBatch,texture,this._destRect.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,FrameHeight),1,this.FillColor.$clone());var frameSizeTexture=new Microsoft.Xna.Framework.Vector2.$ctor2(texture.Width,texture.Height*FrameHeight),frameSizeRender=frameSizeTexture.$clone(),ScaleYfac=this._destRect.Width/frameSizeRender.X,markWidth=this._destRect.Width;this._markHeight=Bridge.Int.clip32(markTexture.Height/markTexture.Width*markWidth);this._frameActualHeight=FrameHeight*texture.Height*ScaleYfac;markY=this._destRect.Y+this._frameActualHeight+this._markHeight*.5+(this._destRect.Height-this._frameActualHeight*2-this._markHeight)*this.GetValueAsPercent();markDest=new Microsoft.Xna.Framework.Rectangle.$ctor2(this._destRect.X,Bridge.Int.clip32(Bridge.Math.round(markY,0,6))-(Bridge.Int.div(this._markHeight,2)|0)|0,markWidth,this._markHeight);FaceUI.UserInterface.Active.DrawUtils.DrawImage(spriteBatch,markTexture,markDest.$clone(),this.FillColor.$clone())},DoAfterUpdate:function(){this._isInteractable&&(Bridge.referenceEquals(FaceUI.UserInterface.Active.ActiveEntity,this)||Bridge.referenceEquals(FaceUI.UserInterface.Active.ActiveEntity,this._parent)||FaceUI.UserInterface.Active.ActiveEntity!=null&&FaceUI.UserInterface.Active.ActiveEntity.IsDeepChildOf(this._parent))&&this.MouseInput.FaceUI$IMouseInput$MouseWheelChange!==0&&(this.Value=this._value-Bridge.Int.mul(this.MouseInput.FaceUI$IMouseInput$MouseWheelChange,this.GetStepSize())|0)},CalcAutoMaxValue:function(){var $t,newMax,parentTop,child,bottom,currNewMax;if(this.AdjustMaxAutomatically){newMax=0;parentTop=this.Parent.InternalDestRect.Y;$t=Bridge.getEnumerator(this.Parent._children);try{while($t.moveNext())(child=$t.Current,Bridge.referenceEquals(child,this))||child._hiddenInternalEntity||(bottom=child.GetActualDestRect().Bottom,currNewMax=bottom-parentTop|0,newMax=Math.max(newMax,currNewMax))}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}newMax=newMax-(this.Parent.InternalDestRect.Height-4|0)|0;newMax=Math.max(newMax,0);System.Int64(newMax).ne(System.Int64(this.Max))&&(this.Max=newMax>>>0);this.StepsCount=Bridge.Int.div(this.Max-this.Min>>>0,80)>>>0}},DoOnMouseWheelScroll:function(){this.Value=this._value-Bridge.Int.mul(this.MouseInput.FaceUI$IMouseInput$MouseWheelChange,this.GetStepSize())|0}}});Bridge.define("FaceUI.Entities.RootPanel",{inherits:[FaceUI.Entities.Panel],statics:{ctors:{ctor:function(){FaceUI.Entities.Entity.MakeSerializable(FaceUI.Entities.RootPanel)}}},ctors:{ctor:function(){this.$initialize();FaceUI.Entities.Panel.$ctor1.call(this,Microsoft.Xna.Framework.Vector2.Zero,FaceUI.Entities.PanelSkin.None,FaceUI.Entities.Anchor.Center,Microsoft.Xna.Framework.Vector2.Zero);this.Padding=Microsoft.Xna.Framework.Vector2.Zero.$clone();this.ShadowColor=Microsoft.Xna.Framework.Color.Transparent.$clone();this.OutlineWidth=0;this.ClickThrough=!0}},methods:{CalcDestRect:function(){var width=FaceUI.UserInterface.Active.ScreenWidth,height=FaceUI.UserInterface.Active.ScreenHeight;return new Microsoft.Xna.Framework.Rectangle.$ctor2(0,0,width,height)},UpdateDestinationRectsIfDirty:function(){this.IsDirty&&this.UpdateDestinationRects()},Draw:function(spriteBatch){var $t,childrenSorted,child;if(this.Visible){this.OnBeforeDraw(spriteBatch);this.UpdateDestinationRectsIfDirty();childrenSorted=this.GetSortedChildren();$t=Bridge.getEnumerator(childrenSorted);try{while($t.moveNext())child=$t.Current,child.Draw(spriteBatch)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}this.OnAfterDraw(spriteBatch)}}}})});